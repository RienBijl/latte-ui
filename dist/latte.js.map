{"version":3,"file":"latte.js","sources":["../src/js/z.js","../src/js/util/dom.js","../src/js/hid/OutsideEvent.js","../src/js/api.js","../src/js/hid/PointerEvents.js","../src/vue/component/Autocomplete.vue","../src/js/core.js","../src/js/actions.js","../src/vue/component/Chart.vue","../src/js/util/string.js","../src/vue/component/Draggable.vue","../src/js/ui/grid.js","../src/vue/component/Grid.vue","../src/vue/component/OffscreenContainer.vue","../src/js/ui/overlays.js","../src/vue/component/PdfViewer.vue","../src/vue/directive/ClickAway.js","../src/vue/directive/ContextMenu.js","../src/vue/mixin/LatteApisMixin.js","../src/vue/mixin/MomentMixin.js","../src/js/i18n.js","../src/js/operators.js","../src/js/ui/messages.js","../src/js/util/cookies.js","../src/js/ui/root.js","../src/js/ui/forms.js","../src/js/ui/notices.js","../src/js/ui/panels.js","../src/js/ui/tooltip.js","../src/js/houdini-apis.js","../src/js/util/clipboard.js","../src/js/util/json.js","../src/js/sdk.js","../src/js/app.js"],"sourcesContent":["/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nlet currentZ = 2000;\r\n\r\n/**\r\n * Generates a z-value to be used with z-index.\r\n *\r\n * @param {Function} fn\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function needsZIndex(fn)\r\n{\r\n\tfn(currentZ);\r\n\tcurrentZ++;\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet lattePath = null;\r\n\r\nexport function closest(element, selector)\r\n{\r\n\tfor (; element && element !== document; element = element.parentNode)\r\n\t\tif (element === selector || (typeof selector === \"string\" && element.matches(selector)))\r\n\t\t\treturn element;\r\n\r\n\treturn null;\r\n}\r\n\r\nexport function createElement(element, fn = undefined)\r\n{\r\n\tconst el = document.createElement(element);\r\n\r\n\tif (fn !== undefined)\r\n\t\tfn(el);\r\n\r\n\treturn el;\r\n}\r\n\r\nexport function downloadFile(fileName, url)\r\n{\r\n\tcreateElement(\"a\", a =>\r\n\t{\r\n\t\ta.download = fileName;\r\n\t\ta.href = url;\r\n\r\n\t\tdocument.body.appendChild(a);\r\n\r\n\t\ta.click();\r\n\t\ta.remove();\r\n\t});\r\n}\r\n\r\nexport function getLattePath()\r\n{\r\n\tif (lattePath !== null)\r\n\t\treturn lattePath;\r\n\r\n\tconst lattejs = document.querySelector(`script[src*=\"latte.js\"]`);\r\n\r\n\tif (lattejs === null)\r\n\t\tthrow new Error(\"Could not get latte.js path. The world ends here...\");\r\n\r\n\treturn lattePath = lattejs.getAttribute(\"src\").split(\"latte.js\")[0] || null;\r\n}\r\n\r\nexport function isTouchOnlyDevice()\r\n{\r\n\treturn \"ontouchstart\" in window || navigator.msMaxTouchPoints;\r\n}\r\n\r\nexport function live(root, selector, event, callback, options = {passive: true})\r\n{\r\n\tif (event.indexOf(\" \") > -1)\r\n\t{\r\n\t\tconst events = event.split(\" \");\r\n\r\n\t\tevents.forEach(event => live(root, selector, event, callback));\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\troot.addEventListener(event, function (evt)\r\n\t{\r\n\t\tconst qs = root.querySelectorAll(selector);\r\n\r\n\t\tif (!qs)\r\n\t\t\treturn;\r\n\r\n\t\tlet el = evt.target, index;\r\n\r\n\t\twhile (el && ((index = Array.prototype.indexOf.call(qs, el)) === -1))\r\n\t\t\tel = el.parentElement;\r\n\r\n\t\tif (index > -1)\r\n\t\t\tcallback(el, evt)\r\n\r\n\t}, options);\r\n}\r\n\r\nexport function printDocument(url)\r\n{\r\n\tconst wnd = window.open(url);\r\n\twnd.addEventListener(\"load\", () =>\r\n\t{\r\n\t\twnd.print();\r\n\t\twnd.addEventListener(\"focus\", () => wnd.close());\r\n\t});\r\n}\r\n\r\nexport function raf(fn, delay = undefined)\r\n{\r\n\tif (delay !== undefined)\r\n\t\treturn setTimeout(() => requestAnimationFrame(fn), delay);\r\n\r\n\trequestAnimationFrame(fn);\r\n}\r\n\r\nexport function relativeCoordsTo(element, evt)\r\n{\r\n\tif (!evt.clientX || !evt.clientY)\r\n\t\treturn undefined;\r\n\r\n\tconst rect = element.getBoundingClientRect();\r\n\r\n\treturn {\r\n\t\tx: evt.clientX - rect.left,\r\n\t\ty: evt.clientY - rect.top\r\n\t};\r\n}\r\n\r\nexport function toDOM(str)\r\n{\r\n\tconst temp = document.createElement(\"div\");\r\n\tconst fragment = document.createDocumentFragment();\r\n\r\n\tlet child;\r\n\r\n\ttemp.innerHTML = str;\r\n\r\n\twhile ((child = temp.firstChild))\r\n\t\tfragment.appendChild(child);\r\n\r\n\treturn fragment;\r\n}\r\n\r\nexport default {\r\n\r\n\tclosest,\r\n\r\n\tcreateElement,\r\n\r\n\tdownloadFile,\r\n\r\n\tlive,\r\n\r\n\tprintDocument,\r\n\r\n\traf,\r\n\r\n\trelativeCoordsTo,\r\n\r\n\ttoDOM\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { closest } from \"../util/dom\";\r\n\r\nclass OutsideEvent\r\n{\r\n\r\n\tconstructor(source)\r\n\t{\r\n\t\tthis.listeners = [];\r\n\t\tthis.source = source;\r\n\t}\r\n\r\n\taddEventListener(type, listener, options = {})\r\n\t{\r\n\t\tlistener.id = this.listeners.length;\r\n\r\n\t\tthis.listeners.push(listener);\r\n\r\n\t\tconst fn = evt =>\r\n\t\t{\r\n\t\t\tif (this.isWithinSource(evt))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tlistener(evt);\r\n\t\t};\r\n\r\n\t\tdocument.addEventListener(type, fn, options);\r\n\t}\r\n\r\n\tremoveEventListener(type, listener, options = {})\r\n\t{\r\n\t\tconst index = this.listeners.findIndex(l => l.id === listener.id);\r\n\r\n\t\tif (index === -1)\r\n\t\t\treturn;\r\n\r\n\t\tdocument.removeEventListener(type, this.listeners[index], options);\r\n\r\n\t\tthis.listeners.splice(index, 1);\r\n\t}\r\n\r\n\tisWithinSource(evt)\r\n\t{\r\n\t\tif (evt.pageX === undefined)\r\n\t\t\treturn false;\r\n\r\n\t\tconst documentElement = document.scrollingElement;\r\n\t\tconst element = document.elementFromPoint(evt.pageX - documentElement.scrollLeft, evt.pageY - documentElement.scrollTop);\r\n\r\n\t\treturn closest(element, this.source) !== null;\r\n\t}\r\n\r\n}\r\n\r\nEventTarget.prototype.addOutsideEventListener = function (type, listener, options = {})\r\n{\r\n\tif (this.outsideEvent === undefined)\r\n\t\tthis.outsideEvent = new OutsideEvent(this);\r\n\r\n\tthis.outsideEvent.addEventListener(type, listener, options);\r\n};\r\n\r\nEventTarget.prototype.removeOutsideEventListener = function (type, listener, options = {})\r\n{\r\n\tif (this.outsideEvent === undefined)\r\n\t\tthis.outsideEvent = new OutsideEvent(this);\r\n\r\n\tthis.outsideEvent.removeEventListener(type, listener, options);\r\n};\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\n/**\r\n * Generates a random unique ID using the browsers crypto capabilities.\r\n *\r\n * @returns {String}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function id()\r\n{\r\n\tconst array = new Uint32Array(3);\r\n\r\n\twindow.crypto.getRandomValues(array);\r\n\r\n\treturn \"latte-\" + array.join(\"-\");\r\n}\r\n\r\n/**\r\n * Requests an API endpoint.\r\n *\r\n * @param {String} url\r\n * @param {RequestInit} options\r\n *\r\n * @returns {Promise<Response>}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function request(url, options = {})\r\n{\r\n\treturn fetch(url, Object.assign({}, {credentials: \"same-origin\"}, options));\r\n}\r\n\r\n/**\r\n * Requests a JSON endpoint.\r\n *\r\n * @param {String} url\r\n * @param {RequestInit} options\r\n *\r\n * @returns {Promise<Object>}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function requestJson(url, options = {})\r\n{\r\n\treturn request(url, options)\r\n\t\t.then(r => r.json());\r\n}\r\n\r\nexport default {\r\n\r\n\tid,\r\n\r\n\trequest,\r\n\r\n\trequestJson\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { isTouchOnlyDevice } from \"../util/dom\";\r\n\r\n(function ()\r\n{\r\n\r\n\tif (typeof PointerEvent !== \"undefined\")\r\n\t\treturn; // Yay for this browser!\r\n\r\n\tconst isATouchOnlyDevice = isTouchOnlyDevice();\r\n\r\n\tconst events = {\r\n\t\tclick: [\"click\", \"tap\"],\r\n\t\tpointerdown: [\"mousedown\", \"touchstart\"],\r\n\t\tpointermove: [\"mousemove\", \"touchmove\"],\r\n\t\tpointerover: [\"mouseover\", \"touchstart\"],\r\n\t\tpointerout: [\"mouseout\", \"touchend\"],\r\n\t\tpointerup: [\"mouseup\", \"touchend\"]\r\n\t};\r\n\r\n\tconst handlers = {\r\n\r\n\t\ttap($this, listener, options)\r\n\t\t{\r\n\t\t\tlet isTap = false;\r\n\r\n\t\t\toriginal.addEventListener.call($this, \"touchstart\", () => isTap = true, options);\r\n\t\t\toriginal.addEventListener.call($this, \"touchmove\", () => isTap = false, options);\r\n\t\t\toriginal.addEventListener.call($this, \"touchend\", evt =>\r\n\t\t\t{\r\n\t\t\t\tif (!isTap)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tlistener(evt);\r\n\t\t\t}, options);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tconst original = {\r\n\t\taddEventListener: EventTarget.prototype.addEventListener,\r\n\t\tremoveEventListener: EventTarget.prototype.removeEventListener\r\n\t};\r\n\r\n\tEventTarget.prototype.addEventListener = function (type, listener, options)\r\n\t{\r\n\t\tlet overrideType = type;\r\n\r\n\t\tif (type in events)\r\n\t\t\toverrideType = isATouchOnlyDevice ? events[type][1] : events[type][0];\r\n\r\n\t\tif (overrideType in handlers)\r\n\t\t\thandlers[overrideType](this, listener, options);\r\n\t\telse\r\n\t\t\toriginal.addEventListener.call(this, overrideType, listener, options);\r\n\t};\r\n\r\n})();\r\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<template>\r\n\r\n\t<div class=\"latte-autocomplete\" v-click-away=\"onBlur\">\r\n\t\t<div class=\"form-control\" :disabled=\"disabled\">\r\n\r\n\t\t\t<template v-for=\"selection in values\">\r\n\r\n\t\t\t\t<slot name=\"selection\" v-bind=\"selection\">\r\n\r\n\t\t\t\t\t<span class=\"badge badge-primary\">\r\n\t\t\t\t\t\t<span>{{ selection.label }}</span>\r\n\t\t\t\t\t\t<button class=\"btn\" @click=\"selection.remove()\"><i class=\"mdi mdi-window-close\"></i></button>\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t</slot>\r\n\r\n\t\t\t</template>\r\n\r\n\t\t\t<input type=\"search\" :name=\"name\" class=\"form-control\" ref=\"field\" :placeholder=\"placeholder\" autocomplete=\"false\" @focus=\"onFocus\" v-model=\"searchTerm\" @keydown.delete=\"onKeyPressDelete\" @keydown.enter=\"onSelectSuggestion\" @keydown.tab=\"onSelectFirstSuggestion\" @keydown.down=\"onKeyPressDown\" @keydown.up=\"onKeyPressUp\" v-if=\"canSearch\"/>\r\n\r\n\t\t</div>\r\n\t\t<div class=\"dropdown\" :class=\"{'is-open': shouldOpenSuggestions}\" role=\"combobox\">\r\n\t\t\t<nav class=\"nav nav-list\">\r\n\r\n\t\t\t\t<template v-for=\"(suggestion, index) in suggestionsFiltered\">\r\n\r\n\t\t\t\t\t<a class=\"nav-link\" :class=\"{'is-hover': currentSuggestion === index}\" @pointermove.passive=\"currentSuggestion = index\" @click=\"onSelectSuggestion\" role=\"option\">\r\n\r\n\t\t\t\t\t\t<slot name=\"suggestion\" v-bind=\"suggestion\">\r\n\r\n\t\t\t\t\t\t\t<span>{{ suggestion.label }} <span class=\"sub-label\" v-if=\"suggestion.sub_label\">{{ suggestion.sub_label }}</span></span>\r\n\t\t\t\t\t\t\t<i class=\"mdi mdi-chevron-right\"></i>\r\n\r\n\t\t\t\t\t\t</slot>\r\n\r\n\t\t\t\t\t</a>\r\n\r\n\t\t\t\t</template>\r\n\r\n\t\t\t</nav>\r\n\t\t</div>\r\n\t\t<span class=\"spinner spinner-primary\" v-if=\"isLoading\"></span>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\timport { id, request } from \"../../js/api\";\r\n\r\n\tfunction areArraysEqual(a, b)\r\n\t{\r\n\t\tif (a.length !== b.length)\r\n\t\t\treturn false;\r\n\r\n\t\tfor (let i = 0; i < a.length; i++)\r\n\t\t\tif (a[i] !== b[i])\r\n\t\t\t\treturn false;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-autocomplete\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\tdefaultValue: {\r\n\t\t\t\tdefault: undefined,\r\n\t\t\t\trequired: false\r\n\t\t\t},\r\n\r\n\t\t\tdisabled: {\r\n\t\t\t\tdefault: false,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tlimit: {\r\n\t\t\t\tdefault: 5,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\tmultiSelect: {\r\n\t\t\t\tdefault: false,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tname: {\r\n\t\t\t\tdefault: id(),\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\r\n\t\t\toffset: {\r\n\t\t\t\tdefault: 0,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\tplaceholder: {\r\n\t\t\t\tdefault: \"Search...\",\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\r\n\t\t\turl: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\r\n\t\t\tvalue: {\r\n\t\t\t\tdefault: () => [],\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Array | Number\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tabortController: null,\r\n\t\t\t\tcanEmit: true,\r\n\t\t\t\tcanOpen: false,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tcurrentSuggestion: -1,\r\n\t\t\t\tsearchTerm: \"\",\r\n\t\t\t\tsuggestions: [],\r\n\t\t\t\tvalueLast: [],\r\n\t\t\t\tvalues: []\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tthis.onValueChanged();\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\tcanSearch()\r\n\t\t\t{\r\n\t\t\t\treturn this.multiSelect || this.values.length === 0;\r\n\t\t\t},\r\n\r\n\t\t\tshouldOpenSuggestions()\r\n\t\t\t{\r\n\t\t\t\treturn this.canOpen && this.suggestionsFiltered.length > 0;\r\n\t\t\t},\r\n\r\n\t\t\tsuggestionsFiltered()\r\n\t\t\t{\r\n\t\t\t\treturn this.suggestions.filter(s => this.values.filter(v => v.label === s.label && v.value === s.value).length === 0);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\taddValue(label, value)\r\n\t\t\t{\r\n\t\t\t\tif (label === undefined || value === undefined)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.values.filter(v => v.value === value && v.label === label).length > 0)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst remove = () => this.removeValue(value);\r\n\r\n\t\t\t\tthis.values.push({label, remove, value});\r\n\t\t\t},\r\n\r\n\t\t\tremoveValue(value)\r\n\t\t\t{\r\n\t\t\t\tthis.values = this.values.filter(v => v.value !== value);\r\n\t\t\t},\r\n\r\n\t\t\tonBlur()\r\n\t\t\t{\r\n\t\t\t\tthis.canOpen = false;\r\n\t\t\t},\r\n\r\n\t\t\tonFocus()\r\n\t\t\t{\r\n\t\t\t\tthis.suggestions = [];\r\n\t\t\t\tthis.canOpen = true;\r\n\t\t\t},\r\n\r\n\t\t\tonSelectSuggestion()\r\n\t\t\t{\r\n\t\t\t\tif (!this.suggestionsFiltered[this.currentSuggestion])\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst {label, value} = this.suggestionsFiltered[this.currentSuggestion];\r\n\r\n\t\t\t\tthis.addValue(label, value);\r\n\t\t\t\tthis.canOpen = false;\r\n\t\t\t\tthis.searchTerm = \"\";\r\n\t\t\t},\r\n\r\n\t\t\tonSelectFirstSuggestion(evt)\r\n\t\t\t{\r\n\t\t\t\tif (this.suggestions.length === 0 || !this.shouldOpenSuggestions)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.currentSuggestion === -1)\r\n\t\t\t\t\tthis.onKeyPressDown();\r\n\r\n\t\t\t\tthis.onSelectSuggestion();\r\n\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t},\r\n\r\n\t\t\tonKeyPressDelete()\r\n\t\t\t{\r\n\t\t\t\tif (this.searchTerm !== \"\")\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.values.pop();\r\n\t\t\t},\r\n\r\n\t\t\tonKeyPressDown()\r\n\t\t\t{\r\n\t\t\t\tif (this.currentSuggestion + 1 >= this.suggestions.length)\r\n\t\t\t\t\tthis.currentSuggestion = -1;\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.currentSuggestion++;\r\n\t\t\t},\r\n\r\n\t\t\tonKeyPressUp()\r\n\t\t\t{\r\n\t\t\t\tif (this.currentSuggestion - 1 < -1)\r\n\t\t\t\t\tthis.currentSuggestion = this.suggestions.length - 1;\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.currentSuggestion--;\r\n\t\t\t},\r\n\r\n\t\t\tonReceiveSuggestions(response)\r\n\t\t\t{\r\n\t\t\t\tthis.abortController = null;\r\n\t\t\t\tthis.canOpen = true;\r\n\t\t\t\tthis.currentSuggestion = -1;\r\n\t\t\t\tthis.suggestions = response.data;\r\n\t\t\t},\r\n\r\n\t\t\tonReceiveValues(response)\r\n\t\t\t{\r\n\t\t\t\tresponse.data.forEach(v => this.addValue(v.label, v.value));\r\n\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t},\r\n\r\n\t\t\tonSearchTermChanged()\r\n\t\t\t{\r\n\t\t\t\tif (this.searchTerm.trim() === \"\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.currentSuggestion = -1;\r\n\t\t\t\t\tthis.canOpen = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.abortController !== null)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.abortController.abort();\r\n\t\t\t\t\tthis.abortController = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.abortController = new AbortController();\r\n\r\n\t\t\t\trequest(`${this.url}?q=${encodeURIComponent(this.searchTerm.toLowerCase())}`, {cache: \"no-cache\", signal: this.signal})\r\n\t\t\t\t\t.then(r => r.json())\r\n\t\t\t\t\t.then(r => this.onReceiveSuggestions(r))\r\n\t\t\t\t\t.catch(err => console.error(err));\r\n\t\t\t},\r\n\r\n\t\t\tonValueChanged()\r\n\t\t\t{\r\n\t\t\t\tlet value = this.multiSelect ? this.value : [this.value];\r\n\t\t\t\tvalue = value.filter ? value.filter(v => v > 0) : value;\r\n\r\n\t\t\t\tif (value.length === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.values = [];\r\n\t\t\t\t\tthis.valueLast = [];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (areArraysEqual(value, this.valueLast))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.isLoading)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.isLoading = true;\r\n\r\n\t\t\t\trequest(`${this.url}?ids=${value.join(\",\")}`)\r\n\t\t\t\t\t.then(r => r.json())\r\n\t\t\t\t\t.then(r => this.onReceiveValues(r))\r\n\t\t\t\t\t.catch(err => console.error(err));\r\n\r\n\t\t\t\tthis.valueLast = value;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\tshouldOpenSuggestions()\r\n\t\t\t{\r\n\t\t\t\tthis.currentSuggestion = -1;\r\n\t\t\t},\r\n\r\n\t\t\tsearchTerm()\r\n\t\t\t{\r\n\t\t\t\tthis.onSearchTermChanged();\r\n\t\t\t},\r\n\r\n\t\t\tvalue()\r\n\t\t\t{\r\n\t\t\t\tthis.canEmit = false;\r\n\t\t\t\tthis.onValueChanged();\r\n\t\t\t},\r\n\r\n\t\t\tvalues()\r\n\t\t\t{\r\n\t\t\t\tif (this.canEmit === false)\r\n\t\t\t\t\treturn this.canEmit = true;\r\n\r\n\t\t\t\tlet values = this.values.map(v => v.value);\r\n\t\t\t\tthis.$emit(\"input\", (this.multiSelect ? values : values[0]) || this.defaultValue);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n</script>\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet main = undefined;\r\n\r\n/**\r\n * Deep merges multiple objects.\r\n *\r\n * @param {*} target\r\n * @param {*} sources\r\n *\r\n * @returns {*}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function deepMerge(target, ...sources)\r\n{\r\n\tif (sources.length === 0)\r\n\t\treturn target;\r\n\r\n\tconst source = sources.shift();\r\n\r\n\tif (!isObject(target) || !isObject(source))\r\n\t\treturn deepMerge(target, ...sources);\r\n\r\n\tfor (const key in source)\r\n\t{\r\n\t\tif (!source.hasOwnProperty(key))\r\n\t\t\tcontinue;\r\n\r\n\t\tif (isObject(source[key]))\r\n\t\t{\r\n\t\t\tif (!target[key])\r\n\t\t\t\tObject.assign(target, {[key]: source[key]});\r\n\r\n\t\t\tdeepMerge(target[key], source[key]);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tObject.assign(target, {[key]: source[key]});\r\n\t\t}\r\n\t}\r\n\r\n\treturn deepMerge(target, ...sources);\r\n}\r\n\r\n/**\r\n * Gets the main#app element.\r\n *\r\n * @returns {HTMLMainElement}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function getMainElement()\r\n{\r\n\treturn main || (main = document.querySelector(\"main#app\"));\r\n}\r\n\r\n/**\r\n * Handles an Error.\r\n *\r\n * @param {Error} err\r\n * @param {Function|undefined} fn\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function handleError(err, fn = undefined)\r\n{\r\n\tLatte.messages.alert(\"Aw snap!\", `<pre>${err.stack}</pre>`);\r\n\r\n\tif (fn)\r\n\t\tfn();\r\n}\r\n\r\n/**\r\n * Returns TRUE when obj is an object.\r\n *\r\n * @param {*} obj\r\n *\r\n * @returns {Boolean}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function isObject(obj)\r\n{\r\n\treturn obj && typeof obj === \"object\" && !Array.isArray(obj);\r\n}\r\n\r\n/**\r\n * Sets an interval.\r\n *\r\n * @param {Number} timeout\r\n * @param {Function} func\r\n *\r\n * @returns {Number}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function interval(timeout, func)\r\n{\r\n\tfunc();\r\n\r\n\treturn setInterval(func, timeout);\r\n}\r\n\r\n/**\r\n * Returns TRUE when obj is iterable.\r\n *\r\n * @param {*} obj\r\n *\r\n * @returns {Boolean}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function isIterable(obj)\r\n{\r\n\tif (obj === null)\r\n\t\treturn false;\r\n\r\n\treturn typeof obj[Symbol.iterator] === \"function\";\r\n}\r\n\r\n/**\r\n * Generates a random password-like string.\r\n *\r\n * @param {Number} length\r\n * @param {String} availableSets\r\n *\r\n * @returns {String}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function randomPassword(length = 9, availableSets = \"luds\")\r\n{\r\n\tconst sets = [];\r\n\r\n\tif (availableSets.indexOf(\"l\") > -1)\r\n\t\tsets.push(\"abcdefghjkmnpqrstuvwxyz\");\r\n\r\n\tif (availableSets.indexOf(\"u\") > -1)\r\n\t\tsets.push(\"ABCDEFGHJKMNPQRSTUVWXYZ\");\r\n\r\n\tif (availableSets.indexOf(\"d\") > -1)\r\n\t\tsets.push(\"123456789\");\r\n\r\n\tif (availableSets.indexOf(\"s\") > -1)\r\n\t\tsets.push(\"!@#$%&*?\");\r\n\r\n\tlet all = \"\";\r\n\tlet password = \"\";\r\n\r\n\tsets.forEach(set =>\r\n\t{\r\n\t\tpassword += set[Math.floor(Math.random() * set.length)];\r\n\t\tall += set;\r\n\t});\r\n\r\n\tfor (let i = 0; i < length - sets.length; i++)\r\n\t\tpassword += all[Math.floor(Math.random() * all.length)];\r\n\r\n\treturn shuffleString(password);\r\n}\r\n\r\n/**\r\n * Registers a Latte module.\r\n *\r\n * @param {Function} func\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function register(func)\r\n{\r\n\tfunc(window.Latte);\r\n}\r\n\r\n/**\r\n * Sets a timeout.\r\n *\r\n * @param {Number} timeout\r\n * @param {Function} func\r\n *\r\n * @returns {Number}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function timeout(timeout, func)\r\n{\r\n\treturn setTimeout(func, timeout);\r\n}\r\n\r\n/**\r\n * Updates the URL hash.\r\n *\r\n * @param {Object} data\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function updateURLHash(data)\r\n{\r\n\tlet parts = [];\r\n\r\n\tfor (let key in data)\r\n\t{\r\n\t\tif (!data.hasOwnProperty(key))\r\n\t\t\tcontinue;\r\n\r\n\t\tlet str = key;\r\n\t\tlet d = data[key];\r\n\r\n\t\tif (d.value)\r\n\t\t\tstr += `=${d.value}`;\r\n\r\n\t\tfor (let vk in d.vars)\r\n\t\t\tif (d.vars.hasOwnProperty(vk))\r\n\t\t\t\tstr += `/${vk}:${d.vars[vk]}`;\r\n\r\n\t\tparts.push(str);\r\n\t}\r\n\r\n\tconst hash = parts.join(\"&\");\r\n\r\n\tif (hash.length > 0)\r\n\t\tlocation.hash = hash;\r\n\telse\r\n\t\thistory.replaceState({}, document.title, location.pathname + location.search);\r\n}\r\n\r\nfunction shuffleString(str)\r\n{\r\n\tconst a = str.split(\"\");\r\n\tconst n = a.length;\r\n\r\n\tfor (let i = n - 1; i > 0; i--)\r\n\t{\r\n\t\tlet j = Math.floor(Math.random() * (i + 1));\r\n\t\tlet tmp = a[i];\r\n\r\n\t\ta[i] = a[j];\r\n\t\ta[j] = tmp;\r\n\t}\r\n\r\n\treturn a.join(\"\");\r\n}\r\n\r\nexport default {\r\n\r\n\tdeepMerge,\r\n\r\n\tgetMainElement,\r\n\r\n\thandleError,\r\n\r\n\tinterval,\r\n\r\n\tisObject,\r\n\r\n\tisIterable,\r\n\r\n\trandomPassword,\r\n\r\n\tregister,\r\n\r\n\ttimeout,\r\n\r\n\tupdateURLHash\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { live } from \"./util/dom.js\";\r\nimport { updateURLHash } from \"./core.js\";\r\n\r\nconst actions = {};\r\n\r\n/**\r\n * Dispatches an action.\r\n *\r\n * @param {String} action\r\n * @param {*|undefined} data\r\n * @param {Node|undefined} el\r\n * @param {Event|undefined} evt\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function dispatch(action, data = undefined, el = undefined, evt = undefined)\r\n{\r\n\tif (typeof actions[action] === \"undefined\")\r\n\t\treturn;\r\n\r\n\tactions[action].forEach(callback => callback(data, el, evt));\r\n}\r\n\r\n/**\r\n * Registers an action listener.\r\n *\r\n * @param {String} action\r\n * @param {Function} callback\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function on(action, callback)\r\n{\r\n\tif (typeof actions[action] === \"undefined\")\r\n\t\tactions[action] = [];\r\n\r\n\tactions[action].push(callback);\r\n}\r\n\r\nfunction onAction(element, evt)\r\n{\r\n\tconst action = element.dataset.action;\r\n\tconst actionData = element.dataset;\r\n\r\n\tif (typeof actions[action] === \"undefined\")\r\n\t\treturn;\r\n\r\n\tactions[action].forEach(callback => callback(actionData, element, evt));\r\n}\r\n\r\nexport default {\r\n\r\n\tdispatch,\r\n\r\n\ton\r\n\r\n}\r\n\r\nlive(document.body, \"[data-action]\", \"click\", (element, evt) => onAction(element, evt), {passive: true});\r\n\r\non(\"latte:hash-change\", parameters =>\r\n{\r\n\tconst action = parameters.action;\r\n\r\n\tdelete parameters.action;\r\n\r\n\tupdateURLHash(parameters);\r\n\r\n\tif (action === undefined || action === null)\r\n\t\treturn;\r\n\r\n\tdispatch(action.value, action.vars);\r\n});\r\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<template>\r\n\r\n\t<div class=\"latte-charts latte-charts-line\" :class=\"{'is-loading':is_loading}\">\r\n\t\t<span class=\"spinner spinner-primary\"></span>\r\n\t\t<div class=\"latte-charts-title\" v-if=\"title !== null\">{{ titleTransformed }}</div>\r\n\t\t<div class=\"latte-charts-chart\">\r\n\t\t\t<canvas ref=\"chart\"></canvas>\r\n\t\t</div>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\timport { dispatch } from \"../../js/actions\";\r\n\timport { request } from \"../../js/api\";\r\n\timport { deepMerge } from \"../../js/core\";\r\n\timport { createElement } from \"../../js/util/dom\";\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-chart\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\toptions: {\r\n\t\t\t\tdefault: () => ({}),\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Object\r\n\t\t\t},\r\n\r\n\t\t\ttitle: {\r\n\t\t\t\tdefault: null,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: String | null\r\n\t\t\t},\r\n\r\n\t\t\turl: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\ttype: String\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tinstance: null,\r\n\t\t\t\tis_loading: true,\r\n\t\t\t\tchartData: {},\r\n\t\t\t\tchartOptions: {}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tthis.loadChart();\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\ttitleTransformed()\r\n\t\t\t{\r\n\t\t\t\tif (this.title === null)\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\treturn this.title.replace(new RegExp(\"\\\\${([a-zA-Z0-9_.\\\\[\\\\]]+)}\"), (match, contents) =>\r\n\t\t\t\t{\r\n\t\t\t\t\treturn new Function(`\r\n\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn new Intl.NumberFormat(navigator.language).format(this.${contents});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcatch(err)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t`).call(this);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tloadChart()\r\n\t\t\t{\r\n\t\t\t\tthis.is_loading = true;\r\n\r\n\t\t\t\trequest(this.url)\r\n\t\t\t\t\t.then(r => r.json())\r\n\t\t\t\t\t.then(r => this.onReceivedChart(r));\r\n\t\t\t},\r\n\r\n\t\t\tonReceivedChart(response)\r\n\t\t\t{\r\n\t\t\t\tif (response.success !== true)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst canvas = this.$refs.chart;\r\n\t\t\t\tconst chart = this.chartData = response.data;\r\n\t\t\t\tconst tooltipOptions = {\r\n\t\t\t\t\ttooltips: {\r\n\t\t\t\t\t\tenabled: false,\r\n\t\t\t\t\t\tcustom: model =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (model.opacity === 0)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdispatch(\"latte:tooltip:hide\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfunction genDataRow(line, colors)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\treturn createElement(\"tr\", tr =>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(createElement(\"td\", td =>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttd.appendChild(createElement(\"div\", div =>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdiv.classList.add(\"column-content\", \"pr-0\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tdiv.innerHTML = `<i class=\"mdi mdi-color\" style=\"height: 18px; width: 18px; border-radius: 12px; background: ${colors.backgroundColor};\"></i>`;\r\n\t\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(createElement(\"td\", td =>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttd.appendChild(createElement(\"div\", div =>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdiv.classList.add(\"column-content\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tdiv.innerHTML = line;\r\n\t\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfunction genTitleRow(title)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\treturn createElement(\"tr\", tr => tr.appendChild(createElement(\"th\", th =>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tth.setAttribute(\"colspan\", 2);\r\n\t\t\t\t\t\t\t\t\t\tth.appendChild(createElement(\"div\", div =>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tdiv.classList.add(\"column-content\", \"font-weight-bold\");\r\n\t\t\t\t\t\t\t\t\t\t\tdiv.innerText = title;\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t})));\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tconst rect = canvas.getBoundingClientRect();\r\n\t\t\t\t\t\t\t\tconst table = createElement(\"table\", table =>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttable.classList.add(\"table\", \"table-compact\");\r\n\t\t\t\t\t\t\t\t\ttable.style.setProperty(\"--outline-color-secondary\", \"rgba(255, 255, 255, .05)\");\r\n\r\n\t\t\t\t\t\t\t\t\ttable.appendChild(createElement(\"thead\", thead =>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tmodel.title.forEach(title => thead.appendChild(genTitleRow(title)));\r\n\t\t\t\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t\t\t\ttable.appendChild(createElement(\"tbody\", tbody =>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tmodel.body.map(l => l.lines).forEach((line, i) => tbody.appendChild(genDataRow(line, model.labelColors[i])));\r\n\t\t\t\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tdispatch(\"latte:tooltip\", {\r\n\t\t\t\t\t\t\t\t\tx: Math.floor(rect.left + model.caretX),\r\n\t\t\t\t\t\t\t\t\ty: Math.floor(rect.top + model.caretY),\r\n\t\t\t\t\t\t\t\t\tclasses: [\"p-0\"],\r\n\t\t\t\t\t\t\t\t\tcontent: table,\r\n\t\t\t\t\t\t\t\t\tposition: \"vertical\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcallbacks: {\r\n\t\t\t\t\t\t\tlabel: this.onTooltipLabel.bind(this)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.$emit(\"change\", chart);\r\n\r\n\t\t\t\tif (this.instance === null)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.chartOptions = chart.options = deepMerge({}, tooltipOptions, chart.options, this.options);\r\n\t\t\t\t\tthis.instance = new Chart(canvas, chart);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tchart.data.datasets.forEach((dataset, index) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (typeof this.instance.data.datasets[index] !== \"undefined\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet remove = (this.instance.data.datasets[index].data.length > dataset.data.length ? this.instance.data.datasets[index].data.length - dataset.data.length : 0);\r\n\r\n\t\t\t\t\t\t\tfor (let i = 0; i < remove; i++)\r\n\t\t\t\t\t\t\t\tthis.instance.data.datasets[index].data.pop();\r\n\r\n\t\t\t\t\t\t\tdataset.data.forEach((data, i) => this.instance.data.datasets[index].data[i] = data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.instance.data.datasets.push(dataset);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.instance.data.labels = chart.data.labels;\r\n\t\t\t\t\tthis.instance.update();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.is_loading = false;\r\n\t\t\t},\r\n\r\n\t\t\tonTooltipLabel(tooltip, data)\r\n\t\t\t{\r\n\t\t\t\tif (!this.chartData)\r\n\t\t\t\t\treturn \"\";\r\n\r\n\t\t\t\tconst dataset = data.datasets[tooltip.datasetIndex];\r\n\t\t\t\tconst value = dataset.data[tooltip.index];\r\n\t\t\t\tconst valueFormatted = Intl !== undefined && Intl.NumberFormat !== undefined ? new Intl.NumberFormat(navigator.language)[\"format\"](value) : value;\r\n\r\n\t\t\t\tswitch (this.chartOptions.tooltips.transform || \"default\")\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"percentage\":\r\n\t\t\t\t\t\treturn `${dataset.label}: ${value}%`;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn `${dataset.label}: ${valueFormatted}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\turl()\r\n\t\t\t{\r\n\t\t\t\tthis.loadChart();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n</script>\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n/**\r\n * Implodes commas between strings and replaces the last comma with an &.\r\n *\r\n * @param {String[]} strs\r\n *\r\n * @return {String}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function commaCommaAnd(strs)\r\n{\r\n\treturn strs.join(\", \").replace(/(.*),/, \"$1 &\");\r\n}\r\n\r\n/**\r\n * Returns TRUE if {@see str} is undefined, NULL or contains only whitespace.\r\n *\r\n * @param {String} str\r\n *\r\n * @returns {Boolean}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function isNullOrWhitespace(str)\r\n{\r\n\tif (typeof str === \"undefined\" || str === null)\r\n\t\treturn true;\r\n\r\n\treturn str.replace(/\\s/g, '').length < 1;\r\n}\r\n\r\nexport default {\r\n\r\n\tcommaCommaAnd,\r\n\r\n\tisNullOrWhitespace\r\n\r\n};\r\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<script>\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-draggable\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\toptions: Object,\r\n\r\n\t\t\tlist: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\trequired: false,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\r\n\t\t\tvalue: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\trequired: false,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\r\n\t\t\tnoTransitionOnDrag: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\r\n\t\t\tclone: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: function (original)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn original;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\telement: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'div'\r\n\t\t\t},\r\n\r\n\t\t\tmove: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: null\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tbeforeDestroy()\r\n\t\t{\r\n\t\t\tthis._sortable.destroy();\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tcomponentMode: false,\r\n\t\t\t\ttransitionMode: false\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tthis.componentMode = this.element.toLowerCase() !== this.$el.nodeName.toLowerCase();\r\n\r\n\t\t\tif (this.componentMode && this.transitionMode)\r\n\t\t\t\tthrow new Error('Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: ' + this.element);\r\n\r\n\t\t\tlet optionsAdded = {};\r\n\r\n\t\t\teventsListened.forEach(elt => optionsAdded['on' + elt] = delegateAndEmit.call(this, elt));\r\n\t\t\teventsToEmit.forEach(elt => optionsAdded['on' + elt] = emit.bind(this, elt));\r\n\r\n\t\t\tlet options = _extends({}, this.options, optionsAdded, {onMove: (event, originalEvent) => this.onDragMove(event, originalEvent)});\r\n\r\n\t\t\t!('draggable' in options) && (options.draggable = '>*');\r\n\r\n\t\t\tthis._sortable = new Sortable(this.rootContainer, options);\r\n\t\t\tthis.computeIndexes();\r\n\t\t},\r\n\r\n\t\trender(createElement)\r\n\t\t{\r\n\t\t\tlet slots = this.$slots.default;\r\n\r\n\t\t\tif (slots && slots.length === 1)\r\n\t\t\t{\r\n\t\t\t\tlet child = slots[0];\r\n\r\n\t\t\t\tif (child.componentOptions && child.componentOptions.tag === 'transition-group')\r\n\t\t\t\t\tthis.transitionMode = true;\r\n\t\t\t}\r\n\r\n\t\t\tlet children = slots;\r\n\t\t\tlet footer = this.$slots.footer;\r\n\r\n\t\t\tif (footer)\r\n\t\t\t\tchildren = slots ? [].concat(_toConsumableArray(slots), _toConsumableArray(footer)) : [].concat(_toConsumableArray(footer));\r\n\r\n\t\t\treturn createElement(this.element, null, children);\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\trootContainer()\r\n\t\t\t{\r\n\t\t\t\treturn this.transitionMode ? this.$el.children[0] : this.$el;\r\n\t\t\t},\r\n\r\n\t\t\tisCloning()\r\n\t\t\t{\r\n\t\t\t\treturn this.options && this.options.group && this.options.group.pull === 'clone';\r\n\t\t\t},\r\n\r\n\t\t\trealList()\r\n\t\t\t{\r\n\t\t\t\treturn this.list ? this.list : this.value;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tgetChildrenNodes()\r\n\t\t\t{\r\n\t\t\t\tif (this.componentMode)\r\n\t\t\t\t\treturn this.$children[0].$slots.default;\r\n\r\n\t\t\t\tlet rawNodes = this.$slots.default;\r\n\r\n\t\t\t\treturn this.transitionMode ? rawNodes[0].child.$slots.default : rawNodes;\r\n\t\t\t},\r\n\r\n\t\t\tcomputeIndexes()\r\n\t\t\t{\r\n\t\t\t\tthis.$nextTick(() => this.visibleIndexes = computeIndexes(this.getChildrenNodes(), this.rootContainer.children, this.transitionMode));\r\n\t\t\t},\r\n\r\n\t\t\tgetUnderlyingVm(htmlElement)\r\n\t\t\t{\r\n\t\t\t\tlet index = computeVmIndex(this.getChildrenNodes() || [], htmlElement);\r\n\r\n\t\t\t\tif (index === -1)\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\treturn {index: index, element: this.realList[index]};\r\n\t\t\t},\r\n\r\n\t\t\tgetUnderlyingPotencialDraggableComponent(reference)\r\n\t\t\t{\r\n\t\t\t\tconst vue = reference.__vue__;\r\n\r\n\t\t\t\tif (!vue || !vue.$options || vue.$options._componentTag !== 'transition-group')\r\n\t\t\t\t\treturn vue;\r\n\r\n\t\t\t\treturn vue.$parent;\r\n\t\t\t},\r\n\r\n\t\t\temitChanges(event)\r\n\t\t\t{\r\n\t\t\t\tthis.$nextTick(() => this.$emit('change', event));\r\n\t\t\t},\r\n\r\n\t\t\talterList(onList)\r\n\t\t\t{\r\n\t\t\t\tif (this.list)\r\n\t\t\t\t{\r\n\t\t\t\t\tonList(this.list);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlet newList = [].concat(_toConsumableArray(this.value));\r\n\t\t\t\t\tonList(newList);\r\n\t\t\t\t\tthis.$emit('input', newList);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tspliceList()\r\n\t\t\t{\r\n\t\t\t\tlet _arguments = arguments;\r\n\t\t\t\tthis.alterList(list => list.splice.apply(list, _arguments));\r\n\t\t\t},\r\n\r\n\t\t\tupdatePosition(oldIndex, newIndex)\r\n\t\t\t{\r\n\t\t\t\tthis.alterList(list => list.splice(newIndex, 0, list.splice(oldIndex, 1)[0]));\r\n\t\t\t},\r\n\r\n\t\t\tgetRelatedContextFromMoveElement(reference)\r\n\t\t\t{\r\n\t\t\t\tlet to = reference.to,\r\n\t\t\t\t\trelated = reference.related;\r\n\r\n\t\t\t\tlet component = this.getUnderlyingPotencialDraggableComponent(reference);\r\n\r\n\t\t\t\tif (!component)\r\n\t\t\t\t\treturn {component: component};\r\n\r\n\t\t\t\tlet list = component.realList;\r\n\t\t\t\tlet context = {list: list, component: component};\r\n\r\n\t\t\t\tif (to !== related && list && component.getUnderlyingVm)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet destination = component.getUnderlyingVm(related);\r\n\r\n\t\t\t\t\tif (destination)\r\n\t\t\t\t\t\treturn _extends(destination, context);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn context;\r\n\t\t\t},\r\n\r\n\t\t\tgetVmIndex(domIndex)\r\n\t\t\t{\r\n\t\t\t\tlet indexes = this.visibleIndexes;\r\n\t\t\t\tlet numberIndexes = indexes.length;\r\n\r\n\t\t\t\treturn domIndex > numberIndexes - 1 ? numberIndexes : indexes[domIndex];\r\n\t\t\t},\r\n\r\n\t\t\tgetComponent()\r\n\t\t\t{\r\n\t\t\t\treturn this.$slots.default[0].componentInstance;\r\n\t\t\t},\r\n\r\n\t\t\tresetTransitionData(index)\r\n\t\t\t{\r\n\t\t\t\tif (!this.noTransitionOnDrag || !this.transitionMode)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tlet nodes = this.getChildrenNodes();\r\n\t\t\t\tnodes[index].data = null;\r\n\r\n\t\t\t\tlet transitionContainer = this.getComponent();\r\n\t\t\t\ttransitionContainer.children = [];\r\n\t\t\t\ttransitionContainer.kept = undefined;\r\n\t\t\t},\r\n\r\n\t\t\tonDragStart(event)\r\n\t\t\t{\r\n\t\t\t\tthis.context = this.getUnderlyingVm(event.item);\r\n\t\t\t\tevent.item._underlying_vm_ = this.clone(this.context.element);\r\n\t\t\t\tdraggingElement = event.item;\r\n\r\n\t\t\t\tthis.$el.classList.add('is-dragging');\r\n\t\t\t},\r\n\r\n\t\t\tonDragAdd(event)\r\n\t\t\t{\r\n\t\t\t\tlet element = event.item._underlying_vm_;\r\n\r\n\t\t\t\tif (element === undefined)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tremoveNode(event.item);\r\n\r\n\t\t\t\tlet newIndex = this.getVmIndex(event.newIndex);\r\n\t\t\t\tthis.spliceList(newIndex, 0, element);\r\n\t\t\t\tthis.computeIndexes();\r\n\t\t\t\tthis.emitChanges({added: {element: element, newIndex: newIndex}});\r\n\t\t\t},\r\n\r\n\t\t\tonDragRemove(event)\r\n\t\t\t{\r\n\t\t\t\tinsertNodeAt(this.rootContainer, event.item, event.oldIndex);\r\n\r\n\t\t\t\tif (this.isCloning)\r\n\t\t\t\t{\r\n\t\t\t\t\tremoveNode(event.clone);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet oldIndex = this.context.index;\r\n\t\t\t\tthis.spliceList(oldIndex, 1);\r\n\t\t\t\tthis.resetTransitionData(oldIndex);\r\n\t\t\t\tthis.emitChanges({removed: {element: this.context.element, oldIndex: oldIndex}});\r\n\t\t\t},\r\n\r\n\t\t\tonDragUpdate(event)\r\n\t\t\t{\r\n\t\t\t\tremoveNode(event.item);\r\n\t\t\t\tinsertNodeAt(event.from, event.item, event.oldIndex);\r\n\r\n\t\t\t\tlet oldIndex = this.context.index;\r\n\t\t\t\tlet newIndex = this.getVmIndex(event.newIndex);\r\n\r\n\t\t\t\tthis.updatePosition(oldIndex, newIndex);\r\n\t\t\t\tthis.emitChanges({moved: {element: this.context.element, oldIndex: oldIndex, newIndex: newIndex}});\r\n\t\t\t},\r\n\r\n\t\t\tcomputeFutureIndex(relatedContext, event)\r\n\t\t\t{\r\n\t\t\t\tif (!relatedContext.element)\r\n\t\t\t\t\treturn 0;\r\n\r\n\t\t\t\tlet domChildren = [].concat(_toConsumableArray(event.to.children)).filter(el => el.style.display !== 'none');\r\n\t\t\t\tlet currentDomIndex = domChildren.indexOf(event.related);\r\n\t\t\t\tlet currentIndex = relatedContext.component.getVmIndex(currentDomIndex);\r\n\t\t\t\tlet draggedInList = domChildren.indexOf(draggingElement) !== -1;\r\n\r\n\t\t\t\treturn draggedInList || !event.willInsertAfter ? currentIndex : currentIndex + 1;\r\n\t\t\t},\r\n\r\n\t\t\tonDragMove(event, originalEvent)\r\n\t\t\t{\r\n\t\t\t\tlet onMove = this.move;\r\n\r\n\t\t\t\tif (!onMove || !this.realList)\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\tlet relatedContext = this.getRelatedContextFromMoveElement(event);\r\n\t\t\t\tlet draggedContext = this.context;\r\n\t\t\t\tlet futureIndex = this.computeFutureIndex(relatedContext, event);\r\n\r\n\t\t\t\t_extends(draggedContext, {futureIndex: futureIndex});\r\n\t\t\t\t_extends(event, {relatedContext: relatedContext, draggedContext: draggedContext});\r\n\r\n\t\t\t\treturn onMove(event, originalEvent);\r\n\t\t\t},\r\n\r\n\t\t\tonDragEnd()\r\n\t\t\t{\r\n\t\t\t\tthis.computeIndexes();\r\n\t\t\t\tdraggingElement = null;\r\n\r\n\t\t\t\tthis.$el.classList.remove('is-dragging');\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\toptions: {\r\n\r\n\t\t\t\tdeep: true,\r\n\t\t\t\thandler(newOptionValue)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (let property in newOptionValue)\r\n\t\t\t\t\t\tif (newOptionValue.hasOwnProperty(property))\r\n\t\t\t\t\t\t\tif (readonlyProperties.indexOf(property) === -1)\r\n\t\t\t\t\t\t\t\tthis._sortable.option(property, newOptionValue[property]);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\trealList()\r\n\t\t\t{\r\n\t\t\t\tthis.computeIndexes();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst eventsListened = ['Start', 'Add', 'Remove', 'Update', 'End'];\r\n\tconst eventsToEmit = ['Choose', 'Sort', 'Filter', 'Clone'];\r\n\tconst readonlyProperties = ['Move'].concat(eventsListened, eventsToEmit).map(event => 'on' + event);\r\n\r\n\tlet draggingElement = null;\r\n\r\n\tconst _extends = Object.assign || function (target)\r\n\t{\r\n\t\tfor (let i = 1; i < arguments.length; i++)\r\n\t\t{\r\n\t\t\tlet source = arguments[i];\r\n\r\n\t\t\tfor (let key in source)\r\n\t\t\t\tif (source.hasOwnProperty(key))\r\n\t\t\t\t\ttarget[key] = source[key];\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t};\r\n\r\n\tconst _toConsumableArray = function (arr)\r\n\t{\r\n\t\tif (Array.isArray(arr))\r\n\t\t{\r\n\t\t\tlet arr2 = Array(arr.length);\r\n\r\n\t\t\tfor (let i = 0; i < arr.length; i++)\r\n\t\t\t\tarr2[i] = arr[i];\r\n\r\n\t\t\treturn arr2;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn Array.from(arr);\r\n\t\t}\r\n\t};\r\n\r\n\tArray.from = Array.from || function (object)\r\n\t{\r\n\t\treturn [].slice.call(object);\r\n\t};\r\n\r\n\tfunction removeNode(node)\r\n\t{\r\n\t\tnode.parentElement.removeChild(node);\r\n\t}\r\n\r\n\tfunction insertNodeAt(parentNode, node, position)\r\n\t{\r\n\t\tlet refNode = position === 0 ? parentNode.children[0] : parentNode.children[position - 1].nextSibling;\r\n\t\tparentNode.insertBefore(node, refNode);\r\n\t}\r\n\r\n\tfunction computeVmIndex(vnodes, element)\r\n\t{\r\n\t\treturn vnodes.map(elt => elt.elm).indexOf(element);\r\n\t}\r\n\r\n\tfunction computeIndexes(slots, children, isTransition)\r\n\t{\r\n\t\tif (!slots)\r\n\t\t\treturn [];\r\n\r\n\t\tlet elmFromNodes = slots.map(elt => elt.elm);\r\n\t\tlet rawIndexes = [].concat(_toConsumableArray(children)).map(elt => elmFromNodes.indexOf(elt));\r\n\r\n\t\treturn isTransition ? rawIndexes.filter(ind => ind !== -1) : rawIndexes;\r\n\t}\r\n\r\n\tfunction emit(eventName, eventData)\r\n\t{\r\n\t\tthis.$nextTick(() => this.$emit(eventName.toLowerCase(), eventData));\r\n\t}\r\n\r\n\tfunction delegateAndEmit(eventName)\r\n\t{\r\n\t\tlet that = this;\r\n\r\n\t\treturn eventData =>\r\n\t\t{\r\n\t\t\tif (that.realList !== null)\r\n\t\t\t\tthat['onDrag' + eventName](eventData);\r\n\r\n\t\t\temit.call(that, eventName, eventData);\r\n\t\t};\r\n\t}\r\n\r\n</script>\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nexport const eventBus = new Vue({});\r\n\r\nexport function bottom(layout)\r\n{\r\n\tlet max = 0, bottomY;\r\n\r\n\tfor (let i = 0, len = layout.length; i < len; i++)\r\n\t{\r\n\t\tbottomY = layout[i].y + layout[i].height;\r\n\r\n\t\tif (bottomY > max)\r\n\t\t\tmax = bottomY;\r\n\t}\r\n\r\n\treturn max;\r\n}\r\n\r\nexport function collides(item1, item2)\r\n{\r\n\tif (item1 === item2)\r\n\t\treturn false;\r\n\r\n\tif (item1.x + item1.width <= item2.x)\r\n\t\treturn false;\r\n\r\n\tif (item1.x >= item2.x + item2.width)\r\n\t\treturn false;\r\n\r\n\tif (item1.y + item1.height <= item2.y)\r\n\t\treturn false;\r\n\r\n\tif (item1.y >= item2.y + item2.height)\r\n\t\treturn false;\r\n\r\n\t// Yay!\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function compact(layout, verticalCompact)\r\n{\r\n\tconst compareWith = getStatics(layout);\r\n\tconst sorted = sortLayoutItemsByRowCol(layout);\r\n\tconst out = Array(layout.length);\r\n\r\n\tfor (let i = 0, len = sorted.length; i < len; i++)\r\n\t{\r\n\t\tlet item = sorted[i];\r\n\r\n\t\tif (!item.static)\r\n\t\t{\r\n\t\t\titem = compactItem(compareWith, item, verticalCompact);\r\n\r\n\t\t\tcompareWith.push(item);\r\n\t\t}\r\n\r\n\t\tout[layout.indexOf(item)] = item;\r\n\r\n\t\titem.moved = false;\r\n\t}\r\n\r\n\treturn out;\r\n}\r\n\r\nexport function compactItem(compareWith, item, verticalCompact)\r\n{\r\n\tif (verticalCompact)\r\n\t\twhile (item.y > 0 && !getFirstCollision(compareWith, item))\r\n\t\t\titem.y--;\r\n\r\n\tlet collides;\r\n\r\n\twhile ((collides = getFirstCollision(compareWith, item)))\r\n\t\titem.y = collides.y + collides.height;\r\n\r\n\treturn item;\r\n}\r\n\r\nexport function createCoreData(lastX, lastY, x, y)\r\n{\r\n\tconst isStart = !isNum(lastX);\r\n\r\n\tif (isStart)\r\n\t{\r\n\t\treturn {\r\n\t\t\tdeltaX: 0, deltaY: 0,\r\n\t\t\tlastX: x, lastY: y,\r\n\t\t\tx: x, y: y\r\n\t\t};\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn {\r\n\t\t\tdeltaX: x - lastX, deltaY: y - lastY,\r\n\t\t\tlastX: lastX, lastY: lastY,\r\n\t\t\tx: x, y: y\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function getAllCollisions(layout, layoutItem)\r\n{\r\n\treturn layout.filter((l) => collides(l, layoutItem));\r\n}\r\n\r\nexport function getControlPosition(evt)\r\n{\r\n\treturn offsetXYFromParentOf(evt);\r\n}\r\n\r\nexport function getFirstCollision(layout, layoutItem)\r\n{\r\n\tfor (let i = 0, len = layout.length; i < len; i++)\r\n\t\tif (collides(layout[i], layoutItem))\r\n\t\t\treturn layout[i];\r\n}\r\n\r\nexport function getLayoutItem(layout, id)\r\n{\r\n\tfor (let i = 0, len = layout.length; i < len; i++)\r\n\t\tif (layout[i].i === id)\r\n\t\t\treturn layout[i];\r\n}\r\n\r\nexport function getStatics(layout)\r\n{\r\n\treturn layout.filter((l) => l.static);\r\n}\r\n\r\nexport function isNum(num)\r\n{\r\n\treturn typeof num === \"number\" && !isNaN(num);\r\n}\r\n\r\nexport function moveElement(layout, item, x, y, isUserAction)\r\n{\r\n\tif (item.static)\r\n\t\treturn layout;\r\n\r\n\tif (item.y === y && item.x === x) return layout;\r\n\r\n\tconst movingUp = y && item.y > y;\r\n\r\n\tif (typeof x === \"number\")\r\n\t\titem.x = x;\r\n\r\n\tif (typeof y === \"number\")\r\n\t\titem.y = y;\r\n\r\n\titem.moved = true;\r\n\r\n\tlet sorted = sortLayoutItemsByRowCol(layout);\r\n\r\n\tif (movingUp)\r\n\t\tsorted = sorted.reverse();\r\n\r\n\tconst collisions = getAllCollisions(sorted, item);\r\n\r\n\tfor (let i = 0, len = collisions.length; i < len; i++)\r\n\t{\r\n\t\tconst collision = collisions[i];\r\n\r\n\t\tif (collision.moved)\r\n\t\t\tcontinue;\r\n\r\n\r\n\t\tif (item.y > collision.y && item.y - collision.y > collision.height / 4)\r\n\t\t\tcontinue;\r\n\r\n\t\tif (collision.static)\r\n\t\t\tlayout = moveElementAwayFromCollision(layout, collision, item, isUserAction);\r\n\t\telse\r\n\t\t\tlayout = moveElementAwayFromCollision(layout, item, collision, isUserAction);\r\n\t}\r\n\r\n\treturn layout;\r\n}\r\n\r\nexport function moveElementAwayFromCollision(layout, collidesWith, itemToMove, isUserAction)\r\n{\r\n\tif (isUserAction)\r\n\t{\r\n\t\tconst fakeItem = {\r\n\t\t\tx: itemToMove.x,\r\n\t\t\ty: itemToMove.y,\r\n\t\t\twidth: itemToMove.width,\r\n\t\t\theight: itemToMove.height,\r\n\t\t\tid: \"__fake__\"\r\n\t\t};\r\n\r\n\t\tfakeItem.y = Math.max(collidesWith.y - itemToMove.height, 0);\r\n\r\n\t\tif (!getFirstCollision(layout, fakeItem))\r\n\t\t\treturn moveElement(layout, itemToMove, undefined, fakeItem.y);\r\n\t}\r\n\r\n\treturn moveElement(layout, itemToMove, undefined, itemToMove.y + 1);\r\n}\r\n\r\nexport function offsetXYFromParentOf(evt)\r\n{\r\n\tconst offsetParent = evt.target.offsetParent || document.body;\r\n\tconst offsetParentRect = evt.offsetParent === document.body ? {left: 0, top: 0} : offsetParent.getBoundingClientRect();\r\n\r\n\tconst x = evt.clientX + offsetParent.scrollLeft - offsetParentRect.left;\r\n\tconst y = evt.clientY + offsetParent.scrollTop - offsetParentRect.top;\r\n\r\n\treturn {x, y};\r\n}\r\n\r\nexport function setTransform(top, left, width, height)\r\n{\r\n\tconst translate = `translate3d(${left}px,${top}px, 0)`;\r\n\r\n\treturn {\r\n\t\ttransform: translate,\r\n\t\tWebkitTransform: translate,\r\n\t\tMozTransform: translate,\r\n\t\tmsTransform: translate,\r\n\t\tOTransform: translate,\r\n\t\twidth: width + \"px\",\r\n\t\theight: height + \"px\",\r\n\t\tposition: \"absolute\"\r\n\t};\r\n}\r\n\r\nexport function sortLayoutItemsByRowCol(layout)\r\n{\r\n\treturn [].concat(layout).sort((a, b) => (a.y > b.y || (a.y === b.y && a.x > b.x)) ? 1 : -1);\r\n}\r\n\r\nexport function validateLayout(layout, contextName = \"Layout\")\r\n{\r\n\tconst subProps = [\"x\", \"y\", \"width\", \"height\"];\r\n\r\n\tif (!Array.isArray(layout))\r\n\t\tthrow new Error(`${contextName} must be an array!`);\r\n\r\n\tfor (let i = 0, len = layout.length; i < len; i++)\r\n\t{\r\n\t\tconst item = layout[i];\r\n\r\n\t\tfor (let j = 0; j < subProps.length; j++)\r\n\t\t\tif (typeof item[subProps[j]] !== \"number\")\r\n\t\t\t\tthrow new Error(`Latte Grid: ${contextName}[${i}].${subProps[j]} must be a number!`);\r\n\r\n\t\tif (item.i && typeof item.i !== \"string\")\r\n\t\t\tthrow new Error(`Latte Grid: ${contextName}[${i}].i must be a string!`);\r\n\r\n\t\tif (item.static !== undefined && typeof item.static !== \"boolean\")\r\n\t\t\tthrow new Error(`Latte Grid: ${contextName}[${i}].static must be a boolean!`);\r\n\t}\r\n}\r\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<template>\r\n\r\n\t<div ref=\"grid\" class=\"latte-grid\" :class=\"{'is-dragging': is_dragging}\" :style=\"styles\" role=\"grid\">\r\n\t\t<slot></slot>\r\n\t\t<latte-grid-item class=\"latte-grid-placeholder\" v-show=\"isDragging\" :x=\"placeholder.x\" :y=\"placeholder.y\" :height=\"placeholder.height\" :width=\"placeholder.width\" id=\"__placeholder__\"></latte-grid-item>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\timport { eventBus, bottom, compact, getLayoutItem, moveElement, validateLayout } from \"../../js/ui/grid\";\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-grid\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\tautoSize: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tcolumns: {\r\n\t\t\t\tdefault: 12,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\trowHeight: {\r\n\t\t\t\tdefault: 100,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\tmaxRows: {\r\n\t\t\t\tdefault: Infinity,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\tmargin: {\r\n\t\t\t\tdefault: () => [24, 24],\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Array\r\n\t\t\t},\r\n\r\n\t\t\tisDraggable: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tisResizable: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tverticalCompact: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tlayout: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\ttype: Array\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tbeforeDestroy()\r\n\t\t{\r\n\t\t\teventBus.$off(\"dragEvent\", this.dragEventHandler);\r\n\t\t\teventBus.$off(\"resizeEvent\", this.resizeEventHandler);\r\n\r\n\t\t\twindow.removeEventListener(\"resize\", this.onWindowResize);\r\n\t\t},\r\n\r\n\t\tcreated()\r\n\t\t{\r\n\t\t\tconst $this = this;\r\n\r\n\t\t\tthis.dragEventHandler = function (eventType, id, x, y, height, width)\r\n\t\t\t{\r\n\t\t\t\t$this.dragEvent(eventType, id, x, y, height, width);\r\n\t\t\t};\r\n\r\n\t\t\tthis.resizeEventHandler = function (eventType, id, x, y, height, width)\r\n\t\t\t{\r\n\t\t\t\t$this.resizeEvent(eventType, id, x, y, height, width);\r\n\t\t\t};\r\n\r\n\t\t\teventBus.$on(\"dragEvent\", this.dragEventHandler);\r\n\t\t\teventBus.$on(\"resizeEvent\", this.resizeEventHandler);\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\twidth: null,\r\n\t\t\t\tmergedStyle: {},\r\n\t\t\t\tlastLayoutLength: 0,\r\n\t\t\t\tisDragging: false,\r\n\t\t\t\tplaceholder: {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tconst $this = this;\r\n\r\n\t\t\tthis.$nextTick(() =>\r\n\t\t\t{\r\n\t\t\t\tvalidateLayout(this.layout);\r\n\r\n\t\t\t\tconst init = () =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.width === null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.onWindowResize();\r\n\r\n\t\t\t\t\t\twindow.addEventListener(\"resize\", this.onWindowResize);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcompact(this.layout, this.verticalCompact);\r\n\r\n\t\t\t\t\tthis.updateHeight();\r\n\r\n\t\t\t\t\tthis.$nextTick(() =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\telementResizeDetectorMaker({strategy: \"scroll\"}).listenTo(this.$refs.grid, function ()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$this.onWindowResize();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.$nextTick(() => init());\r\n\r\n\t\t\t\twindow.onload = init.bind(this);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\tis_dragging()\r\n\t\t\t{\r\n\t\t\t\treturn this.isDragging;\r\n\t\t\t},\r\n\r\n\t\t\tstyles()\r\n\t\t\t{\r\n\t\t\t\treturn this.mergedStyle\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tcontainerHeight()\r\n\t\t\t{\r\n\t\t\t\tif (!this.autoSize)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\treturn `${bottom(this.layout) * (this.rowHeight + this.margin[1]) + this.margin[1]}px`;\r\n\t\t\t},\r\n\r\n\t\t\tdragEvent(eventType, id, x, y, height, width)\r\n\t\t\t{\r\n\t\t\t\tif (eventType === \"dragmove\" || eventType === \"dragstart\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.placeholder.x = x;\r\n\t\t\t\t\tthis.placeholder.y = y;\r\n\t\t\t\t\tthis.placeholder.height = height;\r\n\t\t\t\t\tthis.placeholder.width = width;\r\n\r\n\t\t\t\t\tthis.$nextTick(() => this.isDragging = true);\r\n\r\n\t\t\t\t\teventBus.$emit(\"updateWidth\", this.width);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.$nextTick(() => this.isDragging = false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet item = getLayoutItem(this.layout, id);\r\n\r\n\t\t\t\tif (item === undefined || item === null)\r\n\t\t\t\t\titem = {x: 0, y: 0};\r\n\r\n\t\t\t\titem.x = x;\r\n\t\t\t\titem.y = y;\r\n\r\n\t\t\t\tthis.layout = moveElement(this.layout, item, x, y, true);\r\n\r\n\t\t\t\tcompact(this.layout, this.verticalCompact);\r\n\t\t\t\teventBus.$emit(\"compact\");\r\n\r\n\t\t\t\tthis.updateHeight();\r\n\r\n\t\t\t\tif (eventType === \"dragend\")\r\n\t\t\t\t\tthis.$emit(\"layout-updated\", this.layout);\r\n\t\t\t},\r\n\r\n\t\t\tlayoutUpdate()\r\n\t\t\t{\r\n\t\t\t\tif (typeof this.layout === \"undefined\")\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.layout.length !== this.lastLayoutLength)\r\n\t\t\t\t\tthis.lastLayoutLength = this.layout.length;\r\n\r\n\t\t\t\tcompact(this.layout, this.verticalCompact);\r\n\t\t\t\teventBus.$emit(\"updateWidth\", this.width);\r\n\t\t\t\tthis.updateHeight();\r\n\t\t\t},\r\n\r\n\t\t\tonWindowResize()\r\n\t\t\t{\r\n\t\t\t\tif (typeof this.$refs.grid === \"undefined\")\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.width = this.$refs.grid.offsetWidth;\r\n\t\t\t},\r\n\r\n\t\t\tresizeEvent(eventType, id, x, y, height, width)\r\n\t\t\t{\r\n\t\t\t\tif (eventType === \"resizestart\" || eventType === \"resizemove\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.placeholder.x = x;\r\n\t\t\t\t\tthis.placeholder.y = y;\r\n\t\t\t\t\tthis.placeholder.height = height;\r\n\t\t\t\t\tthis.placeholder.width = width;\r\n\r\n\t\t\t\t\tthis.$nextTick(() => this.isDragging = true);\r\n\t\t\t\t\teventBus.$emit(\"updateWidth\", this.width);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.$nextTick(() => this.isDragging = false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet item = getLayoutItem(this.layout, id);\r\n\r\n\t\t\t\tif (item === undefined || item === null)\r\n\t\t\t\t\titem = {height: 0, width: 0};\r\n\r\n\t\t\t\titem.height = height;\r\n\t\t\t\titem.width = width;\r\n\r\n\t\t\t\tcompact(this.layout, this.verticalCompact);\r\n\t\t\t\teventBus.$emit(\"compact\");\r\n\r\n\t\t\t\tthis.updateHeight();\r\n\r\n\t\t\t\tif (eventType === \"resizeend\")\r\n\t\t\t\t\tthis.$emit(\"layout-updated\", this.layout);\r\n\t\t\t},\r\n\r\n\t\t\tupdateHeight()\r\n\t\t\t{\r\n\t\t\t\tthis.mergedStyle = {\r\n\t\t\t\t\theight: this.containerHeight()\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\tcolumns()\r\n\t\t\t{\r\n\t\t\t\teventBus.$emit(\"setColumns\", this.columns);\r\n\t\t\t},\r\n\r\n\t\t\tisDraggable()\r\n\t\t\t{\r\n\t\t\t\teventBus.$emit(\"setDraggable\", this.isDraggable);\r\n\t\t\t},\r\n\r\n\t\t\tisResizable()\r\n\t\t\t{\r\n\t\t\t\teventBus.$emit(\"setResizable\", this.isResizable);\r\n\t\t\t},\r\n\r\n\t\t\tlayout()\r\n\t\t\t{\r\n\t\t\t\tthis.layoutUpdate();\r\n\t\t\t},\r\n\r\n\t\t\trowHeight()\r\n\t\t\t{\r\n\t\t\t\teventBus.$emit(\"setRowHeight\", this.rowHeight);\r\n\t\t\t},\r\n\r\n\t\t\twidth()\r\n\t\t\t{\r\n\t\t\t\tthis.$nextTick(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\teventBus.$emit(\"updateWidth\", this.width);\r\n\t\t\t\t\tthis.updateHeight();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n</script>\r\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<template>\r\n\r\n\t<div class=\"offscreen-overlay\" :class=\"overlayClasses\" :style=\"overlayStyles\">\r\n\t\t<div class=\"offscreen-content\" :class=\"contentClasses\" :style=\"contentStyles\">\r\n\t\t\t<slot></slot>\r\n\t\t</div>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\timport { getMainElement } from \"../../js/core\";\r\n\timport { closest, isTouchOnlyDevice } from \"../../js/util/dom\";\r\n\r\n\tconst TRIGGER_SIZE = 30;\r\n\r\n\tfunction getPosition(evt)\r\n\t{\r\n\t\tif (evt.changedTouches === undefined)\r\n\t\t\treturn {x: evt.clientX, y: evt.clientY};\r\n\r\n\t\treturn {\r\n\t\t\tx: evt.changedTouches[0].clientX,\r\n\t\t\ty: evt.changedTouches[0].clientY\r\n\t\t};\r\n\t}\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-offscreen-container\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\tposition: {\r\n\t\t\t\tdefault: \"left\",\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: String,\r\n\t\t\t\tvalidator: val => [\"top\", \"left\", \"right\", \"bottom\"].includes(val)\r\n\t\t\t},\r\n\r\n\t\t\ttouchEnabled: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tisDragging: false,\r\n\t\t\t\tcurrent: 0.0,\r\n\t\t\t\tprevious: 0.0,\r\n\t\t\t\tcontent: null,\r\n\t\t\t\toverlay: null,\r\n\t\t\t\tcurrentPosition: {x: 0, y: 0},\r\n\t\t\t\tpreviousPosition: {x: 0, y: 0},\r\n\t\t\t\tstartPosition: {x: 0, y: 0},\r\n\t\t\t\ttimer: null\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tthis.overlay = this.$el;\r\n\t\t\tthis.content = this.$el.querySelector(\"div.offscreen-content\");\r\n\r\n\t\t\twindow.addEventListener(\"resize\", () => this.close());\r\n\r\n\t\t\tif (isTouchOnlyDevice())\r\n\t\t\t{\r\n\t\t\t\twindow.addEventListener(\"touchcancel\", evt => this.onPointerCancel(evt), {passive: false});\r\n\t\t\t\twindow.addEventListener(\"touchstart\", evt => this.onPointerDown(evt), {passive: false});\r\n\t\t\t\twindow.addEventListener(\"touchmove\", evt => this.onPointerMove(evt), {passive: false});\r\n\t\t\t\twindow.addEventListener(\"touchend\", evt => this.onPointerUp(evt), {passive: false});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\twindow.addEventListener(\"mousewheel\", evt => this.onMouseWheel(evt), {passive: false});\r\n\t\t\t\twindow.addEventListener(\"mousedown\", evt => this.onPointerDown(evt), {passive: false});\r\n\t\t\t\twindow.addEventListener(\"mouseup\", evt => this.onPointerUp(evt), {passive: false});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\tisOpen()\r\n\t\t\t{\r\n\t\t\t\treturn this.current > 0.0;\r\n\t\t\t},\r\n\r\n\t\t\tcontentClasses()\r\n\t\t\t{\r\n\t\t\t\tconst classes = [];\r\n\r\n\t\t\t\tclasses.push(`offscreen-${this.position}`);\r\n\r\n\t\t\t\tif (this.isDragging)\r\n\t\t\t\t\tclasses.push(\"is-dragging\");\r\n\r\n\t\t\t\tif (this.isOpen)\r\n\t\t\t\t\tclasses.push(\"is-open\");\r\n\r\n\t\t\t\treturn classes;\r\n\t\t\t},\r\n\r\n\t\t\toverlayClasses()\r\n\t\t\t{\r\n\t\t\t\tconst classes = [];\r\n\r\n\t\t\t\tif (this.isDragging)\r\n\t\t\t\t\tclasses.push(\"is-dragging\");\r\n\r\n\t\t\t\tif (this.isOpen)\r\n\t\t\t\t\tclasses.push(\"is-open\");\r\n\r\n\t\t\t\treturn classes;\r\n\t\t\t},\r\n\r\n\t\t\tcontentStyles()\r\n\t\t\t{\r\n\t\t\t\tlet touchAction;\r\n\t\t\t\tlet transform;\r\n\r\n\t\t\t\tswitch (this.position)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\ttouchAction = \"pan-x\";\r\n\t\t\t\t\t\ttransform = `translate3d(0, ${(this.current - 1) * 100}%, 0)`;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\ttouchAction = \"pan-y\";\r\n\t\t\t\t\t\ttransform = `translate3d(${(this.current - 1) * 100}%, 0, 0)`;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\ttouchAction = \"pan-y\";\r\n\t\t\t\t\t\ttransform = `translate3d(${(this.current - 1) * -100}%, 0, 0)`;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\ttouchAction = \"pan-x\";\r\n\t\t\t\t\t\ttransform = `translate3d(0, ${(this.current - 1) * -100}%, 0)`;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttouchAction,\r\n\t\t\t\t\ttransform\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\toverlayStyles()\r\n\t\t\t{\r\n\t\t\t\treturn {\r\n\t\t\t\t\tbackground: `rgba(0, 0, 0, ${this.current * .85})`\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tclose()\r\n\t\t\t{\r\n\t\t\t\tthis.current = 0.0;\r\n\t\t\t\tthis.previous = 1.0;\r\n\t\t\t},\r\n\r\n\t\t\topen()\r\n\t\t\t{\r\n\t\t\t\tthis.current = 1.0;\r\n\t\t\t\tthis.previous = 0.0;\r\n\t\t\t},\r\n\r\n\t\t\ttoggle()\r\n\t\t\t{\r\n\t\t\t\tif (this.isOpen)\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.open();\r\n\t\t\t},\r\n\r\n\t\t\tcalculateCurrent()\r\n\t\t\t{\r\n\t\t\t\tconst rect = this.content.getBoundingClientRect();\r\n\r\n\t\t\t\tswitch (this.position)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\treturn (this.currentPosition.y - this.startPosition.y) / rect.height;\r\n\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\treturn (this.currentPosition.x - this.startPosition.x) / rect.width;\r\n\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\treturn (this.currentPosition.x - this.startPosition.x) / rect.width * -1;\r\n\r\n\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\treturn (this.currentPosition.y - this.startPosition.y) / rect.height * -1;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tcheckState()\r\n\t\t\t{\r\n\t\t\t\tthis.current = Math.max(0, Math.min(1, this.calculateCurrent() + this.previous));\r\n\r\n\t\t\t\tif (!(this.current > 0 && this.current < 1 && !this.isDragging))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.position === \"top\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.currentPosition.y >= this.previousPosition.y)\r\n\t\t\t\t\t\tthis.current = 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.current = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.position === \"left\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.currentPosition.x >= this.previousPosition.x)\r\n\t\t\t\t\t\tthis.current = 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.current = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.position === \"right\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.currentPosition.x <= this.previousPosition.x)\r\n\t\t\t\t\t\tthis.current = 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.current = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.position === \"bottom\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.currentPosition.y <= this.previousPosition.y)\r\n\t\t\t\t\t\tthis.current = 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.current = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tisContentDragAvailable(position)\r\n\t\t\t{\r\n\t\t\t\tif (this.current < 1)\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\tif (!this.isWithinElement(position, this.content))\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\tif (this.position === \"left\" || this.position === \"right\")\r\n\t\t\t\t\treturn Math.abs(position.x - this.currentPosition.x) > TRIGGER_SIZE;\r\n\r\n\t\t\t\tif (this.position === \"top\" || this.position === \"bottom\")\r\n\t\t\t\t\treturn Math.abs(position.y - this.currentPosition.y) > TRIGGER_SIZE;\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\r\n\t\t\tisWithinElement(position, element)\r\n\t\t\t{\r\n\t\t\t\treturn closest(document.elementFromPoint(position.x, position.y), element) !== null;\r\n\t\t\t},\r\n\r\n\t\t\tisWithinTriggerBounds(position)\r\n\t\t\t{\r\n\t\t\t\tconst rect = this.$el.getBoundingClientRect();\r\n\r\n\t\t\t\tswitch (this.position)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\treturn position.y - rect.top < TRIGGER_SIZE;\r\n\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\treturn position.x - rect.left < TRIGGER_SIZE;\r\n\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\treturn position.x > rect.left + rect.width - TRIGGER_SIZE;\r\n\r\n\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\treturn position.y > rect.top + rect.height - TRIGGER_SIZE;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonMouseWheel(evt)\r\n\t\t\t{\r\n\t\t\t\tif (!this.isOpen)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst {deltaX, deltaY} = evt;\r\n\r\n\t\t\t\tif (Math.abs(deltaX) > 20 && (this.position === \"left\" || this.position === \"right\"))\r\n\t\t\t\t\tthis.close();\r\n\r\n\t\t\t\tif (Math.abs(deltaY) > 20 && (this.position === \"top\" || this.position === \"bottom\"))\r\n\t\t\t\t\tthis.close();\r\n\r\n\t\t\t\tif (!this.isWithinElement(getPosition(evt), this.content))\r\n\t\t\t\t\tevt.preventDefault();\r\n\t\t\t},\r\n\r\n\t\t\tonPointerCancel(evt)\r\n\t\t\t{\r\n\t\t\t\tif (!this.touchEnabled)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.isDragging = false;\r\n\t\t\t\tthis.currentPosition = getPosition(evt);\r\n\r\n\t\t\t\tthis.checkState();\r\n\t\t\t},\r\n\r\n\t\t\tonPointerDown(evt)\r\n\t\t\t{\r\n\t\t\t\tif (!this.touchEnabled)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst position = getPosition(evt);\r\n\r\n\t\t\t\tif (!this.isOpen && !this.isWithinTriggerBounds(position))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.isDragging = true;\r\n\r\n\t\t\t\tthis.previous = this.current;\r\n\t\t\t\tthis.currentPosition = position;\r\n\t\t\t\tthis.previousPosition = position;\r\n\t\t\t\tthis.startPosition = position;\r\n\r\n\t\t\t\tthis.checkState();\r\n\t\t\t},\r\n\r\n\t\t\tonPointerMove(evt)\r\n\t\t\t{\r\n\t\t\t\tif (!this.touchEnabled)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (!this.isDragging)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst position = getPosition(evt);\r\n\r\n\t\t\t\tif (!this.isContentDragAvailable(position))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.previousPosition = this.currentPosition;\r\n\t\t\t\tthis.currentPosition = position;\r\n\r\n\t\t\t\tthis.checkState();\r\n\t\t\t},\r\n\r\n\t\t\tonPointerUp(evt)\r\n\t\t\t{\r\n\t\t\t\tif (!this.touchEnabled)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (!this.isDragging)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst isSameLocation = this.currentPosition.x === this.startPosition.x && this.currentPosition.y === this.startPosition.y;\r\n\r\n\t\t\t\tif (!isSameLocation && evt.cancelable)\r\n\t\t\t\t\tevt.preventDefault();\r\n\r\n\t\t\t\tthis.currentPosition = getPosition(evt);\r\n\t\t\t\tthis.isDragging = false;\r\n\r\n\t\t\t\tif (this.previous === 1 && isSameLocation && !this.isWithinElement(this.currentPosition, this.content))\r\n\t\t\t\t\tthis.current = 0.0;\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.checkState();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\tisOpen()\r\n\t\t\t{\r\n\t\t\t\tif (this.isOpen)\r\n\t\t\t\t\tgetMainElement().classList.add(\"is-popup-opened\");\r\n\t\t\t\telse\r\n\t\t\t\t\tgetMainElement().classList.remove(\"is-popup-opened\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n</script>\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet registry = {};\r\n\r\nexport function close(name)\r\n{\r\n\tlet overlay = find(name);\r\n\toverlay.close();\r\n}\r\n\r\nexport function find(name)\r\n{\r\n\tif (typeof registry[name] === \"undefined\")\r\n\t\tthrow new Error(`Overlay ${name} is not registred!`);\r\n\r\n\treturn registry[name];\r\n}\r\n\r\nexport function open(name)\r\n{\r\n\tlet overlay = find(name);\r\n\toverlay.open();\r\n}\r\n\r\nexport function register(name, overlay)\r\n{\r\n\tregistry[name] = overlay;\r\n}\r\n\r\nexport function remove(name)\r\n{\r\n\tdelete registry[name];\r\n}\r\n\r\nexport default {\r\n\r\n\tclose,\r\n\r\n\tfind,\r\n\r\n\topen,\r\n\r\n\tregister,\r\n\r\n\tremove\r\n\r\n}\r\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<template>\r\n\r\n\t<div class=\"panel pdf-viewer\" role=\"presentation\" style=\"min-height: 84px\" v-latte-context-menu :class=\"{'is-loading': isLoading}\" v-if=\"hasSupport\">\r\n\t\t<div class=\"page\" v-for=\"i in pages\" :id=\"'page-' + i\">\r\n\t\t\t<canvas></canvas>\r\n\t\t</div>\r\n\r\n\t\t<span class=\"spinner\"></span>\r\n\r\n\t\t<nav class=\"nav nav-list latte-context-menu\">\r\n\t\t\t<a class=\"nav-link\" :href=\"source\" target=\"_blank\"><i class=\"mdi mdi-open-in-new\"></i> <span>{{ \"Open in new tab\"|i18n(\"pdf-viewer\") }}</span></a>\r\n\t\t\t<a class=\"nav-link\" @click=\"download\"><i class=\"mdi mdi-download\"></i> <span>{{ \"Download\"|i18n(\"pdf-viewer\") }}</span></a>\r\n\t\t\t<a class=\"nav-link\" @click=\"print\"><i class=\"mdi mdi-printer\"></i> <span>{{ \"Print\"|i18n(\"pdf-viewer\") }}</span></a>\r\n\t\t\t<div class=\"divider divider-horizontal\"></div>\r\n\t\t\t<a class=\"nav-link\" @click=\"load\"><i class=\"mdi mdi-reload\"></i> <span>{{ \"Reload\"|i18n(\"pdf-viewer\") }}</span></a>\r\n\t\t\t<slot name=\"menu\"></slot>\r\n\t\t</nav>\r\n\t</div>\r\n\r\n\t<div class=\"panel\" v-else>\r\n\t\t<div class=\"panel-body text-center\">\r\n\t\t\tPlease include PDF.js in your project.\r\n\t\t</div>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\twindow.pdfjsLib = window.pdfjsLib || undefined;\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-pdf-viewer\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\tsource: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tpages: 0,\r\n\t\t\t\tpdf: null,\r\n\t\t\t\trendered: 0\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tthis.load();\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\thasSupport()\r\n\t\t\t{\r\n\t\t\t\treturn pdfjsLib !== undefined;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tload()\r\n\t\t\t{\r\n\t\t\t\tif (!this.hasSupport)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\tthis.rendered = 0;\r\n\r\n\t\t\t\tpdfjsLib.getDocument(this.source).then(pdf => this.onPDFLoaded(pdf));\r\n\t\t\t},\r\n\r\n\t\t\tdownload()\r\n\t\t\t{\r\n\t\t\t\tdownloadFile(\"NULL.pdf\", this.source)\r\n\t\t\t},\r\n\r\n\t\t\tprint()\r\n\t\t\t{\r\n\t\t\t\tprintDocument(this.source)\r\n\t\t\t},\r\n\r\n\t\t\tonPDFLoaded(pdf)\r\n\t\t\t{\r\n\t\t\t\tthis.pdf = pdf;\r\n\t\t\t\tthis.pages = this.pdf.numPages;\r\n\r\n\t\t\t\tthis.$nextTick(() => this.onPDFLoadedSecondTask());\r\n\t\t\t},\r\n\r\n\t\t\tonPDFLoadedSecondTask()\r\n\t\t\t{\r\n\t\t\t\tfor (let i = 1; i <= this.pages; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet pageElement = this.$el.querySelector(`div.page#page-${i}`);\r\n\r\n\t\t\t\t\tif (typeof pageElement === \"undefined\")\r\n\t\t\t\t\t\tthrow new Error(\"Page Element not found!\");\r\n\r\n\t\t\t\t\tlet pageCanvas = pageElement.querySelector(\"canvas\");\r\n\r\n\t\t\t\t\tthis.pdf.getPage(i).then(this.onPDFPageReady.bind(this, pageElement, pageCanvas));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonPDFPageReady(pageElement, pageCanvas, page)\r\n\t\t\t{\r\n\t\t\t\tthis.renderPage(pageElement, pageCanvas, page)\r\n\t\t\t},\r\n\r\n\t\t\trenderPage(pageElement, pageCanvas, page)\r\n\t\t\t{\r\n\t\t\t\tlet desiredWidth = pageElement.getBoundingClientRect().width;\r\n\t\t\t\tlet viewport = page.getViewport(1);\r\n\t\t\t\tlet scale = desiredWidth / viewport.width;\r\n\t\t\t\tviewport = page.getViewport(scale);\r\n\r\n\t\t\t\tlet context = pageCanvas.getContext(\"2d\");\r\n\t\t\t\tpageElement.style.height = (pageCanvas.height = Math.round(viewport.height)) + 'px';\r\n\t\t\t\tpageElement.style.width = (pageCanvas.width = Math.round(viewport.width)) + 'px';\r\n\r\n\t\t\t\tlet renderContext = {\r\n\t\t\t\t\tcanvasContext: context,\r\n\t\t\t\t\tviewport: viewport\r\n\t\t\t\t};\r\n\r\n\t\t\t\tpage.render(renderContext).then(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.rendered++;\r\n\t\t\t\t\tthis.isLoading = !(this.rendered === this.pages);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\tsource()\r\n\t\t\t{\r\n\t\t\t\tthis.load();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n</script>\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { raf } from \"../../js/util/dom\";\r\n\r\nconst handler = \"latte:clickaway-handler\";\r\n\r\nfunction bind(el, binding)\r\n{\r\n\tunbind(el);\r\n\r\n\tlet callback = binding.value;\r\n\tlet initialMactroTaskEnded = false;\r\n\r\n\tif (typeof callback !== \"function\")\r\n\t\treturn;\r\n\r\n\traf(() => initialMactroTaskEnded = true);\r\n\r\n\tel[handler] = function (evt)\r\n\t{\r\n\t\tif (initialMactroTaskEnded && !el.contains(evt.target))\r\n\t\t\treturn callback(evt);\r\n\t};\r\n\r\n\tdocument.documentElement.addEventListener(\"click\", el[handler], {passive: true});\r\n}\r\n\r\nfunction unbind(el)\r\n{\r\n\tdocument.documentElement.removeEventListener(\"click\", el[handler]);\r\n\r\n\tdelete el[handler];\r\n}\r\n\r\nfunction update(el, binding)\r\n{\r\n\tif (binding.value === binding.oldValue)\r\n\t\treturn;\r\n\r\n\tbind(el, binding);\r\n}\r\n\r\nexport default {\r\n\r\n\tname: \"click-away\",\r\n\r\n\tbind,\r\n\r\n\tunbind,\r\n\r\n\tupdate\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nexport default {\r\n\r\n\tname: \"latte-context-menu\",\r\n\r\n\tbind(element)\r\n\t{\r\n\t\tlet contextMenu = element.contextMenuInstance = element.querySelector(\":scope > nav.latte-context-menu:not(.is-inline)\");\r\n\r\n\t\tif (contextMenu === null)\r\n\t\t\treturn;\r\n\r\n\t\telement.removeChild(contextMenu);\r\n\t\tdocument.body.appendChild(contextMenu);\r\n\r\n\t\tlet contextMenuCloseHandler = event =>\r\n\t\t{\r\n\t\t\tif (event.cancelable)\r\n\t\t\t{\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\tcontextMenu.classList.remove(\"is-open\");\r\n\t\t\tdocument.body.classList.remove(\"is-context-menu-open\");\r\n\r\n\t\t\tdocument.scrollingElement.removeEventListener(\"scroll\", contextMenuCloseHandler);\r\n\t\t\tdocument.body.removeEventListener(\"mousedown\", contextMenuCloseHandler);\r\n\t\t};\r\n\r\n\t\tlet contextMenuItemDownHandler = element.contextMenuItemDownHandler = event =>\r\n\t\t{\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t};\r\n\r\n\t\tlet contextMenuItemUpHandler = element.contextMenuItemUpHandler = event =>\r\n\t\t{\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tcontextMenuCloseHandler(event);\r\n\t\t};\r\n\r\n\t\tlet contextMenuHandler = element.contextMenuHandler = event =>\r\n\t\t{\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tcontextMenu.classList.add(\"is-open\");\r\n\r\n\t\t\tlet offset = 9;\r\n\t\t\tlet rect = contextMenu.getBoundingClientRect();\r\n\r\n\t\t\tlet x = event.pageX - document.scrollingElement.scrollLeft;\r\n\t\t\tlet y = event.pageY - document.scrollingElement.scrollTop;\r\n\r\n\t\t\t// Place context menu on other side.\r\n\t\t\tif ((x + rect.width + offset) > window.innerWidth)\r\n\t\t\t\tx = x - rect.width;\r\n\r\n\t\t\tif ((y + rect.height + offset) > window.innerHeight)\r\n\t\t\t\ty = y - rect.height;\r\n\r\n\t\t\t// Never leave win, but that's it.\r\n\t\t\tif ((x + rect.width + offset) > window.innerWidth)\r\n\t\t\t\tx = window.innerWidth - (rect.width + offset);\r\n\r\n\t\t\tif ((y + rect.height + offset) > window.innerHeight)\r\n\t\t\t\ty = window.innerHeight - (rect.height + offset);\r\n\r\n\t\t\tcontextMenu.style.top = `${y}px`;\r\n\t\t\tcontextMenu.style.left = `${x}px`;\r\n\r\n\t\t\tdocument.body.classList.add(\"is-context-menu-open\");\r\n\r\n\t\t\tdocument.body.addEventListener(\"mousedown\", contextMenuCloseHandler);\r\n\t\t\twindow.addEventListener(\"scroll\", contextMenuCloseHandler, {passive: true});\r\n\t\t\tdocument.dispatchEvent(new CustomEvent(\"latte:context-menu\", {detail: {menu: contextMenu, open: true}}));\r\n\t\t};\r\n\r\n\t\telement.addEventListener(\"contextmenu\", contextMenuHandler);\r\n\t\tcontextMenu.addEventListener(\"mousedown\", contextMenuItemDownHandler);\r\n\t\tcontextMenu.addEventListener(\"mouseup\", contextMenuItemUpHandler);\r\n\t},\r\n\r\n\tunbind(element)\r\n\t{\r\n\t\tif (typeof element.contextMenuInstance === \"undefined\" || element.contextMenuInstance === null)\r\n\t\t\treturn;\r\n\r\n\t\telement.contextMenuInstance.addEventListener(\"mousedown\", event.contextMenuItemDownHandler);\r\n\t\telement.contextMenuInstance.addEventListener(\"mouseup\", event.contextMenuItemUpHandler);\r\n\r\n\t\tdocument.body.removeChild(element.contextMenuInstance);\r\n\t\telement.appendChild(element.contextMenuInstance);\r\n\r\n\t\telement.removeEventListener(\"contextmenu\", element.contextMenuHandler);\r\n\t\tdocument.dispatchEvent(new CustomEvent(\"latte:context-menu\", {detail: {menu: element.contextMenuInstance, open: false}}));\r\n\t}\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nexport default {\r\n\r\n\tmethods: {\r\n\r\n\t\tlatte()\r\n\t\t{\r\n\t\t\treturn Latte;\r\n\t\t},\r\n\r\n\t\tdispatchAction(...args)\r\n\t\t{\r\n\t\t\tLatte.actions.dispatch(...args);\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nexport default {\r\n\r\n\tmethods: {\r\n\r\n\t\tmoment(...args)\r\n\t\t{\r\n\t\t\treturn moment(...args);\r\n\t\t},\r\n\r\n\t\tmomentDuration(...args)\r\n\t\t{\r\n\t\t\treturn moment.duration(...args);\r\n\t\t},\r\n\r\n\t\tmomentUtc(...args)\r\n\t\t{\r\n\t\t\treturn moment.utc(...args);\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\n/**\r\n * Replaces params in a string.\r\n *\r\n * @param {String} string\r\n * @param {Array} params\r\n *\r\n * @returns {*}\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function replace(string, params = [])\r\n{\r\n\tfor (let i = 0; i < params.length; i++)\r\n\t\tstring = string.replace(new RegExp(`@${i}`, 'g'), params[i]);\r\n\r\n\treturn string;\r\n}\r\n\r\n/**\r\n * Translates a string.\r\n *\r\n * @param {String} domain\r\n * @param {String} string\r\n * @param {Array} params\r\n *\r\n * @returns {String}\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function translate(domain, string, params = [])\r\n{\r\n\tconst translations = window.LatteI18n || {};\r\n\r\n\tif (translations === null || typeof translations[domain] === \"undefined\" || typeof translations[domain][string] === \"undefined\")\r\n\t\treturn replace(string, params);\r\n\r\n\treturn replace(translations[domain][string], params);\r\n}\r\n\r\nVue.filter(\"i18n\", (value, domain = \"root\", ...params) => Latte.i18n.translate(domain, value, params));\r\n\r\nexport default {\r\n\r\n\treplace,\r\n\r\n\ttranslate\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\n/**\r\n * Implementation of the <=> operator.\r\n *\r\n * @param {*} a\r\n * @param {*} b\r\n *\r\n * @returns {Number|null}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function spaceship(a, b)\r\n{\r\n\tif ((a === null || b === null) || typeof a !== typeof b)\r\n\t\treturn null;\r\n\r\n\tif (typeof a === \"string\")\r\n\t\treturn a.localeCompare(b);\r\n\r\n\tif (a > b)\r\n\t\treturn 1;\r\n\telse if (a < b)\r\n\t\treturn -1;\r\n\r\n\treturn 0;\r\n}\r\n\r\nexport default {\r\n\r\n\tspaceship\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { createElement, raf } from \"../util/dom\";\r\nimport { timeout } from \"../core\";\r\nimport { spaceship } from \"../operators\";\r\nimport { translate } from \"../i18n\";\r\nimport { needsZIndex } from \"../z\";\r\n\r\nexport const Buttons = {\r\n\tOK: 1,\r\n\tCANCEL: 2,\r\n\tYES: 4,\r\n\tNO: 8,\r\n\tUPDATE: 16,\r\n\tSAVE: 32,\r\n\tREMOVE: 64,\r\n\tCREATE: 128,\r\n\tGO: 256,\r\n\tPROCEED: 512,\r\n\tALLOW: 1024,\r\n\tDENY: 2048\r\n};\r\n\r\nexport const ButtonsDescribed = [\r\n\t{id: Buttons.OK, icon: \"check-circle\", label: \"OK\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.CANCEL, icon: null, label: \"Cancel\", classes: [\"btn-text\", \"btn-dark\"], weight: 0},\r\n\t{id: Buttons.YES, icon: \"check-circle\", label: \"Yes\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.NO, icon: null, label: \"No\", classes: [\"btn-text\", \"btn-dark\"], weight: 0},\r\n\t{id: Buttons.UPDATE, icon: \"check-circle\", label: \"Update\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.SAVE, icon: \"check-circle\", label: \"Save\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.REMOVE, icon: \"alert-circle\", label: \"Remove\", classes: [\"btn-contained\", \"btn-error\"], weight: 1},\r\n\t{id: Buttons.CREATE, icon: \"check-circle\", label: \"Create\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.GO, icon: \"arrow-right-bold-circle\", label: \"Go\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.PROCEED, icon: \"arrow-right-bold-circle\", label: \"Proceed\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.ALLOW, icon: \"check-circle\", label: \"Allow\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.DENY, icon: \"close-circle\", label: \"Deny\", classes: [\"btn-text\", \"btn-dark\"], weight: 0}\r\n];\r\n\r\nexport function createMessage(title, message, buttons, prompt = false)\r\n{\r\n\treturn new Promise(resolve =>\r\n\t{\r\n\t\tconst overlay = createElement(\"div\", el => el.classList.add(\"latte-overlay\", \"is-visible\"));\r\n\t\tconst panel = createElement(\"div\", el => el.classList.add(\"panel\", \"panel-alert\"));\r\n\t\tconst panelTitle = createElement(\"div\", el => el.classList.add(\"panel-header\"));\r\n\t\tconst panelContent = createElement(\"div\", el => el.classList.add(\"panel-body\"));\r\n\t\tconst panelFooter = createElement(\"div\", el => el.classList.add(\"panel-footer\", \"justify-content-end\"));\r\n\r\n\t\tneedsZIndex(z => overlay.style.setProperty(\"z-index\", z));\r\n\r\n\t\toverlay.setAttribute(\"role\", \"dialog\");\r\n\r\n\t\tlet promptInput;\r\n\r\n\t\tbuttons = buttonsToButtons(buttons);\r\n\r\n\t\tpanelTitle.appendChild(createElement(\"span\", span =>\r\n\t\t{\r\n\t\t\tspan.classList.add(\"panel-title\");\r\n\t\t\tspan.innerHTML = title;\r\n\t\t}));\r\n\t\tpanelContent.appendChild(createElement(\"p\", p => p.innerHTML = message));\r\n\r\n\t\tif (prompt)\r\n\t\t{\r\n\t\t\tconst formGroup = createElement(\"div\", el => el.classList.add(\"form-group\", \"mb-0\"));\r\n\r\n\t\t\tpromptInput = createElement(\"input\", el =>\r\n\t\t\t{\r\n\t\t\t\tel.classList.add(\"form-control\");\r\n\t\t\t\tel.setAttribute(\"type\", \"text\");\r\n\t\t\t\tformGroup.appendChild(el);\r\n\t\t\t});\r\n\r\n\t\t\tpanelContent.appendChild(formGroup);\r\n\t\t}\r\n\r\n\t\tfor (const button of buttons)\r\n\t\t{\r\n\t\t\tconst el = createElement(\"button\", el => el.classList.add(\"btn\", \"btn-contained\", ...button.classes));\r\n\r\n\t\t\tif (button.icon !== null)\r\n\t\t\t\tel.appendChild(createElement(\"i\", i => i.classList.add(\"mdi\", `mdi-${button.icon}`)));\r\n\r\n\t\t\tel.appendChild(createElement(\"span\", span => span.innerHTML = button.label));\r\n\r\n\t\t\tel.addEventListener(\"click\", () =>\r\n\t\t\t{\r\n\t\t\t\traf(() => overlay.classList.remove(\"is-open\"));\r\n\t\t\t\traf(() => overlay.classList.remove(\"is-visible\"), 270);\r\n\r\n\t\t\t\tLatte.actions.dispatch(\"latte:overlay\", {overlay, open: false});\r\n\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tbutton: button.id,\r\n\t\t\t\t\tinput: (prompt ? promptInput.value : undefined)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tpanelFooter.appendChild(el);\r\n\t\t}\r\n\r\n\t\tpanel.appendChild(panelTitle);\r\n\t\tpanel.appendChild(panelContent);\r\n\t\tpanel.appendChild(panelFooter);\r\n\r\n\t\toverlay.appendChild(panel);\r\n\r\n\t\tdocument.body.appendChild(overlay);\r\n\r\n\t\tLatte.actions.dispatch(\"latte:overlay\", {overlay, open: true});\r\n\r\n\t\traf(() =>\r\n\t\t{\r\n\t\t\toverlay.classList.add(\"is-visible\");\r\n\r\n\t\t\traf(() => overlay.classList.add(\"is-open\"));\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function alert(title, message)\r\n{\r\n\treturn createMessage(title, message, Buttons.OK);\r\n}\r\n\r\nexport function confirm(title, message)\r\n{\r\n\treturn createMessage(title, message, Buttons.OK | Buttons.CANCEL);\r\n}\r\n\r\nexport function prompt(title, message)\r\n{\r\n\treturn createMessage(title, message, Buttons.OK | Buttons.CANCEL, true);\r\n}\r\n\r\nfunction buttonsToButtons(buttons)\r\n{\r\n\tlet actualButtons = [];\r\n\r\n\tfor (let button of ButtonsDescribed)\r\n\t\tif ((buttons & button.id) === button.id)\r\n\t\t\tactualButtons.push(button);\r\n\r\n\tactualButtons = actualButtons.sort((a, b) => spaceship(a.weight, b.weight));\r\n\tactualButtons.forEach(button => button.label = translate(\"root\", button.label));\r\n\r\n\treturn actualButtons;\r\n}\r\n\r\nexport default {\r\n\r\n\tButtons,\r\n\r\n\tButtonsDescribed,\r\n\r\n\tcreateMessage,\r\n\r\n\talert,\r\n\r\n\tconfirm,\r\n\r\n\tprompt\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function getCookie(name)\r\n{\r\n\tname = `${name}=`;\r\n\r\n\tconst decoded = decodeURIComponent(document.cookie);\r\n\tconst cookies = decoded.split(\";\");\r\n\r\n\tfor (let i = 0; i < cookies.length; i++)\r\n\t{\r\n\t\tlet cookie = cookies[i];\r\n\r\n\t\twhile (cookie.charAt(0) === \" \")\r\n\t\t\tcookie = cookie.substring(1);\r\n\r\n\t\tif (cookie.indexOf(name) === 0)\r\n\t\t\treturn JSON.parse(decodeURIComponent(cookie.substring(name.length)));\r\n\t}\r\n\r\n\treturn undefined;\r\n}\r\n\r\nexport function setCookie(name, value, days = 21)\r\n{\r\n\tconst date = new Date();\r\n\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n\r\n\tdocument.cookie = `${name}=${encodeURIComponent(JSON.stringify(value))};expires=${date.toUTCString()};path=/`;\r\n}\r\n\r\nexport default {\r\n\r\n\tgetCookie,\r\n\r\n\tsetCookie\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { dispatch, on } from \"../actions\";\r\nimport { getCookie, setCookie } from \"../util/cookies\";\r\nimport { interval } from \"../core\";\r\n\r\nexport function createRootComponent()\r\n{\r\n\tdocument.body.dataset.theme = document.body.dataset.theme || getCookie(\"$ui:theme\") || \"light\";\r\n\r\n\treturn new Vue({\r\n\r\n\t\tel: \"main#app\",\r\n\r\n\t\tcreated()\r\n\t\t{\r\n\t\t\ton(\"latte:switch-theme\", data => this.onSwitchTheme(data));\r\n\r\n\t\t\twindow.addEventListener(\"hashchange\", onHashChange, false);\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tany: {}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tinitializeTick();\r\n\t\t\tonHashChange();\r\n\t\t\tremoveQueryString();\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tonSwitchTheme(data)\r\n\t\t\t{\r\n\t\t\t\tif (!(\"themeId\" in data))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst {themeId} = data;\r\n\r\n\t\t\t\tdocument.body.dataset.theme = themeId;\r\n\t\t\t\tsetCookie(\"$ui:theme\", themeId);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\nfunction initializeTick()\r\n{\r\n\tinterval(250, () =>\r\n\t{\r\n\t\tif (document.hidden === true)\r\n\t\t\treturn;\r\n\r\n\t\tdispatch(\"latte:tick\", window.performance.now());\r\n\t});\r\n}\r\n\r\nfunction onHashChange()\r\n{\r\n\tconst hash = location.hash.substr(1);\r\n\r\n\tif (!hash || hash.length === 0)\r\n\t\treturn;\r\n\r\n\tconst raw = hash.split(\"&\");\r\n\tconst parameters = {};\r\n\r\n\tfor (let item of raw)\r\n\t{\r\n\t\tconst kv = item.split(\"=\", 2);\r\n\t\tlet value = kv[1] || null;\r\n\t\tlet vars = {};\r\n\r\n\t\tif (value.indexOf(\"/\") > -1)\r\n\t\t{\r\n\t\t\tconst ad = value.split(\"/\");\r\n\t\t\tvalue = ad.shift();\r\n\r\n\t\t\tfor (let d of ad)\r\n\t\t\t{\r\n\t\t\t\tconst kv = d.split(\":\", 2);\r\n\t\t\t\tvars[kv[0]] = kv[1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tparameters[kv[0]] = {value, vars};\r\n\t}\r\n\r\n\tdispatch(\"latte:hash-change\", parameters);\r\n}\r\n\r\nfunction removeQueryString()\r\n{\r\n\tlet queryString = window.location.search.substr(1);\r\n\r\n\tif (queryString === \"\")\r\n\t\treturn;\r\n\r\n\tif (queryString.substr(0, 6) === \"saved=\")\r\n\t\thistory.replaceState(null, '', window.location.pathname || window.location.path);\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function initializeForms()\r\n{\r\n\tdocument.querySelectorAll(`form[method=\"post\"]`).forEach(form => initializeForm(form));\r\n}\r\n\r\nfunction initializeForm(form)\r\n{\r\n\tform.addEventListener(\"submit\", onFormSubmit.bind(window, form));\r\n\tform.addEventListener(\"keyup\", onFormKeyUp.bind(window, form));\r\n}\r\n\r\nfunction onFormKeyUp(form, evt)\r\n{\r\n\tif (evt.ctrlKey !== true)\r\n\t\treturn;\r\n\r\n\tif ((evt.code || evt.key) !== \"Enter\")\r\n\t\treturn;\r\n\r\n\tonFormSubmit(form);\r\n\tform.submit();\r\n}\r\n\r\nfunction onFormSubmit(form)\r\n{\r\n\tform.querySelectorAll(\".btn[type=submit]\").forEach(btn =>\r\n\t{\r\n\t\tif (btn.classList.contains(\"btn-icon\"))\r\n\t\t\treturn;\r\n\r\n\t\tconst icon = btn.querySelector(\"i.mdi\");\r\n\r\n\t\tif (icon === null)\r\n\t\t\treturn;\r\n\r\n\t\ticon.classList.add(\"spinner\");\r\n\r\n\t\tif (btn.classList.contains(\"btn-light\"))\r\n\t\t\ticon.classList.add(\"spinner-primary\");\r\n\t\telse\r\n\t\t\ticon.classList.add(\"spinner-light\");\r\n\r\n\t\tbtn.classList.add(\"disabled\");\r\n\t});\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { on } from \"../actions.js\";\r\nimport { id } from \"../api.js\"\r\nimport { isIterable } from \"../core.js\";\r\n\r\nexport function initializeNotices()\r\n{\r\n\tlet notices = Array.from(document.querySelectorAll(\"div.notice\"));\r\n\tnotices = notices.filter(notice => notice.querySelector(\"button.notice-dismiss\") !== null);\r\n\tnotices = notices.map(notice => notice.querySelector(\"button.notice-dismiss\"));\r\n\r\n\tnotices.forEach(dismissButton => dismissButton.addEventListener(\"click\", () => dismissButton.parentNode.parentNode.removeChild(dismissButton.parentNode)));\r\n\r\n\ton(\"latte:notice\", data => create(decodeURIComponent(data.message), data.type || \"info\"));\r\n}\r\n\r\nexport function areEntitiesNotices(entities)\r\n{\r\n\tif (!isIterable(entities))\r\n\t\treturn false;\r\n\r\n\tfor (let entity of entities)\r\n\t\tif (!isEntityNotice(entity))\r\n\t\t\treturn false;\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function create(message, type, dismissible = true)\r\n{\r\n\tconst noticeId = id();\r\n\r\n\tconst notice = document.createElement(\"div\");\r\n\tnotice.classList.add(\"notice\", `notice-${type}`);\r\n\tnotice.setAttribute(\"id\", noticeId);\r\n\r\n\tconst p = document.createElement(\"p\");\r\n\tp.innerHTML = message;\r\n\r\n\tnotice.appendChild(p);\r\n\r\n\tif (dismissible)\r\n\t{\r\n\t\tconst dismiss = document.createElement(\"button\");\r\n\t\tdismiss.classList.add(\"btn\", \"btn-text\", \"btn-icon\", \"notice-dismiss\");\r\n\r\n\t\tconst icon = document.createElement(\"i\");\r\n\t\ticon.classList.add(\"mdi\", \"mdi-close\");\r\n\r\n\t\tdismiss.appendChild(icon);\r\n\t\tdismiss.addEventListener(\"click\", () => remove(noticeId), {passive: true});\r\n\r\n\t\tnotice.appendChild(dismiss);\r\n\t}\r\n\r\n\tconst content = document.querySelector(\"main#app > div.content\");\r\n\r\n\tcontent.insertBefore(notice, content.querySelector(\":scope > *:first-child\"));\r\n\r\n\treturn noticeId;\r\n}\r\n\r\nexport function isEntityNotice(entity)\r\n{\r\n\treturn entity[\"@type\"] === \"Latte\\\\Framework\\\\Entity\\\\Notice\";\r\n}\r\n\r\nexport function remove(noticeId)\r\n{\r\n\tconst notice = document.querySelector(`div.notice#${noticeId}`);\r\n\tnotice.parentNode.removeChild(notice);\r\n}\r\n\r\nexport default {\r\n\r\n\tareEntitiesNotices,\r\n\r\n\tcreate,\r\n\r\n\tisEntityNotice,\r\n\r\n\tremove\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function initializePanels()\r\n{\r\n\tdocument.querySelectorAll(\"div.panel > table\").forEach(t => t.parentNode.classList.add(\"panel-table\"));\r\n\tdocument.querySelectorAll(\"div.panel.panel-toggleable\").forEach(panel => initializePanel(panel));\r\n}\r\n\r\nexport function initializePanel(panel)\r\n{\r\n\tconst header = panel.querySelector(\"div.panel-header\");\r\n\r\n\tif (header === null)\r\n\t\treturn;\r\n\r\n\tconst hasRightItems = header.querySelectorAll(\".ml-auto\").length > 0;\r\n\r\n\tconst toggle = document.createElement(\"button\");\r\n\ttoggle.setAttribute(\"type\", \"button\");\r\n\ttoggle.classList.add(\"panel-toggle\", \"btn\", \"btn-text\", \"btn-icon\", \"btn-dark\");\r\n\r\n\tif (!hasRightItems)\r\n\t\ttoggle.classList.add(\"ml-auto\");\r\n\r\n\ttoggle.innerHTML = '<i class=\"mdi mdi-chevron-down\"></i>';\r\n\r\n\theader.appendChild(toggle);\r\n\r\n\tif (panel.classList.contains(\"is-open\"))\r\n\t\topen(panel);\r\n\telse\r\n\t\tclose(panel);\r\n\r\n\ttoggle.addEventListener(\"click\", () =>\r\n\t{\r\n\t\tif (panel.classList.contains(\"is-open\"))\r\n\t\t\tclose(panel);\r\n\t\telse\r\n\t\t\topen(panel);\r\n\t});\r\n}\r\n\r\nexport function close(panel)\r\n{\r\n\tlet p = panel;\r\n\r\n\tif (p.querySelector(\":scope > form\") !== null)\r\n\t\tp = p.querySelector(\":scope > form\");\r\n\r\n\tconst hidableItems = p.querySelectorAll(\":scope > div:not(.panel-header)\");\r\n\tfor (let i = 0; i < hidableItems.length; i++)\r\n\t\thidableItems.item(i).classList.add(\"d-none\");\r\n\r\n\tconst toggle = p.querySelector(\"div.panel-header > button.panel-toggle\");\r\n\ttoggle.querySelector(\"i.mdi\").classList.remove(\"mdi-rotate-180\");\r\n\r\n\tpanel.classList.add(\"is-closed\");\r\n\tpanel.classList.remove(\"is-open\");\r\n}\r\n\r\nexport function open(panel)\r\n{\r\n\tlet p = panel;\r\n\r\n\tif (p.querySelector(\":scope > form\") !== null)\r\n\t\tp = p.querySelector(\":scope > form\");\r\n\r\n\tconst hidableItems = p.querySelectorAll(\":scope > div:not(.panel-header)\");\r\n\tfor (let i = 0; i < hidableItems.length; i++)\r\n\t\thidableItems.item(i).classList.remove(\"d-none\");\r\n\r\n\tconst toggle = p.querySelector(\"div.panel-header > button.panel-toggle\");\r\n\ttoggle.querySelector(\"i.mdi\").classList.add(\"mdi-rotate-180\");\r\n\r\n\tpanel.classList.remove(\"is-closed\");\r\n\tpanel.classList.add(\"is-open\");\r\n}\r\n\r\nexport default {\r\n\r\n\tclose,\r\n\r\n\tinitializePanel,\r\n\r\n\topen\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { createElement, live } from \"../util/dom.js\";\r\nimport { on } from \"../actions.js\";\r\nimport { raf } from \"../util/dom\";\r\n\r\nlet tooltipContained = true;\r\nlet tooltipElement = null;\r\n\r\nexport function initializeTooltips()\r\n{\r\n\ttooltipElement = createElement(\"div\", div =>\r\n\t{\r\n\t\tdiv.setAttribute(\"class\", \"tooltip is-hidden\");\r\n\r\n\t\tdocument.body.appendChild(div);\r\n\t});\r\n\r\n\tlive(document.body, \"[data-tooltip]\", \"pointerover\", (el, evt) => onTooltipElementHover(el, evt));\r\n\tlive(document.body, \"[data-tooltip]\", \"pointerout\", (el, evt) => despawnTooltip(el, evt));\r\n\r\n\ton(\"latte:tooltip\", data => spawnTooltip(data));\r\n\ton(\"latte:tooltip:hide\", () => despawnTooltip());\r\n}\r\n\r\nfunction despawnTooltip()\r\n{\r\n\ttooltipElement.classList.add(\"is-hidden\");\r\n}\r\n\r\nfunction spawnTooltip(data)\r\n{\r\n\tlet {x, y, content, position = \"vertical\"} = data;\r\n\r\n\tif (content === undefined)\r\n\t\treturn;\r\n\r\n\ttooltipElement.innerHTML = \"\";\r\n\r\n\tif (content instanceof HTMLElement)\r\n\t\ttooltipElement.appendChild(content);\r\n\telse\r\n\t\ttooltipElement.innerHTML = content;\r\n\r\n\ttooltipElement.classList.remove(...tooltipElement.classList.values());\r\n\ttooltipElement.classList.add(\"tooltip\", ...(data.classes || []));\r\n\r\n\tif (position === \"top\" || (position === \"vertical\" && y > window.innerHeight / 2))\r\n\t\ttooltipElement.classList.add(\"tooltip-top\");\r\n\r\n\tif (position === \"left\" || (position === \"horizontal\" && x > window.innerWidth / 2))\r\n\t\ttooltipElement.classList.add(\"tooltip-left\");\r\n\r\n\tif (position === \"right\" || (position === \"horizontal\" && x <= window.innerWidth / 2))\r\n\t\ttooltipElement.classList.add(\"tooltip-right\");\r\n\r\n\tif (position === \"bottom\" || (position === \"vertical\" && y <= window.innerHeight / 2))\r\n\t\ttooltipElement.classList.add(\"tooltip-bottom\");\r\n\r\n\ttooltipElement.style.removeProperty(\"--tooltip-arrow-top\");\r\n\ttooltipElement.style.removeProperty(\"--tooltip-arrow-left\");\r\n\r\n\traf(() =>\r\n\t{\r\n\t\tconst tooltipRect = tooltipElement.getBoundingClientRect();\r\n\r\n\t\tlet top = 0;\r\n\t\tlet left = 0;\r\n\t\tlet offset = 9;\r\n\r\n\t\tif (tooltipElement.classList.contains(\"tooltip-top\"))\r\n\t\t{\r\n\t\t\ttop = y - tooltipRect.height - offset;\r\n\t\t\tleft = x - (tooltipRect.width / 2);\r\n\t\t}\r\n\t\telse if (tooltipElement.classList.contains(\"tooltip-left\"))\r\n\t\t{\r\n\t\t\ttop = y - (tooltipRect.height / 2);\r\n\t\t\tleft = x - tooltipRect.width - offset;\r\n\t\t}\r\n\t\telse if (tooltipElement.classList.contains(\"tooltip-right\"))\r\n\t\t{\r\n\t\t\ttop = y - (tooltipRect.height / 2);\r\n\t\t\tleft = x + offset;\r\n\t\t}\r\n\t\telse if (tooltipElement.classList.contains(\"tooltip-bottom\"))\r\n\t\t{\r\n\t\t\ttop = y + offset;\r\n\t\t\tleft = x - (tooltipRect.width / 2);\r\n\t\t}\r\n\r\n\t\tif (data.adjustCoordinates)\r\n\t\t{\r\n\t\t\tlet coords = data.adjustCoordinates(left, top, tooltipRect);\r\n\t\t\ttop = coords.y;\r\n\t\t\tleft = coords.x;\r\n\t\t}\r\n\r\n\t\tif (tooltipContained)\r\n\t\t{\r\n\t\t\tlet adjustment = 0;\r\n\t\t\tlet offset = 12;\r\n\r\n\t\t\tif (tooltipElement.classList.contains(\"tooltip-top\") || tooltipElement.classList.contains(\"tooltip-bottom\"))\r\n\t\t\t{\r\n\t\t\t\tif (offset > left)\r\n\t\t\t\t{\r\n\t\t\t\t\tadjustment = offset - left;\r\n\t\t\t\t\tleft += adjustment;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((left + tooltipRect.width + offset) > window.innerWidth)\r\n\t\t\t\t{\r\n\t\t\t\t\tadjustment = window.innerWidth - (left + tooltipRect.width + offset);\r\n\t\t\t\t\tleft += adjustment;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (adjustment !== 0)\r\n\t\t\t\t\ttooltipElement.style.setProperty(\"--tooltip-arrow-left\", `calc((50% - .45em) - ${Math.floor(adjustment)}px)`);\r\n\t\t\t}\r\n\t\t\telse if (tooltipElement.classList.contains(\"tooltip-left\") || tooltipElement.classList.contains(\"tooltip-right\"))\r\n\t\t\t{\r\n\t\t\t\tif (offset > top)\r\n\t\t\t\t{\r\n\t\t\t\t\tadjustment = offset - top;\r\n\t\t\t\t\ttop += adjustment;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((top + tooltipRect.height + offset) > window.innerHeight)\r\n\t\t\t\t{\r\n\t\t\t\t\tadjustment = window.innerHeight - (top + tooltipRect.height + offset);\r\n\t\t\t\t\ttop += adjustment;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (adjustment !== 0)\r\n\t\t\t\t\ttooltipElement.style.setProperty(\"--tooltip-arrow-top\", `calc((50% - .45em) - ${Math.floor(adjustment)}px)`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttooltipElement.style.setProperty(\"transform\", `translate3d(${Math.round(left)}px, ${Math.round(top)}px, 0)`);\r\n\t});\r\n}\r\n\r\nfunction onTooltipElementHover(el)\r\n{\r\n\tconst str = el.dataset.tooltip;\r\n\tconst classes = el.dataset.tooltipClass || \"tooltip-bottom\";\r\n\r\n\tif (str.trim() === \"\")\r\n\t\treturn;\r\n\r\n\tif (el.classList.contains(\"tooltip-disabled\"))\r\n\t\treturn;\r\n\r\n\tconst pos = el.getBoundingClientRect();\r\n\r\n\tspawnTooltip({\r\n\t\tx: pos.left + (pos.width / 2),\r\n\t\ty: pos.top + (pos.height / 2),\r\n\t\tclasses: classes.split(\" \"),\r\n\t\tcontent: str,\r\n\t\tposition: null,\r\n\r\n\t\tadjustCoordinates(x, y)\r\n\t\t{\r\n\t\t\tif (tooltipElement.classList.contains(\"tooltip-top\"))\r\n\t\t\t\ty -= pos.height / 2;\r\n\t\t\telse if (tooltipElement.classList.contains(\"tooltip-left\"))\r\n\t\t\t\tx -= pos.width / 2;\r\n\t\t\telse if (tooltipElement.classList.contains(\"tooltip-right\"))\r\n\t\t\t\tx += pos.width / 2;\r\n\t\t\telse if (tooltipElement.classList.contains(\"tooltip-bottom\"))\r\n\t\t\t\ty += pos.height / 2;\r\n\r\n\t\t\treturn {x, y};\r\n\t\t}\r\n\t});\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { getLattePath } from \"./util/dom\";\r\n\r\nfunction registerCSSPaintWorklets()\r\n{\r\n\tCSS.paintWorklet.addModule(getLattePath() + \"worklet/paint/btn-contained-background.js\");\r\n}\r\n\r\nfunction registerCSSProperties()\r\n{\r\n\tCSS.registerProperty({\r\n\t\tname: \"--btn-contained-hover-state\",\r\n\t\tsyntax: \"<number>\",\r\n\t\tinherits: false,\r\n\t\tinitialValue: 0\r\n\t})\r\n}\r\n\r\n// From here we need to check if each Houdini API is available.\r\n\r\nif (CSS && CSS.paintWorklet)\r\n\tregisterCSSPaintWorklets();\r\n\r\nif (CSS && CSS.registerProperty)\r\n\tregisterCSSProperties();\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function copy(text)\r\n{\r\n\tnavigator.clipboard.writeText(text)\r\n\t\t.then(() => console.debug(\"[Clipboard] Text copied to clipboard!\"))\r\n\t\t.catch(err => console.error(err));\r\n}\r\n\r\nexport function paste()\r\n{\r\n\treturn navigator.clipboard.readText()\r\n\t\t.catch(err => console.error(err));\r\n}\r\n\r\nexport default {\r\n\r\n\tcopy,\r\n\r\n\tpaste\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function isJson(str)\r\n{\r\n\ttry\r\n\t{\r\n\t\tJSON.parse(str);\r\n\r\n\t\treturn true;\r\n\t}\r\n\tcatch(err)\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport default {\r\n\r\n\tisJson\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport actions from \"./actions\";\r\nimport api from \"./api\";\r\nimport clipboard from \"./util/clipboard\";\r\nimport cookie from \"./util/cookies\";\r\nimport core from \"./core\";\r\nimport dom from \"./util/dom\";\r\nimport i18n from \"./i18n\";\r\nimport json from \"./util/json\";\r\nimport messages from \"./ui/messages\";\r\nimport notices from \"./ui/notices\";\r\nimport operators from \"./operators\";\r\nimport overlays from \"./ui/overlays\";\r\nimport panels from \"./ui/panels\";\r\nimport string from \"./util/string\";\r\n\r\nwindow.Latte = {\r\n\tactions,\r\n\tapi,\r\n\tclipboard,\r\n\tcookie,\r\n\tcore,\r\n\tdom,\r\n\ti18n,\r\n\tjson,\r\n\tmessages,\r\n\tnotices,\r\n\toperators,\r\n\toverlays,\r\n\tpanels,\r\n\tstring,\r\n\tvue: Vue\r\n};\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport \"./z\";\r\nimport \"./hid/OutsideEvent\";\r\nimport \"./hid/PointerEvents\";\r\n\r\nimport * as Components from \"../vue/component\";\r\nimport * as Directives from \"../vue/directive\";\r\nimport * as Mixins from \"../vue/mixin\"\r\nimport * as RTEPlugins from \"../vue/rich-text-editor\";\r\nimport * as Widgets from \"../vue/widget\";\r\n\r\nimport { createRootComponent } from \"./ui/root\";\r\nimport { initializeForms } from \"./ui/forms\";\r\nimport { initializeNotices } from \"./ui/notices\";\r\nimport { initializePanels } from \"./ui/panels\";\r\nimport { initializeTooltips } from \"./ui/tooltip\";\r\n\r\nwindow.LatteMomentLocale = window.LatteMomentLocale || \"en\";\r\n\r\nimport \"./houdini-apis\";\r\nimport \"./sdk\";\r\n\r\nObject.values(Directives).forEach(d => Vue.directive(d.name, d));\r\nObject.values(Mixins).forEach(m => Vue.mixin(m));\r\n\r\nObject.values(Components).forEach(c => Vue.component(c.name, c));\r\nObject.values(RTEPlugins).forEach(p => Vue.component(p.name, p));\r\nObject.values(Widgets).forEach(w => Vue.component(w.name, w));\r\n\r\nmoment.locale(window.LatteMomentLocale);\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () =>\r\n{\r\n\tcreateRootComponent();\r\n\tinitializeForms();\r\n\tinitializeNotices();\r\n\tinitializePanels();\r\n\tinitializeTooltips();\r\n});\r\n"],"names":["currentZ","needsZIndex","fn","lattePath","closest","element","selector","document","parentNode","matches","createElement","undefined","el","getLattePath","lattejs","querySelector","Error","getAttribute","split","isTouchOnlyDevice","window","navigator","msMaxTouchPoints","live","root","event","callback","options","passive","indexOf","forEach","addEventListener","evt","qs","querySelectorAll","index","target","Array","prototype","call","parentElement","raf","delay","setTimeout","requestAnimationFrame","relativeCoordsTo","clientX","clientY","rect","getBoundingClientRect","x","left","y","top","downloadFile","fileName","url","a","download","href","body","appendChild","click","remove","printDocument","wnd","open","print","close","toDOM","str","child","temp","fragment","createDocumentFragment","innerHTML","firstChild","OutsideEvent","source","listeners","type","listener","id","this","length","push","_this","isWithinSource","findIndex","l","removeEventListener","splice","pageX","documentElement","scrollingElement","elementFromPoint","scrollLeft","pageY","scrollTop","array","Uint32Array","crypto","getRandomValues","join","request","fetch","Object","assign","credentials","EventTarget","addOutsideEventListener","outsideEvent","removeOutsideEventListener","PointerEvent","isATouchOnlyDevice","events","pointerdown","pointermove","pointerover","pointerout","pointerup","handlers","tap","$this","isTap","original","overrideType","requestJson","then","r","json","main","deepMerge","sources","shift","isObject","key","hasOwnProperty","getMainElement","handleError","err","Latte","messages","alert","stack","obj","_typeof","isArray","interval","timeout","func","setInterval","isIterable","Symbol","iterator","updateURLHash","data","parts","d","vk","value","vars","hash","location","history","replaceState","title","pathname","search","randomPassword","availableSets","sets","all","password","set","Math","floor","random","i","j","tmp","shuffleString","register","actions","dispatch","action","on","dataset","actionData","parameters","isNullOrWhitespace","replace","commaCommaAnd","strs","eventBus","Vue","collides","item1","item2","width","height","compact","layout","verticalCompact","compareWith","filter","static","sorted","sortLayoutItemsByRowCol","out","len","item","compactItem","moved","getFirstCollision","createCoreData","lastX","lastY","num","isNaN","deltaX","deltaY","getControlPosition","offsetParent","offsetParentRect","layoutItem","getLayoutItem","moveElement","isUserAction","movingUp","reverse","collisions","collision","moveElementAwayFromCollision","collidesWith","itemToMove","fakeItem","max","concat","sort","b","contextName","subProps","bottomY","translate","transform","WebkitTransform","MozTransform","msTransform","OTransform","position","registry","find","name","overlay","handler","bind","binding","unbind","initialMactroTaskEnded","contains","update","oldValue","contextMenu","contextMenuInstance","removeChild","contextMenuCloseHandler","cancelable","preventDefault","stopPropagation","classList","contextMenuItemDownHandler","contextMenuItemUpHandler","contextMenuHandler","add","innerWidth","innerHeight","style","dispatchEvent","CustomEvent","detail","menu","methods","latte","dispatchAction","moment","momentDuration","duration","momentUtc","utc","string","params","RegExp","domain","translations","LatteI18n","i18n","spaceship","localeCompare","Buttons","OK","CANCEL","YES","NO","UPDATE","SAVE","REMOVE","CREATE","GO","PROCEED","ALLOW","DENY","ButtonsDescribed","icon","label","classes","weight","createMessage","message","buttons","prompt","Promise","resolve","promptInput","panel","panelTitle","panelContent","panelFooter","z","setProperty","setAttribute","actualButtons","button","buttonsToButtons","span","p","formGroup","input","confirm","getCookie","cookies","decodeURIComponent","cookie","charAt","substring","JSON","parse","setCookie","days","date","Date","setTime","getTime","encodeURIComponent","stringify","toUTCString","createRootComponent","theme","created","onSwitchTheme","onHashChange","any","mounted","hidden","performance","now","queryString","substr","path","removeQueryString","themeId","raw","kv","ad","initializeForms","form","onFormSubmit","ctrlKey","code","submit","btn","create","dismissible","noticeId","notice","dismiss","content","insertBefore","isEntityNotice","entity","areEntitiesNotices","entities","initializePanel","header","hasRightItems","toggle","hidableItems","tooltipElement","initializeTooltips","div","tooltip","tooltipClass","trim","pos","spawnTooltip","adjustCoordinates","onTooltipElementHover","despawnTooltip","HTMLElement","values","removeProperty","tooltipRect","coords","adjustment","round","CSS","paintWorklet","addModule","registerProperty","syntax","inherits","initialValue","copy","text","clipboard","writeText","console","debug","catch","error","paste","readText","isJson","api","core","dom","notices","operators","overlays","panels","vue","LatteMomentLocale","Directives","directive","Mixins","m","mixin","Components","c","component","RTEPlugins","Widgets","w","locale","from","map","dismissButton","t"],"mappings":"yBASA,IAAIA,EAAW,IAUR,SAASC,EAAYC,GAE3BA,EAAGF,GACHA,41BCXD,IAAIG,EAAY,KAET,SAASC,EAAQC,EAASC,QAEzBD,GAAWA,IAAYE,SAAUF,EAAUA,EAAQG,cACrDH,IAAYC,GAAiC,iBAAbA,GAAyBD,EAAQI,QAAQH,GAC5E,OAAOD,SAEF,KAGD,SAASK,EAAcL,OAASH,8DAAKS,EAErCC,EAAKL,SAASG,cAAcL,eAEvBM,IAAPT,GACHA,EAAGU,GAEGA,EAiBR,SAAgBC,OAEG,OAAdV,EACH,OAAOA,MAEFW,EAAUP,SAASQ,4CAET,OAAZD,EACH,MAAM,IAAIE,MAAM,8DAEVb,EAAYW,EAAQG,aAAa,OAAOC,MAAM,YAAY,IAAM,KAGxE,SAAgBC,UAER,iBAAkBC,QAAUC,UAAUC,iBAG9C,SAAgBC,EAAKC,EAAMlB,EAAUmB,EAAOC,OAAUC,yDAAU,CAACC,SAAS,IAE/C,EAAtBH,EAAMI,QAAQ,KAEFJ,EAAMP,MAAM,KAEpBY,QAAQ,SAAAL,UAASF,EAAKC,EAAMlB,EAAUmB,EAAOC,KAKrDF,EAAKO,iBAAiBN,EAAO,SAAUO,OAEhCC,EAAKT,EAAKU,iBAAiB5B,MAE5B2B,WAGgBE,EAAjBvB,EAAKoB,EAAII,OAENxB,IAA2D,KAAnDuB,EAAQE,MAAMC,UAAUT,QAAQU,KAAKN,EAAIrB,KACvDA,EAAKA,EAAG4B,eAEI,EAATL,GACHT,EAASd,EAAIoB,KAEZL,GAaG,SAASc,EAAIvC,OAAIwC,8DAAQ/B,UAEjBA,IAAV+B,EACH,OAAOC,WAAW,kBAAMC,sBAAsB1C,IAAKwC,GAEpDE,sBAAsB1C,GAGhB,SAAS2C,EAAiBxC,EAAS2B,MAEpCA,EAAIc,SAAYd,EAAIe,aAGnBC,EAAO3C,EAAQ4C,8BAEd,CACNC,EAAGlB,EAAIc,QAAUE,EAAKG,KACtBC,EAAGpB,EAAIe,QAAUC,EAAKK,MAmBxB,MAAe,CAEdjD,QAAAA,EAEAM,cAAAA,EAEA4C,aAjHM,SAAsBC,EAAUC,GAEtC9C,EAAc,IAAK,SAAA+C,GAElBA,EAAEC,SAAWH,EACbE,EAAEE,KAAOH,EAETjD,SAASqD,KAAKC,YAAYJ,GAE1BA,EAAEK,QACFL,EAAEM,YAyGHxC,KAAAA,EAEAyC,cAxDM,SAAuBR,OAEvBS,EAAM7C,OAAO8C,KAAKV,GACxBS,EAAIlC,iBAAiB,OAAQ,WAE5BkC,EAAIE,QACJF,EAAIlC,iBAAiB,QAAS,kBAAMkC,EAAIG,aAoDzC3B,IAAAA,EAEAI,iBAAAA,EAEAwB,MA/BM,SAAeC,OAKjBC,EAHEC,EAAOjE,SAASG,cAAc,OAC9B+D,EAAWlE,SAASmE,6BAI1BF,EAAKG,UAAYL,EAETC,EAAQC,EAAKI,YACpBH,EAASZ,YAAYU,UAEfE,IC7HFI,wBAGOC,8GAENC,UAAY,QACZD,OAASA,kEAGEE,EAAMC,cAAUtD,yDAAU,GAE1CsD,EAASC,GAAKC,KAAKJ,UAAUK,YAExBL,UAAUM,KAAKJ,GAUpB1E,SAASwB,iBAAiBiD,EARf,SAAAhD,GAENsD,EAAKC,eAAevD,IAGxBiD,EAASjD,IAG0BL,+CAGjBqD,EAAMC,OAAUtD,yDAAU,GAEvCQ,EAAQgD,KAAKJ,UAAUS,UAAU,SAAAC,UAAKA,EAAEP,KAAOD,EAASC,MAE/C,IAAX/C,IAGJ5B,SAASmF,oBAAoBV,EAAMG,KAAKJ,UAAU5C,GAAQR,QAErDoD,UAAUY,OAAOxD,EAAO,2CAGfH,WAEIrB,IAAdqB,EAAI4D,MACP,OAAO,MAEFC,EAAkBtF,SAASuF,wBAGQ,OAAlC1F,EAFSG,SAASwF,iBAAiB/D,EAAI4D,MAAQC,EAAgBG,WAAYhE,EAAIiE,MAAQJ,EAAgBK,WAEtFf,KAAKL,sDCvCfI,QAETiB,EAAQ,IAAIC,YAAY,UAE9BhF,OAAOiF,OAAOC,gBAAgBH,GAEvB,SAAWA,EAAMI,KAAK,KAavB,SAASC,EAAQhD,OAAK7B,yDAAU,UAE/B8E,MAAMjD,EAAKkD,OAAOC,OAAO,GAAI,CAACC,YAAa,eAAgBjF,IDuBnEkF,YAAYvE,UAAUwE,wBAA0B,SAAU9B,EAAMC,OAAUtD,yDAAU,QAEzDhB,IAAtBwE,KAAK4B,eACR5B,KAAK4B,aAAe,IAAIlC,EAAaM,YAEjC4B,aAAahF,iBAAiBiD,EAAMC,EAAUtD,IAGpDkF,YAAYvE,UAAU0E,2BAA6B,SAAUhC,EAAMC,OAAUtD,yDAAU,QAE5DhB,IAAtBwE,KAAK4B,eACR5B,KAAK4B,aAAe,IAAIlC,EAAaM,YAEjC4B,aAAarB,oBAAoBV,EAAMC,EAAUtD,IEhEvD,cAG6B,oBAAjBsF,kBAGLC,EAAqB/F,IAErBgG,EAAS,CACdrD,MAAO,CAAC,QAAS,OACjBsD,YAAa,CAAC,YAAa,cAC3BC,YAAa,CAAC,YAAa,aAC3BC,YAAa,CAAC,YAAa,cAC3BC,WAAY,CAAC,WAAY,YACzBC,UAAW,CAAC,UAAW,aAGlBC,EAAW,CAEhBC,aAAIC,EAAO1C,EAAUtD,OAEhBiG,GAAQ,EAEZC,EAAS9F,iBAAiBQ,KAAKoF,EAAO,aAAc,kBAAMC,GAAQ,GAAMjG,GACxEkG,EAAS9F,iBAAiBQ,KAAKoF,EAAO,YAAa,kBAAMC,GAAQ,GAAOjG,GACxEkG,EAAS9F,iBAAiBQ,KAAKoF,EAAO,WAAY,SAAA3F,GAE5C4F,GAGL3C,EAASjD,IACPL,KAKCkG,EAAW,CAChB9F,iBAAkB8E,YAAYvE,UAAUP,iBACxC2D,oBAAqBmB,YAAYvE,UAAUoD,qBAG5CmB,YAAYvE,UAAUP,iBAAmB,SAAUiD,EAAMC,EAAUtD,OAE9DmG,EAAe9C,EAEfA,KAAQmC,IACXW,EAAeZ,EAAqBC,EAAOnC,GAAM,GAAKmC,EAAOnC,GAAM,IAEhE8C,KAAgBL,EACnBA,EAASK,GAAc3C,KAAMF,EAAUtD,GAEvCkG,EAAS9F,iBAAiBQ,KAAK4C,KAAM2C,EAAc7C,EAAUtD,KAnDhE,GD+CA,MAAe,CAEduD,GAAAA,EAEAsB,QAAAA,EAEAuB,YAZM,SAAqBvE,UAEpBgD,EAAQhD,yDAF2B,IAGxCwE,KAAK,SAAAC,UAAKA,EAAEC,WEgBf,8iGAZA,4oKChDIC,OAAOxH,EAYJ,SAASyH,EAAUhG,0CAAWiG,mCAAAA,eAEb,IAAnBA,EAAQjD,OACX,OAAOhD,MAEF0C,EAASuD,EAAQC,YAElBC,EAASnG,KAAYmG,EAASzD,GAClC,OAAOsD,gBAAUhG,UAAWiG,QAExB,IAAMG,KAAO1D,EAEZA,EAAO2D,eAAeD,KAGvBD,EAASzD,EAAO0D,KAEdpG,EAAOoG,IACX9B,OAAOC,OAAOvE,OAAUoG,EAAM1D,EAAO0D,KAEtCJ,EAAUhG,EAAOoG,GAAM1D,EAAO0D,KAI9B9B,OAAOC,OAAOvE,OAAUoG,EAAM1D,EAAO0D,aAIhCJ,gBAAUhG,UAAWiG,IAU7B,SAAgBK,WAERP,IAASA,EAAO5H,SAASQ,cAAc,aAYxC,SAAS4H,EAAYC,OAAK1I,8DAAKS,EAErCkI,MAAMC,SAASC,MAAM,0BAAoBH,EAAII,iBAEzC9I,GACHA,IAYK,SAASqI,EAASU,UAEjBA,GAAsB,WAAfC,EAAOD,KAAqB5G,MAAM8G,QAAQF,GAalD,SAASG,EAASC,EAASC,UAEjCA,IAEOC,YAAYD,EAAMD,GAYnB,SAASG,EAAWP,UAEd,OAARA,GAGmC,mBAAzBA,EAAIQ,OAAOC,UAmEnB,SAASL,EAAQA,EAASC,UAEzB3G,WAAW2G,EAAMD,GAWlB,SAASM,EAAcC,OAEzBC,EAAQ,OAEP,IAAIrB,KAAOoB,KAEVA,EAAKnB,eAAeD,QAGrBlE,EAAMkE,EACNsB,EAAIF,EAAKpB,OAKR,IAAIuB,KAHLD,EAAEE,QACL1F,cAAWwF,EAAEE,QAECF,EAAEG,KACZH,EAAEG,KAAKxB,eAAesB,KACzBzF,cAAWyF,cAAMD,EAAEG,KAAKF,KAE1BF,EAAMxE,KAAKf,OAGN4F,EAAOL,EAAMtD,KAAK,KAEN,EAAd2D,EAAK9E,OACR+E,SAASD,KAAOA,EAEhBE,QAAQC,aAAa,GAAI9J,SAAS+J,MAAOH,SAASI,SAAWJ,SAASK,QAoBxE,MAAe,CAEdpC,UAAAA,EAEAM,eAAAA,EAEAC,YAAAA,EAEAS,SAAAA,EAEAb,SAAAA,EAEAiB,WAAAA,EAEAiB,eAhID,eAA+BrF,yDAAS,EAAGsF,yDAAgB,OAEpDC,EAAO,IAEqB,EAA9BD,EAAc7I,QAAQ,MACzB8I,EAAKtF,KAAK,4BAEuB,EAA9BqF,EAAc7I,QAAQ,MACzB8I,EAAKtF,KAAK,4BAEuB,EAA9BqF,EAAc7I,QAAQ,MACzB8I,EAAKtF,KAAK,cAEuB,EAA9BqF,EAAc7I,QAAQ,MACzB8I,EAAKtF,KAAK,gBAEPuF,EAAM,GACNC,EAAW,GAEfF,EAAK7I,QAAQ,SAAAgJ,GAEZD,GAAYC,EAAIC,KAAKC,MAAMD,KAAKE,SAAWH,EAAI1F,SAC/CwF,GAAOE,QAGH,IAAII,EAAI,EAAGA,EAAI9F,EAASuF,EAAKvF,OAAQ8F,IACzCL,GAAYD,EAAIG,KAAKC,MAAMD,KAAKE,SAAWL,EAAIxF,gBAuEjD,SAAuBd,WAEhBb,EAAIa,EAAIpD,MAAM,IAGXgK,EAFCzH,EAAE2B,OAEK,EAAO,EAAJ8F,EAAOA,IAC3B,KACKC,EAAIJ,KAAKC,MAAMD,KAAKE,UAAYC,EAAI,IACpCE,EAAM3H,EAAEyH,GAEZzH,EAAEyH,GAAKzH,EAAE0H,GACT1H,EAAE0H,GAAKC,SAGD3H,EAAE8C,KAAK,IAnFP8E,CAAcR,IAsGrBS,SA3FM,SAAkBhC,GAExBA,EAAKlI,OAAOyH,QA2FZQ,QAAAA,EAEAM,cAAAA,GCrQK4B,EAAU,GAaT,SAASC,EAASC,OAAQ7B,8DAAOjJ,EAAWC,8DAAKD,EAAWqB,8DAAMrB,OAEzC,IAApB4K,EAAQE,IAGnBF,EAAQE,GAAQ3J,QAAQ,SAAAJ,UAAYA,EAASkI,EAAMhJ,EAAIoB,KAYjD,SAAS0J,EAAGD,EAAQ/J,QAEK,IAApB6J,EAAQE,KAClBF,EAAQE,GAAU,IAEnBF,EAAQE,GAAQpG,KAAK3D,GActB,MAAe,CAEd8J,SAAAA,EAEAE,GAAAA,GAIDnK,EAAKhB,SAASqD,KAAM,gBAAiB,QAAS,SAACvD,EAAS2B,UAnB7BA,EAmBuDA,EAjB3EyJ,GAFWpL,EAmBuDA,GAjBjDsL,QAAQF,OACzBG,EAAavL,EAAQsL,kBAEI,IAApBJ,EAAQE,IAGnBF,EAAQE,GAAQ3J,QAAQ,SAAAJ,UAAYA,EAASkK,EAAYvL,EAAS2B,MARnE,IAAkB3B,EAAS2B,EAEpByJ,EACAG,GAgBiF,CAAChK,SAAS,IAElG8J,EAAG,oBAAqB,SAAAG,OAEjBJ,EAASI,EAAWJ,cAEnBI,EAAWJ,OAElB9B,EAAckC,GAEVJ,MAAAA,GAGJD,EAASC,EAAOzB,MAAOyB,EAAOxB,QCxD/B,wjYCIO,SAAS6B,GAAmBxH,UAE9B,MAAOA,GAGJA,EAAIyH,QAAQ,MAAO,IAAI3G,OAAS,EAGxC,OAAe,CAEd4G,cAxBM,SAAuBC,UAEtBA,EAAK1F,KAAK,MAAMwF,QAAQ,QAAS,SAwBxCD,mBAAAA,+zoBCwYD,wnCAhBA,qgHAhBA,8CAKA,6FAsBA,0FAhCAzJ,gTCtYa6J,GAAW,IAAIC,IAAI,IAiBzB,SAASC,GAASC,EAAOC,UAE3BD,IAAUC,MAGVD,EAAMnJ,EAAImJ,EAAME,OAASD,EAAMpJ,OAG/BmJ,EAAMnJ,GAAKoJ,EAAMpJ,EAAIoJ,EAAMC,WAG3BF,EAAMjJ,EAAIiJ,EAAMG,QAAUF,EAAMlJ,MAGhCiJ,EAAMjJ,GAAKkJ,EAAMlJ,EAAIkJ,EAAME,WAQzB,SAASC,GAAQC,EAAQC,WAEzBC,EAAyBF,EAqFjBG,OAAO,SAACpH,UAAMA,EAAEqH,SApFxBC,EAASC,GAAwBN,GACjCO,EAAM5K,MAAMqK,EAAOtH,QAEhB8F,EAAI,EAAGgC,EAAMH,EAAO3H,OAAQ8F,EAAIgC,EAAKhC,IAC9C,KACKiC,EAAOJ,EAAO7B,GAEbiC,EAAKL,SAETK,EAAOC,GAAYR,EAAaO,EAAMR,GAEtCC,EAAYvH,KAAK8H,KAGlBF,EAAIP,EAAO7K,QAAQsL,IAASA,GAEvBE,OAAQ,SAGPJ,EAGR,SAAgBG,GAAYR,EAAaO,EAAMR,MAE1CA,EACH,KAAgB,EAATQ,EAAK/J,IAAUkK,GAAkBV,EAAaO,IACpDA,EAAK/J,YAEHgJ,EAEIA,EAAWkB,GAAkBV,EAAaO,IACjDA,EAAK/J,EAAIgJ,EAAShJ,EAAIgJ,EAASI,cAEzBW,EAGR,SAAgBI,GAAeC,EAAOC,EAAOvK,EAAGE,OAmD1BsK,UAEC,iBAFDA,EAjDEF,KAmDYG,MAAMD,IA/CjC,CACNE,OAAQ,EAAGC,OAAQ,EACnBL,MAAOtK,EAAGuK,MAAOrK,EACjBF,EAAGA,EAAGE,EAAGA,GAKH,CACNwK,OAAQ1K,EAAIsK,EAAOK,OAAQzK,EAAIqK,EAC/BD,MAAOA,EAAOC,MAAOA,EACrBvK,EAAGA,EAAGE,EAAGA,GAUL,SAAS0K,GAAmB9L,UAgG5B+L,GAF8B/L,EA5FRA,GA8FHI,OAAO2L,cAAgBxN,SAASqD,KACnDoK,EAAmBhM,EAAI+L,eAAiBxN,SAASqD,KAAO,CAACT,KAAM,EAAGE,IAAK,GAAK0K,EAAa9K,wBAEzFC,EAAIlB,EAAIc,QAAUiL,EAAa/H,WAAagI,EAAiB7K,KAC7DC,EAAIpB,EAAIe,QAAUgL,EAAa7H,UAAY8H,EAAiB3K,IAE3D,CAACH,EAAAA,EAAGE,EAAAA,GARL,IAA8BpB,EAE9B+L,EACAC,EAEA9K,EACAE,EA/FA,SAASkK,GAAkBZ,EAAQuB,OAEpC,IAAI/C,EAAI,EAAGgC,EAAMR,EAAOtH,OAAQ8F,EAAIgC,EAAKhC,OACzCkB,GAASM,EAAOxB,GAAI+C,GACvB,OAAOvB,EAAOxB,GAGV,SAASgD,GAAcxB,EAAQxH,OAEhC,IAAIgG,EAAI,EAAGgC,EAAMR,EAAOtH,OAAQ8F,EAAIgC,EAAKhC,OACzCwB,EAAOxB,GAAGA,IAAMhG,EACnB,OAAOwH,EAAOxB,GAaV,SAASiD,GAAYzB,EAAQS,EAAMjK,EAAGE,EAAGgL,MAE3CjB,EAAKL,OACR,OAAOJ,KAEJS,EAAK/J,IAAMA,GAAK+J,EAAKjK,IAAMA,EAAG,OAAOwJ,MAEnC2B,EAAWjL,GAAK+J,EAAK/J,EAAIA,EAEd,iBAANF,IACViK,EAAKjK,EAAIA,GAEO,iBAANE,IACV+J,EAAK/J,EAAIA,GAEV+J,EAAKE,OAAQ,MAETN,EAASC,GAAwBN,GAEjC2B,IACHtB,EAASA,EAAOuB,mBAtDuBL,EAwDlCM,GAxDkCN,EAwDId,EAARJ,EAtDtBF,OAAO,SAACpH,UAAM2G,GAAS3G,EAAGwI,MAwD/B/C,EAAI,EAAGgC,EAAMqB,EAAWnJ,OAAQ8F,EAAIgC,EAAKhC,IAClD,KACOsD,EAAYD,EAAWrD,GAEzBsD,EAAUnB,QAIVF,EAAK/J,EAAIoL,EAAUpL,GAAK+J,EAAK/J,EAAIoL,EAAUpL,EAAIoL,EAAUhC,OAAS,IAIrEE,EADG8B,EAAU1B,OACJ2B,GAA6B/B,EAAQ8B,EAAWrB,EAAMiB,GAEtDK,GAA6B/B,EAAQS,EAAMqB,EAAWJ,YAG1D1B,EAGR,SAAgB+B,GAA6B/B,EAAQgC,EAAcC,EAAYP,MAE1EA,EACJ,KACOQ,EAAW,CAChB1L,EAAGyL,EAAWzL,EACdE,EAAGuL,EAAWvL,EACdmJ,MAAOoC,EAAWpC,MAClBC,OAAQmC,EAAWnC,OACnBtH,GAAI,eAGL0J,EAASxL,EAAI2H,KAAK8D,IAAIH,EAAatL,EAAIuL,EAAWnC,OAAQ,IAErDc,GAAkBZ,EAAQkC,GAC9B,OAAOT,GAAYzB,EAAQiC,OAAYhO,EAAWiO,EAASxL,UAGtD+K,GAAYzB,EAAQiC,OAAYhO,EAAWgO,EAAWvL,EAAI,GA8B3D,SAAS4J,GAAwBN,SAEhC,GAAGoC,OAAOpC,GAAQqC,KAAK,SAACtL,EAAGuL,UAAOvL,EAAEL,EAAI4L,EAAE5L,GAAMK,EAAEL,IAAM4L,EAAE5L,GAAKK,EAAEP,EAAI8L,EAAE9L,EAAM,GAAK,ICvN1F,ukCD0NO,SAAwBwJ,OAAQuC,yDAAc,SAE9CC,EAAW,CAAC,IAAK,IAAK,QAAS,cAEhC7M,MAAM8G,QAAQuD,GAClB,MAAM,IAAI1L,gBAASiO,6BAEf,IAAI/D,EAAI,EAAGgC,EAAMR,EAAOtH,OAAQ8F,EAAIgC,EAAKhC,IAC9C,SACOiC,EAAOT,EAAOxB,GAEXC,EAAI,EAAGA,EAAI+D,EAAS9J,OAAQ+F,OACH,iBAAtBgC,EAAK+B,EAAS/D,IACxB,MAAM,IAAInK,4BAAqBiO,cAAe/D,eAAMgE,EAAS/D,6BAE3DgC,EAAKjC,GAAuB,iBAAXiC,EAAKjC,EACzB,MAAM,IAAIlK,4BAAqBiO,cAAe/D,oCAE3BvK,IAAhBwM,EAAKL,QAA+C,kBAAhBK,EAAKL,OAC5C,MAAM,IAAI9L,4BAAqBiO,cAAe/D,gjBAxP1C,SAAgBwB,WAETyC,EAATN,EAAM,EAED3D,EAAI,EAAGgC,EAAMR,EAAOtH,OAAQ8F,EAAIgC,EAAKhC,IAI/B2D,GAFdM,EAAUzC,EAAOxB,GAAG9H,EAAIsJ,EAAOxB,GAAGsB,UAGjCqC,EAAMM,UAGDN,o+MAoMqBxL,EAAKF,EAAMoJ,EAAOC,EAExC4C,qPAFsB/L,QAAKF,SAAMoJ,UAAOC,WAIvC,CACN6C,UAHKD,wBAA2BjM,gBAAUE,YAI1CiM,gBAAiBF,EACjBG,aAAcH,EACdI,YAAaJ,EACbK,WAAYL,EACZ7C,MAAOA,EAAQ,KACfC,OAAQA,EAAS,KACjBkD,SAAU,ku7BE7MZ,wIAWA,igLC1BIC,GAAW,GAQR,SAASC,GAAKC,WAEU,IAAnBF,GAASE,GACnB,MAAM,IAAI7O,wBAAiB6O,gCAErBF,GAASE,GASV,SAASvE,GAASuE,EAAMC,GAE9BH,GAASE,GAAQC,EAGX,SAAS/L,GAAO8L,UAEfF,GAASE,GAGjB,OAAe,CAEdzL,MAhCM,SAAeyL,GAEPD,GAAKC,GACXzL,SA+BRwL,KAAAA,GAEA1L,KAtBM,SAAc2L,GAEND,GAAKC,GACX3L,QAqBRoH,SAAAA,GAEAvH,OAAAA,+gKCfD3C,wCAEA,gizCC7BM2O,GAAU,0BAEhB,SAASC,GAAKpP,EAAIqP,GAEjBC,GAAOtP,OAEHc,EAAWuO,EAAQjG,MACnBmG,GAAyB,EAEL,mBAAbzO,IAGXe,EAAI,kBAAM0N,GAAyB,IAEnCvP,EAAGmP,IAAW,SAAU/N,MAEnBmO,IAA2BvP,EAAGwP,SAASpO,EAAII,QAC9C,OAAOV,EAASM,IAGlBzB,SAASsF,gBAAgB9D,iBAAiB,QAASnB,EAAGmP,IAAU,CAACnO,SAAS,KAG3E,SAASsO,GAAOtP,GAEfL,SAASsF,gBAAgBH,oBAAoB,QAAS9E,EAAGmP,YAElDnP,EAAGmP,IAWX,OAAe,CAEdF,KAAM,aAENG,KAAAA,GAEAE,OAAAA,GAEAG,OAhBD,SAAgBzP,EAAIqP,GAEfA,EAAQjG,QAAUiG,EAAQK,UAG9BN,GAAKpP,EAAIqP,QCrCK,CAEdJ,KAAM,qBAENG,cAAK3P,OAEAkQ,EAAclQ,EAAQmQ,oBAAsBnQ,EAAQU,cAAc,sDAElD,OAAhBwP,GAGJlQ,EAAQoQ,YAAYF,GACpBhQ,SAASqD,KAAKC,YAAY0M,OAEtBG,EAA0B,SAA1BA,EAA0BjP,GAEzBA,EAAMkP,aAETlP,EAAMmP,iBACNnP,EAAMoP,mBAGPN,EAAYO,UAAU/M,OAAO,WAC7BxD,SAASqD,KAAKkN,UAAU/M,OAAO,wBAE/BxD,SAASuF,iBAAiBJ,oBAAoB,SAAUgL,GACxDnQ,SAASqD,KAAK8B,oBAAoB,YAAagL,IAG5CK,EAA6B1Q,EAAQ0Q,2BAA6B,SAAAtP,GAErEA,EAAMmP,iBACNnP,EAAMoP,mBAGHG,EAA2B3Q,EAAQ2Q,yBAA2B,SAAAvP,GAEjEA,EAAMmP,iBACNnP,EAAMoP,kBAENH,EAAwBjP,IAGrBwP,EAAqB5Q,EAAQ4Q,mBAAqB,SAAAxP,GAErDA,EAAMmP,iBACNnP,EAAMoP,kBAENN,EAAYO,UAAUI,IAAI,eAGtBlO,EAAOuN,EAAYtN,wBAEnBC,EAAIzB,EAAMmE,MAAQrF,SAASuF,iBAAiBE,WAC5C5C,EAAI3B,EAAMwE,MAAQ1F,SAASuF,iBAAiBI,UAG3ChD,EAAIF,EAAKuJ,MAPD,EAOmBnL,OAAO+P,aACtCjO,GAAQF,EAAKuJ,OAETnJ,EAAIJ,EAAKwJ,OAVD,EAUoBpL,OAAOgQ,cACvChO,GAAQJ,EAAKwJ,QAGTtJ,EAAIF,EAAKuJ,MAdD,EAcmBnL,OAAO+P,aACtCjO,EAAI9B,OAAO+P,YAAcnO,EAAKuJ,MAflB,IAiBRnJ,EAAIJ,EAAKwJ,OAjBD,EAiBoBpL,OAAOgQ,cACvChO,EAAIhC,OAAOgQ,aAAepO,EAAKwJ,OAlBnB,IAoBb+D,EAAYc,MAAMhO,cAASD,QAC3BmN,EAAYc,MAAMlO,eAAUD,QAE5B3C,SAASqD,KAAKkN,UAAUI,IAAI,wBAE5B3Q,SAASqD,KAAK7B,iBAAiB,YAAa2O,GAC5CtP,OAAOW,iBAAiB,SAAU2O,EAAyB,CAAC9O,SAAS,IACrErB,SAAS+Q,cAAc,IAAIC,YAAY,qBAAsB,CAACC,OAAQ,CAACC,KAAMlB,EAAarM,MAAM,OAGjG7D,EAAQ0B,iBAAiB,cAAekP,GACxCV,EAAYxO,iBAAiB,YAAagP,GAC1CR,EAAYxO,iBAAiB,UAAWiP,KAGzCd,gBAAO7P,QAEqC,IAAhCA,EAAQmQ,qBAAuE,OAAhCnQ,EAAQmQ,sBAGlEnQ,EAAQmQ,oBAAoBzO,iBAAiB,YAAaN,MAAMsP,4BAChE1Q,EAAQmQ,oBAAoBzO,iBAAiB,UAAWN,MAAMuP,0BAE9DzQ,SAASqD,KAAK6M,YAAYpQ,EAAQmQ,qBAClCnQ,EAAQwD,YAAYxD,EAAQmQ,qBAE5BnQ,EAAQqF,oBAAoB,cAAerF,EAAQ4Q,oBACnD1Q,SAAS+Q,cAAc,IAAIC,YAAY,qBAAsB,CAACC,OAAQ,CAACC,KAAMpR,EAAQmQ,oBAAqBtM,MAAM,4DCjGnG,CAEdwN,QAAS,CAERC,wBAEQ9I,OAGR+I,mCAEC/I,MAAM0C,SAAQC,kCCXF,CAEdkG,QAAS,CAERG,sIAEQA,iCAGRC,yCAEQD,QAAOE,6BAGfC,oCAEQH,QAAOI,6yOCHV,SAASlG,GAAQmG,WAAQC,yDAAS,GAE/BjH,EAAI,EAAGA,EAAIiH,EAAO/M,OAAQ8F,IAClCgH,EAASA,EAAOnG,QAAQ,IAAIqG,kBAAWlH,GAAK,KAAMiH,EAAOjH,WAEnDgH,EAeD,SAAS9C,GAAUiD,EAAQH,OAAQC,yDAAS,GAE5CG,EAAelR,OAAOmR,WAAa,UAEpB,OAAjBD,QAAyD,IAAzBA,EAAaD,SAAmE,IAAjCC,EAAaD,GAAQH,GAChGnG,GAAQmG,EAAQC,GAEjBpG,GAAQuG,EAAaD,GAAQH,GAASC,GAG9ChG,IAAIU,OAAO,OAAQ,SAAC7C,uBAAOqI,yDAAS,0BAAWF,mCAAAA,mBAAWtJ,MAAM2J,KAAKpD,UAAUiD,EAAQrI,EAAOmI,KAE9F,OAAe,CAEdpG,QAAAA,GAEAqD,UAAAA,ICrCM,SAASqD,GAAUhP,EAAGuL,UAEjB,OAANvL,GAAoB,OAANuL,GAAe9F,EAAOzF,OAAauL,GAC9C,KAES,iBAANvL,EACHA,EAAEiP,cAAc1D,GAEhBA,EAAJvL,EACI,EACCA,EAAIuL,GACJ,EAEF,EAGR,OAAe,CAEdyD,UAAAA,ICtBYE,GAAU,CACtBC,GAAI,EACJC,OAAQ,EACRC,IAAK,EACLC,GAAI,EACJC,OAAQ,GACRC,KAAM,GACNC,OAAQ,GACRC,OAAQ,IACRC,GAAI,IACJC,QAAS,IACTC,MAAO,KACPC,KAAM,MAGMC,GAAmB,CAC/B,CAACtO,GAAIyN,GAAQC,GAAIa,KAAM,eAAgBC,MAAO,KAAMC,QAAS,CAAC,gBAAiB,eAAgBC,OAAQ,GACvG,CAAC1O,GAAIyN,GAAQE,OAAQY,KAAM,KAAMC,MAAO,SAAUC,QAAS,CAAC,WAAY,YAAaC,OAAQ,GAC7F,CAAC1O,GAAIyN,GAAQG,IAAKW,KAAM,eAAgBC,MAAO,MAAOC,QAAS,CAAC,gBAAiB,eAAgBC,OAAQ,GACzG,CAAC1O,GAAIyN,GAAQI,GAAIU,KAAM,KAAMC,MAAO,KAAMC,QAAS,CAAC,WAAY,YAAaC,OAAQ,GACrF,CAAC1O,GAAIyN,GAAQK,OAAQS,KAAM,eAAgBC,MAAO,SAAUC,QAAS,CAAC,gBAAiB,eAAgBC,OAAQ,GAC/G,CAAC1O,GAAIyN,GAAQM,KAAMQ,KAAM,eAAgBC,MAAO,OAAQC,QAAS,CAAC,gBAAiB,eAAgBC,OAAQ,GAC3G,CAAC1O,GAAIyN,GAAQO,OAAQO,KAAM,eAAgBC,MAAO,SAAUC,QAAS,CAAC,gBAAiB,aAAcC,OAAQ,GAC7G,CAAC1O,GAAIyN,GAAQQ,OAAQM,KAAM,eAAgBC,MAAO,SAAUC,QAAS,CAAC,gBAAiB,eAAgBC,OAAQ,GAC/G,CAAC1O,GAAIyN,GAAQS,GAAIK,KAAM,0BAA2BC,MAAO,KAAMC,QAAS,CAAC,gBAAiB,eAAgBC,OAAQ,GAClH,CAAC1O,GAAIyN,GAAQU,QAASI,KAAM,0BAA2BC,MAAO,UAAWC,QAAS,CAAC,gBAAiB,eAAgBC,OAAQ,GAC5H,CAAC1O,GAAIyN,GAAQW,MAAOG,KAAM,eAAgBC,MAAO,QAASC,QAAS,CAAC,gBAAiB,eAAgBC,OAAQ,GAC7G,CAAC1O,GAAIyN,GAAQY,KAAME,KAAM,eAAgBC,MAAO,OAAQC,QAAS,CAAC,WAAY,YAAaC,OAAQ,IAGpG,SAAgBC,GAAcvJ,EAAOwJ,EAASC,OAASC,iEAE/C,IAAIC,QAAQ,SAAAC,OAYdC,EAVErE,EAAUpP,EAAc,MAAO,SAAAE,UAAMA,EAAGkQ,UAAUI,IAAI,gBAAiB,gBACvEkD,EAAQ1T,EAAc,MAAO,SAAAE,UAAMA,EAAGkQ,UAAUI,IAAI,QAAS,iBAC7DmD,EAAa3T,EAAc,MAAO,SAAAE,UAAMA,EAAGkQ,UAAUI,IAAI,kBACzDoD,EAAe5T,EAAc,MAAO,SAAAE,UAAMA,EAAGkQ,UAAUI,IAAI,gBAC3DqD,EAAc7T,EAAc,MAAO,SAAAE,UAAMA,EAAGkQ,UAAUI,IAAI,eAAgB,4BAEhFjR,EAAY,SAAAuU,UAAK1E,EAAQuB,MAAMoD,YAAY,UAAWD,KAEtD1E,EAAQ4E,aAAa,OAAQ,UAI7BX,EAkFF,SAA0BA,WAErBY,EAAgB,SAEDnB,mBAAVoB,EAAUpB,OACbO,EAAUa,EAAO1P,MAAQ0P,EAAO1P,IACpCyP,EAActP,KAAKuP,UAErBD,EAAgBA,EAAc5F,KAAK,SAACtL,EAAGuL,UAAMyD,GAAUhP,EAAEmQ,OAAQ5E,EAAE4E,WACrD9R,QAAQ,SAAA8S,UAAUA,EAAOlB,MAAQtE,GAAU,OAAQwF,EAAOlB,SAEjEiB,EA7FIE,CAAiBd,GAE3BM,EAAWxQ,YAAYnD,EAAc,OAAQ,SAAAoU,GAE5CA,EAAKhE,UAAUI,IAAI,eACnB4D,EAAKnQ,UAAY2F,KAElBgK,EAAazQ,YAAYnD,EAAc,IAAK,SAAAqU,UAAKA,EAAEpQ,UAAYmP,KAE3DE,EACJ,KACOgB,EAAYtU,EAAc,MAAO,SAAAE,UAAMA,EAAGkQ,UAAUI,IAAI,aAAc,UAE5EiD,EAAczT,EAAc,QAAS,SAAAE,GAEpCA,EAAGkQ,UAAUI,IAAI,gBACjBtQ,EAAG8T,aAAa,OAAQ,QACxBM,EAAUnR,YAAYjD,KAGvB0T,EAAazQ,YAAYmR,yDAGfJ,UAEJhU,EAAKF,EAAc,SAAU,SAAAE,kBAAMA,EAAGkQ,WAAUI,aAAI,MAAO,0BAAoB0D,EAAOjB,aAExE,OAAhBiB,EAAOnB,MACV7S,EAAGiD,YAAYnD,EAAc,IAAK,SAAAwK,UAAKA,EAAE4F,UAAUI,IAAI,oBAAc0D,EAAOnB,UAE7E7S,EAAGiD,YAAYnD,EAAc,OAAQ,SAAAoU,UAAQA,EAAKnQ,UAAYiQ,EAAOlB,SAErE9S,EAAGmB,iBAAiB,QAAS,WAE5BU,EAAI,kBAAMqN,EAAQgB,UAAU/M,OAAO,aACnCtB,EAAI,kBAAMqN,EAAQgB,UAAU/M,OAAO,eAAe,KAElD8E,MAAM0C,QAAQC,SAAS,gBAAiB,CAACsE,QAAAA,EAAS5L,MAAM,IAExDgQ,EAAQ,CACPU,OAAQA,EAAO1P,GACf+P,MAAQjB,EAASG,EAAYnK,WAAQrJ,MAIvC4T,EAAY1Q,YAAYjD,MAtBJmT,uIAyBrBK,EAAMvQ,YAAYwQ,GAClBD,EAAMvQ,YAAYyQ,GAClBF,EAAMvQ,YAAY0Q,GAElBzE,EAAQjM,YAAYuQ,GAEpB7T,SAASqD,KAAKC,YAAYiM,GAE1BjH,MAAM0C,QAAQC,SAAS,gBAAiB,CAACsE,QAAAA,EAAS5L,MAAM,IAExDzB,EAAI,WAEHqN,EAAQgB,UAAUI,IAAI,cAEtBzO,EAAI,kBAAMqN,EAAQgB,UAAUI,IAAI,iBAU5B,SAASgE,GAAQ5K,EAAOwJ,UAEvBD,GAAcvJ,EAAOwJ,EAASnB,GAAQC,GAAKD,GAAQE,QAsB3D,OAAe,CAEdF,QAAAA,GAEAa,iBAAAA,GAEAK,cAAAA,GAEA9K,MArCM,SAAeuB,EAAOwJ,UAErBD,GAAcvJ,EAAOwJ,EAASnB,GAAQC,KAqC7CsC,QAAAA,GAEAlB,OA/BM,SAAgB1J,EAAOwJ,UAEtBD,GAAcvJ,EAAOwJ,EAASnB,GAAQC,GAAKD,GAAQE,QAAQ,i9GCnI5D,SAASsC,GAAUtF,GAEzBA,YAAUA,eAGJuF,EADUC,mBAAmB9U,SAAS+U,QACpBpU,MAAM,KAErBgK,EAAI,EAAGA,EAAIkK,EAAQhQ,OAAQ8F,IACpC,SACKoK,EAASF,EAAQlK,GAEO,MAArBoK,EAAOC,OAAO,IACpBD,EAASA,EAAOE,UAAU,MAEE,IAAzBF,EAAOzT,QAAQgO,GAClB,OAAO4F,KAAKC,MAAML,mBAAmBC,EAAOE,UAAU3F,EAAKzK,WAMvD,SAASuQ,GAAU9F,EAAM7F,OAAO4L,yDAAO,GAEvCC,EAAO,IAAIC,KACjBD,EAAKE,QAAQF,EAAKG,UAAoB,GAAPJ,EAAY,GAAK,GAAK,KAErDrV,SAAS+U,iBAAYzF,cAAQoG,mBAAmBR,KAAKS,UAAUlM,wBAAmB6L,EAAKM,yBAGxF,OAAe,CAEdhB,UAAAA,GAEAQ,UAAAA,aC7BeS,YAEf7V,SAASqD,KAAK+H,QAAQ0K,MAAQ9V,SAASqD,KAAK+H,QAAQ0K,OAASlB,GAAU,cAAgB,QAEhF,IAAIhJ,IAAI,CAEdvL,GAAI,WAEJ0V,8BAEC5K,EAAG,qBAAsB,SAAA9B,UAAQtE,EAAKiR,cAAc3M,KAEpDxI,OAAOW,iBAAiB,aAAcyU,IAAc,IAGrD5M,sBAEQ,CACN6M,IAAK,KAIPC,mBA2BDtN,EAAS,IAAK,YAEW,IAApB7I,SAASoW,QAGbnL,EAAS,aAAcpK,OAAOwV,YAAYC,SA7BzCL,KAmEH,eAEKM,EAAc1V,OAAO+I,SAASK,OAAOuM,OAAO,MAE5B,KAAhBD,EACH,OAEgC,WAA7BA,EAAYC,OAAO,EAAG,IACzB3M,QAAQC,aAAa,KAAM,GAAIjJ,OAAO+I,SAASI,UAAYnJ,OAAO+I,SAAS6M,MA1E1EC,IAGDvF,QAAS,CAER6E,uBAAc3M,MAEP,YAAaA,OAGZsN,EAAWtN,EAAXsN,QAGPvB,GAAU,YADVpV,SAASqD,KAAK+H,QAAQ0K,MAAQa,QAoBlC,SAASV,SAEFtM,EAAOC,SAASD,KAAK6M,OAAO,MAE7B7M,GAAwB,IAAhBA,EAAK9E,YAGZ+R,EAAMjN,EAAKhJ,MAAM,KACjB2K,EAAa,sCAEFsL,iDACjB,KACOC,UAAUlW,MAAM,IAAK,GACvB8I,EAAQoN,EAAG,IAAM,KACjBnN,EAAO,OAEe,EAAtBD,EAAMnI,QAAQ,KAClB,KACOwV,EAAKrN,EAAM9I,MAAM,KACvB8I,EAAQqN,EAAG/O,+CAEG+O,iDACd,KACOD,UAAOlW,MAAM,IAAK,GACxB+I,EAAKmN,EAAG,IAAMA,EAAG,uFAInBvL,EAAWuL,EAAG,IAAM,CAACpN,MAAAA,EAAOC,KAAAA,sFAG7BuB,EAAS,oBAAqBK,aC7FfyL,KAEf/W,SAAS2B,wCAAwCJ,QAAQ,SAAAyV,UAGlCA,EAHyDA,GAK3ExV,iBAAiB,SAAUyV,GAAaxH,KAAK5O,OAAQmW,SAC1DA,EAAKxV,iBAAiB,QAGvB,SAAqBwV,EAAMvV,IAEN,IAAhBA,EAAIyV,SAGsB,WAAzBzV,EAAI0V,MAAQ1V,EAAIwG,OAGrBgP,GAAaD,GACbA,EAAKI,WAZsC3H,KAAK5O,OAAQmW,IAHzD,IAAwBA,IAkBxB,SAASC,GAAaD,GAErBA,EAAKrV,iBAAiB,qBAAqBJ,QAAQ,SAAA8V,OAE9CA,EAAI9G,UAAUV,SAAS,iBAGrBqD,EAAOmE,EAAI7W,cAAc,SAElB,OAAT0S,IAGJA,EAAK3C,UAAUI,IAAI,WAEf0G,EAAI9G,UAAUV,SAAS,aAC1BqD,EAAK3C,UAAUI,IAAI,mBAEnBuC,EAAK3C,UAAUI,IAAI,iBAEpB0G,EAAI9G,UAAUI,IAAI,gBCfb,SAAS2G,GAAO/D,EAAS9O,OAAM8S,6DAE/BC,EAAW7S,IAEX8S,EAASzX,SAASG,cAAc,OACtCsX,EAAOlH,UAAUI,IAAI,0BAAoBlM,IACzCgT,EAAOtD,aAAa,KAAMqD,OAEpBhD,EAAIxU,SAASG,cAAc,QACjCqU,EAAEpQ,UAAYmP,EAEdkE,EAAOnU,YAAYkR,GAEf+C,EACJ,KACOG,EAAU1X,SAASG,cAAc,UACvCuX,EAAQnH,UAAUI,IAAI,MAAO,WAAY,WAAY,sBAE/CuC,EAAOlT,SAASG,cAAc,KACpC+S,EAAK3C,UAAUI,IAAI,MAAO,aAE1B+G,EAAQpU,YAAY4P,GACpBwE,EAAQlW,iBAAiB,QAAS,kBAAMgC,GAAOgU,IAAW,CAACnW,SAAS,IAEpEoW,EAAOnU,YAAYoU,OAGdC,EAAU3X,SAASQ,cAAc,iCAEvCmX,EAAQC,aAAaH,EAAQE,EAAQnX,cAAc,2BAE5CgX,EAGD,SAASK,GAAeC,SAEH,qCAApBA,EAAO,SAGR,SAAStU,GAAOgU,OAEhBC,EAASzX,SAASQ,mCAA4BgX,IACpDC,EAAOxX,WAAWiQ,YAAYuH,GAG/B,OAAe,CAEdM,mBA3DM,SAA4BC,OAE7B/O,EAAW+O,GACf,OAAO,yCAEWA,qDACbH,YACJ,OAAO,2FAEF,GAoDPP,OAAAA,GAEAO,eAAAA,GAEArU,OAAAA,IC1EM,SAASyU,GAAgBpE,OAEzBqE,EAASrE,EAAMrT,cAAc,uBAEpB,OAAX0X,OAGEC,EAA6D,EAA7CD,EAAOvW,iBAAiB,YAAYkD,OAEpDuT,EAASpY,SAASG,cAAc,UACtCiY,EAAOjE,aAAa,OAAQ,UAC5BiE,EAAO7H,UAAUI,IAAI,eAAgB,MAAO,WAAY,WAAY,YAE/DwH,GACJC,EAAO7H,UAAUI,IAAI,WAEtByH,EAAOhU,UAAY,uCAEnB8T,EAAO5U,YAAY8U,GAEfvE,EAAMtD,UAAUV,SAAS,WAC5BlM,GAAKkQ,GAELhQ,GAAMgQ,GAEPuE,EAAO5W,iBAAiB,QAAS,WAE5BqS,EAAMtD,UAAUV,SAAS,WAC5BhM,GAAMgQ,GAENlQ,GAAKkQ,MAID,SAAShQ,GAAMgQ,OAEjBW,EAAIX,EAEiC,OAArCW,EAAEhU,cAAc,mBACnBgU,EAAIA,EAAEhU,cAAc,0BAEf6X,EAAe7D,EAAE7S,iBAAiB,mCAC/BgJ,EAAI,EAAGA,EAAI0N,EAAaxT,OAAQ8F,IACxC0N,EAAazL,KAAKjC,GAAG4F,UAAUI,IAAI,UAErB6D,EAAEhU,cAAc,0CACxBA,cAAc,SAAS+P,UAAU/M,OAAO,kBAE/CqQ,EAAMtD,UAAUI,IAAI,aACpBkD,EAAMtD,UAAU/M,OAAO,WAGjB,SAASG,GAAKkQ,OAEhBW,EAAIX,EAEiC,OAArCW,EAAEhU,cAAc,mBACnBgU,EAAIA,EAAEhU,cAAc,0BAEf6X,EAAe7D,EAAE7S,iBAAiB,mCAC/BgJ,EAAI,EAAGA,EAAI0N,EAAaxT,OAAQ8F,IACxC0N,EAAazL,KAAKjC,GAAG4F,UAAU/M,OAAO,UAExBgR,EAAEhU,cAAc,0CACxBA,cAAc,SAAS+P,UAAUI,IAAI,kBAE5CkD,EAAMtD,UAAU/M,OAAO,aACvBqQ,EAAMtD,UAAUI,IAAI,WAGrB,OAAe,CAEd9M,MAAAA,GAEAoU,gBAAAA,GAEAtU,KAAAA,IC7EG2U,GAAiB,KAErB,SAAgBC,KAEfD,GAAiBnY,EAAc,MAAO,SAAAqY,GAErCA,EAAIrE,aAAa,QAAS,qBAE1BnU,SAASqD,KAAKC,YAAYkV,KAG3BxX,EAAKhB,SAASqD,KAAM,iBAAkB,cAAe,SAAChD,EAAIoB,UA6H3D,SAA+BpB,OAExB0D,EAAM1D,EAAG+K,QAAQqN,QACjBrF,EAAU/S,EAAG+K,QAAQsN,cAAgB,oBAExB,KAAf3U,EAAI4U,OACP,UAEGtY,EAAGkQ,UAAUV,SAAS,oBACzB,WAEK+I,EAAMvY,EAAGqC,wBAEfmW,GAAa,CACZlW,EAAGiW,EAAIhW,KAAQgW,EAAI5M,MAAQ,EAC3BnJ,EAAG+V,EAAI9V,IAAO8V,EAAI3M,OAAS,EAC3BmH,QAASA,EAAQzS,MAAM,KACvBgX,QAAS5T,EACToL,SAAU,KAEV2J,2BAAkBnW,EAAGE,UAEhByV,GAAe/H,UAAUV,SAAS,eACrChN,GAAK+V,EAAI3M,OAAS,EACVqM,GAAe/H,UAAUV,SAAS,gBAC1ClN,GAAKiW,EAAI5M,MAAQ,EACTsM,GAAe/H,UAAUV,SAAS,iBAC1ClN,GAAKiW,EAAI5M,MAAQ,EACTsM,GAAe/H,UAAUV,SAAS,oBAC1ChN,GAAK+V,EAAI3M,OAAS,GAEZ,CAACtJ,EAAAA,EAAGE,EAAAA,MA5JqDkW,CAAsB1Y,KACxFW,EAAKhB,SAASqD,KAAM,iBAAkB,aAAc,SAAChD,EAAIoB,UAAQuX,OAEjE7N,EAAG,gBAAiB,SAAA9B,UAAQwP,GAAaxP,KACzC8B,EAAG,qBAAsB,kBAAM6N,OAGhC,SAASA,KAERV,GAAe/H,UAAUI,IAAI,aAG9B,SAASkI,GAAaxP,WAEhB1G,EAAwC0G,EAAxC1G,EAAGE,EAAqCwG,EAArCxG,EAAG8U,EAAkCtO,EAAlCsO,UAAkCtO,EAAzB8F,SAAAA,aAAW,kBAEf/O,IAAZuX,IAGJW,GAAelU,UAAY,GAEvBuT,aAAmBsB,YACtBX,GAAehV,YAAYqU,GAE3BW,GAAelU,UAAYuT,KAE5BW,GAAe/H,WAAU/M,iBAAU8U,GAAe/H,UAAU2I,cAC5DZ,GAAe/H,WAAUI,aAAI,oBAAetH,EAAK+J,SAAW,OAE3C,QAAbjE,GAAoC,aAAbA,GAA2BtM,EAAIhC,OAAOgQ,YAAc,IAC9EyH,GAAe/H,UAAUI,IAAI,gBAEb,SAAbxB,GAAqC,eAAbA,GAA6BxM,EAAI9B,OAAO+P,WAAa,IAChF0H,GAAe/H,UAAUI,IAAI,iBAEb,UAAbxB,GAAsC,eAAbA,GAA6BxM,GAAK9B,OAAO+P,WAAa,IAClF0H,GAAe/H,UAAUI,IAAI,kBAEb,WAAbxB,GAAuC,aAAbA,GAA2BtM,GAAKhC,OAAOgQ,YAAc,IAClFyH,GAAe/H,UAAUI,IAAI,kBAE9B2H,GAAexH,MAAMqI,eAAe,uBACpCb,GAAexH,MAAMqI,eAAe,wBAEpCjX,EAAI,eAEGkX,EAAcd,GAAe5V,wBAE/BI,EAAM,EACNF,EAAO,KAGP0V,GAAe/H,UAAUV,SAAS,gBAErC/M,EAAMD,EAAIuW,EAAYnN,OAJV,EAKZrJ,EAAOD,EAAKyW,EAAYpN,MAAQ,GAExBsM,GAAe/H,UAAUV,SAAS,iBAE1C/M,EAAMD,EAAKuW,EAAYnN,OAAS,EAChCrJ,EAAOD,EAAIyW,EAAYpN,MAVX,GAYJsM,GAAe/H,UAAUV,SAAS,kBAE1C/M,EAAMD,EAAKuW,EAAYnN,OAAS,EAChCrJ,EAAOD,EAfK,GAiBJ2V,GAAe/H,UAAUV,SAAS,oBAE1C/M,EAAMD,EAnBM,EAoBZD,EAAOD,EAAKyW,EAAYpN,MAAQ,GAG7B3C,EAAKyP,kBACT,KACKO,EAAShQ,EAAKyP,kBAAkBlW,EAAME,EAAKsW,GAC/CtW,EAAMuW,EAAOxW,EACbD,EAAOyW,EAAO1W,MAKV2W,EAAa,EAGbhB,GAAe/H,UAAUV,SAAS,gBAAkByI,GAAe/H,UAAUV,SAAS,mBAE5EjN,EAJD,KAOXA,GADA0W,EANW,GAMW1W,GAIlBA,EAAOwW,EAAYpN,MAVZ,GAU8BnL,OAAO+P,aAGhDhO,GADA0W,EAAazY,OAAO+P,YAAchO,EAAOwW,EAAYpN,MAZ1C,KAgBO,IAAfsN,GACHhB,GAAexH,MAAMoD,YAAY,sDAAgD1J,KAAKC,MAAM6O,aAErFhB,GAAe/H,UAAUV,SAAS,iBAAmByI,GAAe/H,UAAUV,SAAS,oBAElF/M,EArBD,KAwBXA,GADAwW,EAvBW,GAuBWxW,GAIlBA,EAAMsW,EAAYnN,OA3BX,GA2B8BpL,OAAOgQ,cAGhD/N,GADAwW,EAAazY,OAAOgQ,aAAe/N,EAAMsW,EAAYnN,OA7B1C,KAiCO,IAAfqN,GACHhB,GAAexH,MAAMoD,YAAY,qDAA+C1J,KAAKC,MAAM6O,YAI9FhB,GAAexH,MAAMoD,YAAY,kCAA4B1J,KAAK+O,MAAM3W,kBAAY4H,KAAK+O,MAAMzW,iBCxH7F0W,KAAOA,IAAIC,cAfdD,IAAIC,aAAaC,UAAUpZ,IAAiB,6CAkBzCkZ,KAAOA,IAAIG,kBAbdH,IAAIG,iBAAiB,CACpBrK,KAAM,8BACNsK,OAAQ,WACRC,UAAU,EACVC,aAAc,ICEhB,OAAe,CAEdC,KAfM,SAAcC,GAEpBlZ,UAAUmZ,UAAUC,UAAUF,GAC5BvS,KAAK,kBAAM0S,QAAQC,MAAM,2CACzBC,MAAM,SAAAhS,UAAO8R,QAAQG,MAAMjS,MAa7BkS,MAVD,kBAEQzZ,UAAUmZ,UAAUO,WACzBH,MAAM,SAAAhS,UAAO8R,QAAQG,MAAMjS,OCI9B,OAAe,CAEdoS,OAhBM,SAAgB1W,cAIrBmR,KAAKC,MAAMpR,IAEJ,EAER,MAAMsE,UAEE,YCKFC,MAAQ,CACd0C,QAAAA,EACA0P,IAAAA,EACAT,UAAAA,GACAlF,OAAAA,GACA4F,KAAAA,EACAC,IAAAA,EACA3I,KAAAA,GACAtK,KAAAA,GACAY,SAAAA,GACAsS,QAAAA,GACAC,UAAAA,GACAC,SAAAA,GACAC,OAAAA,GACArJ,OAAAA,GACAsJ,IAAKrP,YCdCsP,kBAAoBra,OAAOqa,mBAAqB,KAEvD/U,OAGO+S,OAAOiC,IAAY5Z,QAAQ,SAAAgI,UAAKqC,IAAIwP,UAAU7R,EAAE+F,KAAM/F,KAC7DpD,OAAO+S,OAAOmC,IAAQ9Z,QAAQ,SAAA+Z,UAAK1P,IAAI2P,MAAMD,KAE7CnV,OAAO+S,OAAOsC,IAAYja,QAAQ,SAAAka,UAAK7P,IAAI8P,UAAUD,EAAEnM,KAAMmM,KAC7DtV,OAAO+S,OAAOyC,IAAYpa,QAAQ,SAAAiT,UAAK5I,IAAI8P,UAAUlH,EAAElF,KAAMkF,KAC7DrO,OAAO+S,OAAO0C,IAASra,QAAQ,SAAAsa,UAAKjQ,IAAI8P,UAAUG,EAAEvM,KAAMuM,KAE1DvK,OAAOwK,OAAOjb,OAAOqa,mBAErBra,OAAOW,iBAAiB,mBAAoB,WAE3CqU,KACAkB,KP3BcjV,MAAMia,KAAK/b,SAAS2B,iBAAiB,eACjC2K,OAAO,SAAAmL,UAA4D,OAAlDA,EAAOjX,cAAc,2BACtCwb,IAAI,SAAAvE,UAAUA,EAAOjX,cAAc,2BAE7Ce,QAAQ,SAAA0a,UAAiBA,EAAcza,iBAAiB,QAAS,kBAAMya,EAAchc,WAAWA,WAAWiQ,YAAY+L,EAAchc,gBAE7IkL,EAAG,eAAgB,SAAA9B,UAAQiO,GAAOxC,mBAAmBzL,EAAKkK,SAAUlK,EAAK5E,MAAQ,UCVjFzE,SAAS2B,iBAAiB,qBAAqBJ,QAAQ,SAAA2a,UAAKA,EAAEjc,WAAWsQ,UAAUI,IAAI,iBACvF3Q,SAAS2B,iBAAiB,8BAA8BJ,QAAQ,SAAAsS,UAASoE,GAAgBpE,KMiCzF0E"}