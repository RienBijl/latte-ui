{"version":3,"file":"latte.js","sources":["../src/js/util/dom.js","../src/js/core.js","../src/js/actions.js","../src/js/api.js","../src/js/util/clipboard.js","../src/js/util/cookies.js","../src/js/i18n.js","../src/js/easing.js","../src/js/velocity.js","../src/js/math.js","../src/js/operators.js","../src/js/z.js","../src/js/ui/messages.js","../src/js/ui/notices.js","../src/js/ui/overlays.js","../src/js/ui/panels.js","../src/js/util/string.js","../src/js/sdk.js","../src/js/util/json.js","../src/js/houdini-apis.js","../src/js/ui/forms.js","../src/js/ui/tooltip.js","../src/js/hid/OutsideEvent.js","../../../node_modules/vue-runtime-helpers/dist/normalize-component.js","../src/vue/component/Autocomplete.vue","../../../node_modules/vue-runtime-helpers/dist/inject-style/browser.js","../src/vue/component/Draggable.vue","../src/js/ui/grid.js","../src/vue/component/Grid.vue","../src/vue/component/PdfViewer.vue","../src/js/ui/portal-utils.js","../src/js/ui/wormhole.js","../src/vue/directive/ContextMenu.js","../src/vue/mixin/LatteApisMixin.js","../src/vue/mixin/MomentMixin.js","../src/index.js","../src/js/hid/PointerEvents.js","../src/js/app.js"],"sourcesContent":["/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet lattePath = null;\r\n\r\nexport function closest(element, selector)\r\n{\r\n\tfor (; element && element !== document; element = element.parentNode)\r\n\t\tif (element === selector || (typeof selector === \"string\" && element.matches(selector)))\r\n\t\t\treturn element;\r\n\r\n\treturn null;\r\n}\r\n\r\nexport function createElement(element, fn = undefined)\r\n{\r\n\tconst el = document.createElement(element);\r\n\r\n\tif (fn !== undefined)\r\n\t\tfn(el);\r\n\r\n\treturn el;\r\n}\r\n\r\nexport function downloadFile(fileName, url)\r\n{\r\n\tcreateElement(\"a\", a =>\r\n\t{\r\n\t\ta.download = fileName;\r\n\t\ta.href = url;\r\n\r\n\t\tdocument.body.appendChild(a);\r\n\r\n\t\ta.click();\r\n\t\ta.remove();\r\n\t});\r\n}\r\n\r\nexport function getCoords(evt)\r\n{\r\n\tif (window.TouchEvent && evt instanceof TouchEvent)\r\n\t{\r\n\t\tif (evt.touches.length > 0)\r\n\t\t\tevt = evt.touches.item(evt.touches.length - 1);\r\n\t\telse\r\n\t\t\tevt = evt.changedTouches.item(evt.changedTouches.length - 1);\r\n\t}\r\n\r\n\tif (!evt.clientX || !evt.clientY)\r\n\t\treturn undefined;\r\n\r\n\treturn {x: evt.clientX, y: evt.clientY};\r\n}\r\n\r\nexport function getLattePath()\r\n{\r\n\tif (lattePath !== null)\r\n\t\treturn lattePath;\r\n\r\n\tconst lattejs = document.querySelector(`script[src*=\"latte.js\"]`);\r\n\r\n\tif (lattejs === null)\r\n\t\treturn lattePath = \"/\"; // We're going to play it save.\r\n\r\n\treturn lattePath = lattejs.getAttribute(\"src\").split(\"latte.js\")[0] || null;\r\n}\r\n\r\nexport function isReady()\r\n{\r\n\treturn [\"complete\", \"loaded\", \"interactive\"].indexOf(document.readyState) > -1;\r\n}\r\n\r\nexport function isTouchOnlyDevice()\r\n{\r\n\treturn \"ontouchstart\" in window || navigator.msMaxTouchPoints;\r\n}\r\n\r\nexport function live(root, selector, event, callback, options = {passive: true})\r\n{\r\n\tif (event.indexOf(\" \") > -1)\r\n\t{\r\n\t\tconst events = event.split(\" \");\r\n\r\n\t\tevents.forEach(event => live(root, selector, event, callback));\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\troot.addEventListener(event, function (evt)\r\n\t{\r\n\t\tconst qs = root.querySelectorAll(selector);\r\n\r\n\t\tif (!qs)\r\n\t\t\treturn;\r\n\r\n\t\tlet el = evt.target, index;\r\n\r\n\t\twhile (el && ((index = Array.prototype.indexOf.call(qs, el)) === -1))\r\n\t\t\tel = el.parentElement;\r\n\r\n\t\tif (index > -1)\r\n\t\t\tcallback(el, evt)\r\n\r\n\t}, options);\r\n}\r\n\r\nexport function printDocument(url)\r\n{\r\n\tconst wnd = window.open(url);\r\n\twnd.addEventListener(\"load\", () =>\r\n\t{\r\n\t\twnd.print();\r\n\t\twnd.addEventListener(\"focus\", () => wnd.close());\r\n\t});\r\n}\r\n\r\nexport function raf(fn, delay = undefined)\r\n{\r\n\tif (delay !== undefined)\r\n\t\treturn setTimeout(() => requestAnimationFrame(fn), delay);\r\n\r\n\trequestAnimationFrame(fn);\r\n}\r\n\r\nexport function relativeCoordsTo(element, evt)\r\n{\r\n\tconst coords = getCoords(evt);\r\n\r\n\tif (!coords)\r\n\t\treturn undefined;\r\n\r\n\tconst rect = element.getBoundingClientRect();\r\n\r\n\treturn {\r\n\t\tx: coords.x - rect.left,\r\n\t\ty: coords.y - rect.top\r\n\t};\r\n}\r\n\r\nexport function removeSavedFromQueryString()\r\n{\r\n\tlet queryString = window.location.search.substr(1);\r\n\r\n\tif (queryString === \"\")\r\n\t\treturn;\r\n\r\n\tif (queryString.substr(0, 6) === \"saved=\")\r\n\t\thistory.replaceState(null, '', window.location.pathname || window.location.path);\r\n}\r\n\r\nexport function toDOM(str)\r\n{\r\n\tconst temp = document.createElement(\"div\");\r\n\tconst fragment = document.createDocumentFragment();\r\n\r\n\tlet child;\r\n\r\n\ttemp.innerHTML = str;\r\n\r\n\twhile ((child = temp.firstChild))\r\n\t\tfragment.appendChild(child);\r\n\r\n\treturn fragment;\r\n}\r\n\r\nexport default {\r\n\r\n\tclosest,\r\n\r\n\tcreateElement,\r\n\r\n\tdownloadFile,\r\n\r\n\tgetCoords,\r\n\r\n\tgetLattePath,\r\n\r\n\tisReady,\r\n\r\n\tisTouchOnlyDevice,\r\n\r\n\tlive,\r\n\r\n\tprintDocument,\r\n\r\n\traf,\r\n\r\n\trelativeCoordsTo,\r\n\r\n\tremoveSavedFromQueryString,\r\n\r\n\ttoDOM\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet currentOptions = {};\r\nlet dateFormatterOptions = {\r\n\tday: \"numeric\",\r\n\tmonth: \"long\",\r\n\tweekday: \"long\",\r\n\tyear: \"numeric\"\r\n};\r\n\r\n/**\r\n * Deep merges multiple objects.\r\n *\r\n * @param {*} target\r\n * @param {*} sources\r\n *\r\n * @returns {*}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function deepMerge(target, ...sources)\r\n{\r\n\tif (sources.length === 0)\r\n\t\treturn target;\r\n\r\n\tconst source = sources.shift();\r\n\r\n\tif (!isObject(target) || !isObject(source))\r\n\t\treturn deepMerge(target, ...sources);\r\n\r\n\tfor (const key in source)\r\n\t{\r\n\t\tif (!source.hasOwnProperty(key))\r\n\t\t\tcontinue;\r\n\r\n\t\tif (isObject(source[key]))\r\n\t\t{\r\n\t\t\tif (!target[key])\r\n\t\t\t\tObject.assign(target, {[key]: source[key]});\r\n\r\n\t\t\tdeepMerge(target[key], source[key]);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tObject.assign(target, {[key]: source[key]});\r\n\t\t}\r\n\t}\r\n\r\n\treturn deepMerge(target, ...sources);\r\n}\r\n\r\n/**\r\n * Formats a datetime.\r\n *\r\n * @param {Date} date\r\n * @param {Object} options\r\n *\r\n * @returns {String}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function formatDateTime(date, options = dateFormatterOptions)\r\n{\r\n\tconst f = new Intl.DateTimeFormat(currentOptions.locale, options);\r\n\r\n\treturn f.format(date);\r\n}\r\n\r\n/**\r\n * Gets the main#app element.\r\n *\r\n * @returns {HTMLMainElement}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function getMainElement()\r\n{\r\n\treturn document.querySelector(\"main#app\");\r\n}\r\n\r\n/**\r\n * Handles an Error.\r\n *\r\n * @param {Error} err\r\n * @param {Function|undefined} fn\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function handleError(err, fn = undefined)\r\n{\r\n\tLatte.messages.alert(\"Aw snap!\", `<pre>${err.stack}</pre>`);\r\n\r\n\tif (fn)\r\n\t\tfn();\r\n}\r\n\r\n/**\r\n * Returns TRUE when obj is an object.\r\n *\r\n * @param {*} obj\r\n *\r\n * @returns {Boolean}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function isObject(obj)\r\n{\r\n\treturn obj && typeof obj === \"object\" && !Array.isArray(obj);\r\n}\r\n\r\n/**\r\n * Sets an interval.\r\n *\r\n * @param {Number} timeout\r\n * @param {Function} func\r\n *\r\n * @returns {Number}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function interval(timeout, func)\r\n{\r\n\tfunc();\r\n\r\n\treturn setInterval(func, timeout);\r\n}\r\n\r\n/**\r\n * Returns TRUE when obj is iterable.\r\n *\r\n * @param {*} obj\r\n *\r\n * @returns {Boolean}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function isIterable(obj)\r\n{\r\n\tif (obj === null)\r\n\t\treturn false;\r\n\r\n\treturn typeof obj[Symbol.iterator] === \"function\";\r\n}\r\n\r\n/**\r\n * Generates a random password-like string.\r\n *\r\n * @param {Number} length\r\n * @param {String} availableSets\r\n *\r\n * @returns {String}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function randomPassword(length = 9, availableSets = \"luds\")\r\n{\r\n\tconst sets = [];\r\n\r\n\tif (availableSets.indexOf(\"l\") > -1)\r\n\t\tsets.push(\"abcdefghjkmnpqrstuvwxyz\");\r\n\r\n\tif (availableSets.indexOf(\"u\") > -1)\r\n\t\tsets.push(\"ABCDEFGHJKMNPQRSTUVWXYZ\");\r\n\r\n\tif (availableSets.indexOf(\"d\") > -1)\r\n\t\tsets.push(\"123456789\");\r\n\r\n\tif (availableSets.indexOf(\"s\") > -1)\r\n\t\tsets.push(\"!@#$%&*?\");\r\n\r\n\tlet all = \"\";\r\n\tlet password = \"\";\r\n\r\n\tsets.forEach(set =>\r\n\t{\r\n\t\tpassword += set[Math.floor(Math.random() * set.length)];\r\n\t\tall += set;\r\n\t});\r\n\r\n\tfor (let i = 0; i < length - sets.length; i++)\r\n\t\tpassword += all[Math.floor(Math.random() * all.length)];\r\n\r\n\treturn shuffleString(password);\r\n}\r\n\r\n/**\r\n * Registers a Latte module.\r\n *\r\n * @param {Function} func\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function register(func)\r\n{\r\n\tfunc(window.Latte);\r\n}\r\n\r\n/**\r\n * Sets the used latte options for local use.\r\n *\r\n * @param {Object} options\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.3.0\r\n */\r\nexport function setOptions(options)\r\n{\r\n\tcurrentOptions = options;\r\n}\r\n\r\n/**\r\n * Sets a timeout.\r\n *\r\n * @param {Number} timeout\r\n * @param {Function} func\r\n *\r\n * @returns {Number}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function timeout(timeout, func)\r\n{\r\n\treturn setTimeout(func, timeout);\r\n}\r\n\r\n/**\r\n * Updates the URL hash.\r\n *\r\n * @param {Object} data\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function updateURLHash(data)\r\n{\r\n\tlet parts = [];\r\n\r\n\tfor (let key in data)\r\n\t{\r\n\t\tif (!data.hasOwnProperty(key))\r\n\t\t\tcontinue;\r\n\r\n\t\tlet str = key;\r\n\t\tlet d = data[key];\r\n\r\n\t\tif (d.value)\r\n\t\t\tstr += `=${d.value}`;\r\n\r\n\t\tfor (let vk in d.vars)\r\n\t\t\tif (d.vars.hasOwnProperty(vk))\r\n\t\t\t\tstr += `/${vk}:${d.vars[vk]}`;\r\n\r\n\t\tparts.push(str);\r\n\t}\r\n\r\n\tconst hash = parts.join(\"&\");\r\n\r\n\tif (hash.length > 0)\r\n\t\tlocation.hash = hash;\r\n\telse\r\n\t\thistory.replaceState({}, document.title, location.pathname + location.search);\r\n}\r\n\r\nfunction shuffleString(str)\r\n{\r\n\tconst a = str.split(\"\");\r\n\tconst n = a.length;\r\n\r\n\tfor (let i = n - 1; i > 0; i--)\r\n\t{\r\n\t\tlet j = Math.floor(Math.random() * (i + 1));\r\n\t\tlet tmp = a[i];\r\n\r\n\t\ta[i] = a[j];\r\n\t\ta[j] = tmp;\r\n\t}\r\n\r\n\treturn a.join(\"\");\r\n}\r\n\r\nexport default {\r\n\r\n\tdeepMerge,\r\n\r\n\tformatDateTime,\r\n\r\n\tgetMainElement,\r\n\r\n\thandleError,\r\n\r\n\tinterval,\r\n\r\n\tisObject,\r\n\r\n\tisIterable,\r\n\r\n\trandomPassword,\r\n\r\n\tregister,\r\n\r\n\ttimeout,\r\n\r\n\tupdateURLHash\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { live } from \"./util/dom.js\";\r\nimport { updateURLHash } from \"./core.js\";\r\n\r\nconst actions = {};\r\n\r\n/**\r\n * Class ActionSubscription\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @version 1.0.0\r\n */\r\nclass ActionSubscription\r\n{\r\n\r\n\t/**\r\n\t * ActionSubscription Constructor.\r\n\t *\r\n\t * @param {String} action\r\n\t * @param {Function} callback\r\n\t *\r\n\t * @author Bas Milius <bas@mili.us>\r\n\t * @version 1.0.0\r\n\t */\r\n\tconstructor(action, callback)\r\n\t{\r\n\t\tthis.action = action;\r\n\t\tthis.callback = callback;\r\n\t\tthis.id = performance.now();\r\n\t}\r\n\r\n\t/**\r\n\t * Calls the handler callback.\r\n\t *\r\n\t * @param {*} data\r\n\t * @param {HTMLElement} el\r\n\t * @param {Event} evt\r\n\t *\r\n\t * @author Bas Milius <bas@mili.us>\r\n\t * @version 1.0.0\r\n\t */\r\n\thandle(data, el, evt)\r\n\t{\r\n\t\tthis.callback(data, el, evt);\r\n\t}\r\n\r\n\t/**\r\n\t * Unsubscribes the action callback.\r\n\t *\r\n\t * @author Bas Milius <bas@mili.us>\r\n\t * @version 1.0.0\r\n\t */\r\n\tunsubscribe()\r\n\t{\r\n\t\tactions[this.action] = actions[this.action].filter(sub => sub.id !== this.id);\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Dispatches an action.\r\n *\r\n * @param {String} action\r\n * @param {*|undefined} data\r\n * @param {Node|undefined} el\r\n * @param {Event|undefined} evt\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function dispatch(action, data = undefined, el = undefined, evt = undefined)\r\n{\r\n\tif (typeof actions[action] === \"undefined\")\r\n\t\treturn;\r\n\r\n\tactions[action].forEach(sub => sub.handle(data, el, evt));\r\n}\r\n\r\n/**\r\n * Registers an action listener.\r\n *\r\n * @param {String} action\r\n * @param {Function} callback\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function on(action, callback)\r\n{\r\n\tif (typeof actions[action] === \"undefined\")\r\n\t\tactions[action] = [];\r\n\r\n\tconst sub = new ActionSubscription(action, callback);\r\n\r\n\tactions[action].push(sub);\r\n\r\n\treturn sub;\r\n}\r\n\r\nfunction onAction(element, evt)\r\n{\r\n\tconst action = element.dataset.action;\r\n\tconst actionData = element.dataset;\r\n\r\n\tif (typeof actions[action] === \"undefined\")\r\n\t\treturn;\r\n\r\n\tactions[action].forEach(sub => sub.handle(actionData, element, evt));\r\n}\r\n\r\nfunction onHashChange()\r\n{\r\n\tconst hash = location.hash.substr(1);\r\n\r\n\tif (!hash || hash.length === 0)\r\n\t\treturn;\r\n\r\n\tconst raw = hash.split(\"&\");\r\n\tconst parameters = {};\r\n\r\n\tfor (let i in raw)\r\n\t{\r\n\t\tif (!raw.hasOwnProperty(i))\r\n\t\t\tcontinue;\r\n\r\n\t\tconst item = raw[i];\r\n\t\tconst kv = item.split(\"=\", 2);\r\n\t\tlet value = kv[1] || null;\r\n\t\tlet vars = {};\r\n\r\n\t\tif (value.indexOf(\"/\") > -1)\r\n\t\t{\r\n\t\t\tconst ad = value.split(\"/\");\r\n\t\t\tvalue = ad.shift();\r\n\r\n\t\t\tfor (let j in ad)\r\n\t\t\t{\r\n\t\t\t\tif (!ad.hasOwnProperty(j))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tconst d = ad[j];\r\n\t\t\t\tconst kv = d.split(\":\", 2);\r\n\t\t\t\tvars[kv[0]] = kv[1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tparameters[kv[0]] = {value, vars};\r\n\t}\r\n\r\n\tdispatch(\"latte:hash-change\", parameters);\r\n}\r\n\r\nwindow.addEventListener(\"hashchange\", () => onHashChange(), false);\r\nwindow.addEventListener(\"load\", () => onHashChange(), false);\r\n\r\nlive(document.body, \"[data-action]\", \"click\", (element, evt) => onAction(element, evt), {passive: true});\r\n\r\non(\"latte:hash-change\", parameters =>\r\n{\r\n\tconst action = parameters.action;\r\n\r\n\tdelete parameters.action;\r\n\r\n\tupdateURLHash(parameters);\r\n\r\n\tif (action === undefined || action === null)\r\n\t\treturn;\r\n\r\n\tdispatch(action.value, action.vars);\r\n});\r\n\r\nexport default {\r\n\r\n\tdispatch,\r\n\r\n\ton\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\n/**\r\n * Generates a random unique ID using the browsers crypto capabilities.\r\n *\r\n * @returns {String}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function id()\r\n{\r\n\tconst array = new Uint32Array(3);\r\n\r\n\twindow.crypto.getRandomValues(array);\r\n\r\n\treturn \"latte-\" + array.join(\"-\");\r\n}\r\n\r\n/**\r\n * Requests an API endpoint.\r\n *\r\n * @param {String} url\r\n * @param {RequestInit} options\r\n *\r\n * @returns {Promise<Response>}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function request(url, options = {})\r\n{\r\n\treturn fetch(url, Object.assign({}, {credentials: \"same-origin\"}, options));\r\n}\r\n\r\n/**\r\n * Requests a JSON endpoint.\r\n *\r\n * @param {String} url\r\n * @param {RequestInit} options\r\n *\r\n * @returns {Promise<Object>}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function requestJson(url, options = {})\r\n{\r\n\treturn request(url, options)\r\n\t\t.then(r => r.json());\r\n}\r\n\r\nexport default {\r\n\r\n\tid,\r\n\r\n\trequest,\r\n\r\n\trequestJson\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function copy(text)\r\n{\r\n\tnavigator.clipboard.writeText(text)\r\n\t\t.then(() => console.debug(\"[Clipboard] Text copied to clipboard!\"))\r\n\t\t.catch(err => console.error(err));\r\n}\r\n\r\nexport function paste()\r\n{\r\n\treturn navigator.clipboard.readText()\r\n\t\t.catch(err => console.error(err));\r\n}\r\n\r\nexport default {\r\n\r\n\tcopy,\r\n\r\n\tpaste\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function getCookie(name)\r\n{\r\n\tname = `${name}=`;\r\n\r\n\tconst decoded = decodeURIComponent(document.cookie);\r\n\tconst cookies = decoded.split(\";\");\r\n\r\n\tfor (let i = 0; i < cookies.length; i++)\r\n\t{\r\n\t\tlet cookie = cookies[i];\r\n\r\n\t\twhile (cookie.charAt(0) === \" \")\r\n\t\t\tcookie = cookie.substring(1);\r\n\r\n\t\tif (cookie.indexOf(name) === 0)\r\n\t\t\treturn JSON.parse(decodeURIComponent(cookie.substring(name.length)));\r\n\t}\r\n\r\n\treturn undefined;\r\n}\r\n\r\nexport function setCookie(name, value, days = 21)\r\n{\r\n\tconst date = new Date();\r\n\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n\r\n\tdocument.cookie = `${name}=${encodeURIComponent(JSON.stringify(value))};expires=${date.toUTCString()};path=/`;\r\n}\r\n\r\nexport default {\r\n\r\n\tgetCookie,\r\n\r\n\tsetCookie\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport Vue from \"vue\";\r\n\r\n/**\r\n * Replaces params in a string.\r\n *\r\n * @param {String} string\r\n * @param {Array} params\r\n *\r\n * @returns {*}\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function replace(string, params = [])\r\n{\r\n\tfor (let i = 0; i < params.length; i++)\r\n\t\tstring = string.replace(new RegExp(`@${i}`, 'g'), params[i]);\r\n\r\n\treturn string;\r\n}\r\n\r\n/**\r\n * Translates a string.\r\n *\r\n * @param {String} domain\r\n * @param {String} string\r\n * @param {Array} params\r\n *\r\n * @returns {String}\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function translate(domain, string, params = [])\r\n{\r\n\tconst translations = window.LatteI18n || {};\r\n\r\n\tif (translations === null || typeof translations[domain] === \"undefined\" || typeof translations[domain][string] === \"undefined\")\r\n\t\treturn replace(string, params);\r\n\r\n\treturn replace(translations[domain][string], params);\r\n}\r\n\r\nVue.filter(\"i18n\", (value, domain = \"root\", ...params) => Latte.i18n.translate(domain, value, params));\r\n\r\nexport default {\r\n\r\n\treplace,\r\n\r\n\ttranslate\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function defaultOnUpdateHandler(value)\r\n{\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { defaultOnUpdateHandler } from \"./easing\";\r\nimport { raf } from \"./util/dom\";\r\n\r\nfunction currentTime()\r\n{\r\n\treturn Date.now();\r\n}\r\n\r\nconst timeConstant = 325;\r\n\r\nexport class Velocity\r\n{\r\n\r\n\tconstructor(vp1 = 0.8, vp2 = 0.2)\r\n\t{\r\n\t\tthis.onUpdate = defaultOnUpdateHandler;\r\n\r\n\t\tthis.amplitude = undefined;\r\n\t\tthis.frame = undefined;\r\n\t\tthis.max = undefined;\r\n\t\tthis.min = undefined;\r\n\t\tthis.offset = 0;\r\n\t\tthis.reference = undefined;\r\n\t\tthis.target = 0;\r\n\t\tthis.time = 0;\r\n\t\tthis.velocity = undefined;\r\n\t\tthis.vp1 = vp1;\r\n\t\tthis.vp2 = vp2;\r\n\r\n\t\tthis.updateInterval = 0;\r\n\t}\r\n\r\n\tmove(value)\r\n\t{\r\n\t\tconst delta = this.reference - value;\r\n\r\n\t\tif (delta > 2 || delta < -2)\r\n\t\t{\r\n\t\t\tthis.reference = value;\r\n\t\t\tthis.updateValue(this.offset + delta);\r\n\t\t}\r\n\t}\r\n\r\n\tstart(value)\r\n\t{\r\n\t\tthis.reference = value;\r\n\t\tthis.amplitude = 0;\r\n\t\tthis.velocity = 0;\r\n\t\tthis.frame = this.offset;\r\n\t\tthis.time = currentTime();\r\n\r\n\t\tif (this.updateInterval !== 0)\r\n\t\t\tclearInterval(this.updateInterval);\r\n\r\n\t\tthis.updateInterval = setInterval(() => this.update(), 10);\r\n\t}\r\n\r\n\tstop()\r\n\t{\r\n\t\tclearInterval(this.updateInterval);\r\n\t\tthis.updateInterval = 0;\r\n\r\n\t\tif (this.velocity > 10 || this.velocity < -10)\r\n\t\t{\r\n\t\t\t// vp1: 0.8\r\n\t\t\tthis.amplitude = 0.8 * this.velocity;\r\n\t\t\tthis.target = Math.round(this.offset + this.amplitude);\r\n\t\t\tthis.time = currentTime();\r\n\r\n\t\t\traf(() => this.updateValueAuto());\r\n\t\t}\r\n\t}\r\n\r\n\tupdate()\r\n\t{\r\n\t\tconst now = currentTime();\r\n\t\tconst elapsed = now - this.time;\r\n\t\tconst delta = this.offset - this.frame;\r\n\r\n\t\tthis.frame = this.offset;\r\n\t\tthis.time = now;\r\n\r\n\t\tconst v = 1000 * delta / (1 + elapsed);\r\n\t\tthis.velocity = this.vp1 * v + this.vp2 * this.velocity;\r\n\t}\r\n\r\n\tupdateValue(value)\r\n\t{\r\n\t\tif (this.min !== undefined)\r\n\t\t\tvalue = Math.max(this.min, value);\r\n\r\n\t\tif (this.max !== undefined)\r\n\t\t\tvalue = Math.min(this.max, value);\r\n\r\n\t\tthis.offset = value;\r\n\r\n\t\tif (this.onUpdate)\r\n\t\t\tthis.onUpdate(-this.offset);\r\n\t}\r\n\r\n\tupdateValueAuto()\r\n\t{\r\n\t\tif (this.amplitude === undefined)\r\n\t\t\treturn;\r\n\r\n\t\tconst elapsed = currentTime() - this.time;\r\n\t\tconst delta = -this.amplitude * Math.exp(-elapsed / timeConstant);\r\n\r\n\t\tif (delta > 0.5 || delta < -0.5)\r\n\t\t{\r\n\t\t\tthis.updateValue(this.target + delta);\r\n\t\t\traf(() => this.updateValueAuto());\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.updateValue(this.target);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { Velocity } from \"./velocity\";\r\n\r\nexport function clamp(value, min, max)\r\n{\r\n\treturn Math.min(Math.max(val, min), max);\r\n}\r\n\r\nexport function pseudoRandom(seed)\r\n{\r\n\tconst x = Math.sin(seed) * 10000;\r\n\r\n\treturn x - Math.floor(x);\r\n}\r\n\r\nexport function pythagorean(a, b)\r\n{\r\n\treturn Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));\r\n}\r\n\r\nexport default {\r\n\r\n\tclamp,\r\n\r\n\tpythagorean,\r\n\r\n\tVelocity\r\n\r\n};\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\n/**\r\n * Implementation of the <=> operator.\r\n *\r\n * @param {*} a\r\n * @param {*} b\r\n *\r\n * @returns {Number|null}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function spaceship(a, b)\r\n{\r\n\tif ((a === null || b === null) || typeof a !== typeof b)\r\n\t\treturn null;\r\n\r\n\tif (typeof a === \"string\")\r\n\t\treturn a.localeCompare(b);\r\n\r\n\tif (a > b)\r\n\t\treturn 1;\r\n\telse if (a < b)\r\n\t\treturn -1;\r\n\r\n\treturn 0;\r\n}\r\n\r\nexport default {\r\n\r\n\tspaceship\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nlet currentZ = 2000;\r\n\r\n/**\r\n * Generates a z-value to be used with z-index.\r\n *\r\n * @param {Function} fn\r\n *\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function needsZIndex(fn)\r\n{\r\n\tfn(currentZ);\r\n\tcurrentZ++;\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { createElement, raf } from \"../util/dom\";\r\nimport { spaceship } from \"../operators\";\r\nimport { translate } from \"../i18n\";\r\nimport { needsZIndex } from \"../z\";\r\n\r\nexport const Buttons = {\r\n\tOK: 1,\r\n\tCANCEL: 2,\r\n\tYES: 4,\r\n\tNO: 8,\r\n\tUPDATE: 16,\r\n\tSAVE: 32,\r\n\tREMOVE: 64,\r\n\tCREATE: 128,\r\n\tGO: 256,\r\n\tPROCEED: 512,\r\n\tALLOW: 1024,\r\n\tDENY: 2048\r\n};\r\n\r\nexport const ButtonsDescribed = [\r\n\t{id: Buttons.OK, icon: \"check-circle\", label: \"OK\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.CANCEL, icon: null, label: \"Cancel\", classes: [\"btn-text\", \"btn-dark\"], weight: 0},\r\n\t{id: Buttons.YES, icon: \"check-circle\", label: \"Yes\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.NO, icon: null, label: \"No\", classes: [\"btn-text\", \"btn-dark\"], weight: 0},\r\n\t{id: Buttons.UPDATE, icon: \"check-circle\", label: \"Update\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.SAVE, icon: \"check-circle\", label: \"Save\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.REMOVE, icon: \"alert-circle\", label: \"Remove\", classes: [\"btn-contained\", \"btn-error\"], weight: 1},\r\n\t{id: Buttons.CREATE, icon: \"check-circle\", label: \"Create\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.GO, icon: \"arrow-right-bold-circle\", label: \"Go\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.PROCEED, icon: \"arrow-right-bold-circle\", label: \"Proceed\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.ALLOW, icon: \"check-circle\", label: \"Allow\", classes: [\"btn-contained\", \"btn-primary\"], weight: 1},\r\n\t{id: Buttons.DENY, icon: \"close-circle\", label: \"Deny\", classes: [\"btn-text\", \"btn-dark\"], weight: 0}\r\n];\r\n\r\nexport function createMessage(title, message, buttons, prompt = false)\r\n{\r\n\treturn new Promise(resolve =>\r\n\t{\r\n\t\tconst overlay = createElement(\"div\", el => el.classList.add(\"latte-overlay\", \"is-visible\"));\r\n\t\tconst panel = createElement(\"div\", el =>\r\n\t\t{\r\n\t\t\tel.classList.add(\"panel\");\r\n\t\t\tel.style.setProperty(\"width\", \"540px\");\r\n\t\t});\r\n\t\tconst panelTitle = createElement(\"div\", el => el.classList.add(\"panel-header\"));\r\n\t\tconst panelContent = createElement(\"div\", el => el.classList.add(\"panel-body\"));\r\n\t\tconst panelFooter = createElement(\"div\", el => el.classList.add(\"panel-footer\", \"justify-content-end\"));\r\n\r\n\t\tneedsZIndex(z => overlay.style.setProperty(\"z-index\", z));\r\n\r\n\t\toverlay.setAttribute(\"role\", \"dialog\");\r\n\r\n\t\tlet promptInput;\r\n\r\n\t\tbuttons = buttonsToButtons(buttons);\r\n\r\n\t\tpanelTitle.appendChild(createElement(\"span\", span =>\r\n\t\t{\r\n\t\t\tspan.classList.add(\"panel-title\");\r\n\t\t\tspan.innerHTML = title;\r\n\t\t}));\r\n\t\tpanelContent.appendChild(createElement(\"p\", p => p.innerHTML = message));\r\n\r\n\t\tif (prompt)\r\n\t\t{\r\n\t\t\tconst formGroup = createElement(\"div\", el => el.classList.add(\"form-group\", \"mb-0\"));\r\n\r\n\t\t\tpromptInput = createElement(\"input\", el =>\r\n\t\t\t{\r\n\t\t\t\tel.classList.add(\"form-control\");\r\n\t\t\t\tel.setAttribute(\"type\", \"text\");\r\n\t\t\t\tformGroup.appendChild(el);\r\n\t\t\t});\r\n\r\n\t\t\tpanelContent.appendChild(formGroup);\r\n\t\t}\r\n\r\n\t\tfor (const i in buttons)\r\n\t\t{\r\n\t\t\tconst button = buttons[i];\r\n\t\t\tconst el = createElement(\"button\", el => el.classList.add(\"btn\", \"btn-contained\", ...button.classes));\r\n\r\n\t\t\tif (button.icon !== null)\r\n\t\t\t\tel.appendChild(createElement(\"i\", i => i.classList.add(\"mdi\", `mdi-${button.icon}`)));\r\n\r\n\t\t\tel.appendChild(createElement(\"span\", span => span.innerHTML = button.label));\r\n\r\n\t\t\tel.addEventListener(\"click\", () =>\r\n\t\t\t{\r\n\t\t\t\traf(() => overlay.classList.remove(\"is-open\"));\r\n\t\t\t\traf(() => overlay.classList.remove(\"is-visible\"), 270);\r\n\r\n\t\t\t\tLatte.actions.dispatch(\"latte:overlay\", {overlay, open: false});\r\n\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tbutton: button.id,\r\n\t\t\t\t\tinput: (prompt ? promptInput.value : undefined)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tpanelFooter.appendChild(el);\r\n\t\t}\r\n\r\n\t\tpanel.appendChild(panelTitle);\r\n\t\tpanel.appendChild(panelContent);\r\n\t\tpanel.appendChild(panelFooter);\r\n\r\n\t\toverlay.appendChild(panel);\r\n\r\n\t\tdocument.body.appendChild(overlay);\r\n\r\n\t\tLatte.actions.dispatch(\"latte:overlay\", {overlay, open: true});\r\n\r\n\t\traf(() =>\r\n\t\t{\r\n\t\t\toverlay.classList.add(\"is-visible\");\r\n\r\n\t\t\traf(() => overlay.classList.add(\"is-open\"));\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function alert(title, message)\r\n{\r\n\treturn createMessage(title, message, Buttons.OK);\r\n}\r\n\r\nexport function confirm(title, message)\r\n{\r\n\treturn createMessage(title, message, Buttons.OK | Buttons.CANCEL);\r\n}\r\n\r\nexport function prompt(title, message)\r\n{\r\n\treturn createMessage(title, message, Buttons.OK | Buttons.CANCEL, true);\r\n}\r\n\r\nfunction buttonsToButtons(buttons)\r\n{\r\n\tlet actualButtons = [];\r\n\r\n\tfor (let i in ButtonsDescribed)\r\n\t\tif (ButtonsDescribed.hasOwnProperty(i))\r\n\t\t\tif ((buttons & ButtonsDescribed[i].id) === ButtonsDescribed[i].id)\r\n\t\t\t\tactualButtons.push(ButtonsDescribed[i]);\r\n\r\n\tactualButtons = actualButtons.sort((a, b) => spaceship(a.weight, b.weight));\r\n\tactualButtons.forEach(button => button.label = translate(\"root\", button.label));\r\n\r\n\treturn actualButtons;\r\n}\r\n\r\nexport default {\r\n\r\n\tButtons,\r\n\r\n\tButtonsDescribed,\r\n\r\n\tcreateMessage,\r\n\r\n\talert,\r\n\r\n\tconfirm,\r\n\r\n\tprompt\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { on } from \"../actions.js\";\r\nimport { id } from \"../api.js\"\r\nimport { isIterable } from \"../core.js\";\r\n\r\nexport function initializeNotices()\r\n{\r\n\tlet notices = Array.from(document.querySelectorAll(\"div.notice\"));\r\n\tnotices = notices.filter(notice => notice.querySelector(\"button.notice-dismiss\") !== null);\r\n\tnotices = notices.map(notice => notice.querySelector(\"button.notice-dismiss\"));\r\n\r\n\tnotices.forEach(dismissButton => dismissButton.addEventListener(\"click\", () => dismissButton.parentNode.parentNode.removeChild(dismissButton.parentNode)));\r\n\r\n\ton(\"latte:notice\", data => create(decodeURIComponent(data.message), data.type || \"info\"));\r\n}\r\n\r\nexport function areEntitiesNotices(entities)\r\n{\r\n\tif (!isIterable(entities))\r\n\t\treturn false;\r\n\r\n\tfor (let i in entities)\r\n\t\tif (entities.hasOwnProperty(i))\r\n\t\t\tif (!isEntityNotice(entities[i]))\r\n\t\t\t\treturn false;\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function create(message, type, dismissible = true)\r\n{\r\n\tconst noticeId = id();\r\n\r\n\tconst notice = document.createElement(\"div\");\r\n\tnotice.classList.add(\"notice\", `notice-${type}`);\r\n\tnotice.setAttribute(\"id\", noticeId);\r\n\r\n\tconst p = document.createElement(\"p\");\r\n\tp.innerHTML = message;\r\n\r\n\tnotice.appendChild(p);\r\n\r\n\tif (dismissible)\r\n\t{\r\n\t\tconst dismiss = document.createElement(\"button\");\r\n\t\tdismiss.classList.add(\"btn\", \"btn-text\", \"btn-icon\", \"notice-dismiss\");\r\n\r\n\t\tconst icon = document.createElement(\"i\");\r\n\t\ticon.classList.add(\"mdi\", \"mdi-close\");\r\n\r\n\t\tdismiss.appendChild(icon);\r\n\t\tdismiss.addEventListener(\"click\", () => remove(noticeId), {passive: true});\r\n\r\n\t\tnotice.appendChild(dismiss);\r\n\t}\r\n\r\n\tconst content = document.querySelector(\"main#app > div.content\");\r\n\r\n\tcontent.insertBefore(notice, content.querySelector(\":scope > *:first-child\"));\r\n\r\n\treturn noticeId;\r\n}\r\n\r\n// This method is used in Latte Framework.\r\nexport function isEntityNotice(entity)\r\n{\r\n\treturn entity[\"@type\"] === \"Latte\\\\Data\\\\Model\\\\Notice\";\r\n}\r\n\r\nexport function remove(noticeId)\r\n{\r\n\tconst notice = document.querySelector(`div.notice#${noticeId}`);\r\n\tnotice.parentNode.removeChild(notice);\r\n}\r\n\r\nexport default {\r\n\r\n\tareEntitiesNotices,\r\n\r\n\tcreate,\r\n\r\n\tisEntityNotice,\r\n\r\n\tremove\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet registry = {};\r\n\r\nexport function close(name)\r\n{\r\n\tlet overlay = find(name);\r\n\toverlay.close();\r\n}\r\n\r\nexport function find(name)\r\n{\r\n\tif (typeof registry[name] === \"undefined\")\r\n\t\tthrow new Error(`Overlay ${name} is not registred!`);\r\n\r\n\treturn registry[name];\r\n}\r\n\r\nexport function open(name)\r\n{\r\n\tlet overlay = find(name);\r\n\toverlay.open();\r\n}\r\n\r\nexport function register(name, overlay)\r\n{\r\n\tregistry[name] = overlay;\r\n}\r\n\r\nexport function remove(name)\r\n{\r\n\tdelete registry[name];\r\n}\r\n\r\nexport default {\r\n\r\n\tclose,\r\n\r\n\tfind,\r\n\r\n\topen,\r\n\r\n\tregister,\r\n\r\n\tremove\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function initializePanels()\r\n{\r\n\tdocument.querySelectorAll(\"div.panel > table\").forEach(t => t.parentNode.classList.add(\"panel-table\"));\r\n\tdocument.querySelectorAll(\"div.panel.panel-toggleable\").forEach(panel => initializePanel(panel));\r\n}\r\n\r\nexport function initializePanel(panel)\r\n{\r\n\tconst header = panel.querySelector(\"div.panel-header\");\r\n\r\n\tif (header === null)\r\n\t\treturn;\r\n\r\n\tconst hasRightItems = header.querySelectorAll(\".ml-auto\").length > 0;\r\n\r\n\tconst toggle = document.createElement(\"button\");\r\n\ttoggle.setAttribute(\"type\", \"button\");\r\n\ttoggle.classList.add(\"panel-toggle\", \"btn\", \"btn-text\", \"btn-icon\", \"btn-dark\");\r\n\r\n\tif (!hasRightItems)\r\n\t\ttoggle.classList.add(\"ml-auto\");\r\n\r\n\ttoggle.innerHTML = '<i class=\"mdi mdi-chevron-down\"></i>';\r\n\r\n\theader.appendChild(toggle);\r\n\r\n\tif (panel.classList.contains(\"is-open\"))\r\n\t\topen(panel);\r\n\telse\r\n\t\tclose(panel);\r\n\r\n\ttoggle.addEventListener(\"click\", () =>\r\n\t{\r\n\t\tif (panel.classList.contains(\"is-open\"))\r\n\t\t\tclose(panel);\r\n\t\telse\r\n\t\t\topen(panel);\r\n\t});\r\n}\r\n\r\nexport function close(panel)\r\n{\r\n\tlet p = panel;\r\n\r\n\tif (p.querySelector(\":scope > form\") !== null)\r\n\t\tp = p.querySelector(\":scope > form\");\r\n\r\n\tconst hidableItems = p.querySelectorAll(\":scope > div:not(.panel-header)\");\r\n\tfor (let i = 0; i < hidableItems.length; i++)\r\n\t\thidableItems.item(i).classList.add(\"d-none\");\r\n\r\n\tconst toggle = p.querySelector(\"div.panel-header > button.panel-toggle\");\r\n\ttoggle.querySelector(\"i.mdi\").classList.remove(\"mdi-rotate-180\");\r\n\r\n\tpanel.classList.add(\"is-closed\");\r\n\tpanel.classList.remove(\"is-open\");\r\n}\r\n\r\nexport function open(panel)\r\n{\r\n\tlet p = panel;\r\n\r\n\tif (p.querySelector(\":scope > form\") !== null)\r\n\t\tp = p.querySelector(\":scope > form\");\r\n\r\n\tconst hidableItems = p.querySelectorAll(\":scope > div:not(.panel-header)\");\r\n\tfor (let i = 0; i < hidableItems.length; i++)\r\n\t\thidableItems.item(i).classList.remove(\"d-none\");\r\n\r\n\tconst toggle = p.querySelector(\"div.panel-header > button.panel-toggle\");\r\n\ttoggle.querySelector(\"i.mdi\").classList.add(\"mdi-rotate-180\");\r\n\r\n\tpanel.classList.remove(\"is-closed\");\r\n\tpanel.classList.add(\"is-open\");\r\n}\r\n\r\nexport default {\r\n\r\n\tclose,\r\n\r\n\tinitializePanel,\r\n\r\n\topen\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n/**\r\n * Implodes commas between strings and replaces the last comma with an &.\r\n *\r\n * @param {String[]} strs\r\n *\r\n * @return {String}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function commaCommaAnd(strs)\r\n{\r\n\treturn strs.join(\", \").replace(/(.*),/, \"$1 &\");\r\n}\r\n\r\n/**\r\n * Returns TRUE if {@see str} is undefined, NULL or contains only whitespace.\r\n *\r\n * @param {String} str\r\n *\r\n * @returns {Boolean}\r\n * @author Bas Milius <bas@mili.us>\r\n * @since 1.0.0\r\n */\r\nexport function isNullOrWhitespace(str)\r\n{\r\n\tif (typeof str === \"undefined\" || str === null)\r\n\t\treturn true;\r\n\r\n\treturn str.replace(/\\s/g, '').length < 1;\r\n}\r\n\r\nexport default {\r\n\r\n\tcommaCommaAnd,\r\n\r\n\tisNullOrWhitespace\r\n\r\n};\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport Vue from \"vue\";\r\n\r\nimport actions from \"./actions\";\r\nimport api from \"./api\";\r\nimport clipboard from \"./util/clipboard\";\r\nimport cookie from \"./util/cookies\";\r\nimport core from \"./core\";\r\nimport dom from \"./util/dom\";\r\nimport i18n from \"./i18n\";\r\nimport json from \"./util/json\";\r\nimport math from \"./math\";\r\nimport messages from \"./ui/messages\";\r\nimport notices from \"./ui/notices\";\r\nimport operators from \"./operators\";\r\nimport overlays from \"./ui/overlays\";\r\nimport panels from \"./ui/panels\";\r\nimport string from \"./util/string\";\r\n\r\nimport pkg from \"../../package.json\";\r\n\r\nexport default {\r\n\tauthor: pkg.author,\r\n\tdescription: pkg.description,\r\n\tname: pkg.name,\r\n\tversion: pkg.version,\r\n\r\n\tactions,\r\n\tapi,\r\n\tclipboard,\r\n\tcookie,\r\n\tcore,\r\n\tdom,\r\n\ti18n,\r\n\tjson,\r\n\tmath,\r\n\tmessages,\r\n\tnotices,\r\n\toperators,\r\n\toverlays,\r\n\tpanels,\r\n\tstring,\r\n\tvue: Vue\r\n};\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function isJson(str)\r\n{\r\n\ttry\r\n\t{\r\n\t\tJSON.parse(str);\r\n\r\n\t\treturn true;\r\n\t}\r\n\tcatch(err)\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport default {\r\n\r\n\tisJson\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { getLattePath } from \"./util/dom\";\r\n\r\nfunction registerCSSPaintWorklets()\r\n{\r\n\tCSS.paintWorklet.addModule(getLattePath() + \"worklet/paint/app-bar-cutout.js\");\r\n\tCSS.paintWorklet.addModule(getLattePath() + \"worklet/paint/btn-contained-background.js\");\r\n}\r\n\r\nfunction registerCSSProperties()\r\n{\r\n\tCSS.registerProperty({\r\n\t\tname: \"--app-bar-alpha\",\r\n\t\tsyntax: \"<number>\",\r\n\t\tinherits: true,\r\n\t\tinitialValue: 1\r\n\t});\r\n\r\n\tCSS.registerProperty({\r\n\t\tname: \"--app-bar-cutout-offset\",\r\n\t\tsyntax: \"<length-percentage>\",\r\n\t\tinherits: true,\r\n\t\tinitialValue: \"50%\"\r\n\t});\r\n\r\n\tCSS.registerProperty({\r\n\t\tname: \"--btn-contained-hover-state\",\r\n\t\tsyntax: \"<number>\",\r\n\t\tinherits: false,\r\n\t\tinitialValue: 0\r\n\t});\r\n}\r\n\r\nexport function initializeHoudiniApis()\r\n{\r\n\tif (CSS && CSS.paintWorklet)\r\n\t\tregisterCSSPaintWorklets();\r\n\r\n\tif (CSS && CSS.registerProperty)\r\n\t\tregisterCSSProperties();\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexport function initializeForms()\r\n{\r\n\tdocument.querySelectorAll(`form[method=\"post\"]`).forEach(form => initializeForm(form));\r\n}\r\n\r\nfunction initializeForm(form)\r\n{\r\n\tform.addEventListener(\"submit\", onFormSubmit.bind(window, form));\r\n\tform.addEventListener(\"keyup\", onFormKeyUp.bind(window, form));\r\n}\r\n\r\nfunction onFormKeyUp(form, evt)\r\n{\r\n\tif (evt.ctrlKey !== true)\r\n\t\treturn;\r\n\r\n\tif ((evt.code || evt.key) !== \"Enter\")\r\n\t\treturn;\r\n\r\n\tonFormSubmit(form);\r\n\tform.submit();\r\n}\r\n\r\nfunction onFormSubmit(form)\r\n{\r\n\tform.querySelectorAll(\".btn[type=submit]\").forEach(btn =>\r\n\t{\r\n\t\tif (btn.classList.contains(\"btn-icon\"))\r\n\t\t\treturn;\r\n\r\n\t\tconst icon = btn.querySelector(\"i.mdi\");\r\n\r\n\t\tif (icon === null)\r\n\t\t\treturn;\r\n\r\n\t\ticon.classList.add(\"spinner\");\r\n\r\n\t\tif (btn.classList.contains(\"btn-light\"))\r\n\t\t\ticon.classList.add(\"spinner-primary\");\r\n\t\telse\r\n\t\t\ticon.classList.add(\"spinner-light\");\r\n\r\n\t\tbtn.classList.add(\"disabled\");\r\n\t});\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { createElement, live } from \"../util/dom.js\";\r\nimport { on } from \"../actions.js\";\r\nimport { raf } from \"../util/dom\";\r\n\r\nlet tooltipContained = true;\r\nlet tooltipElement = null;\r\n\r\nexport function initializeTooltips()\r\n{\r\n\ttooltipElement = createElement(\"div\", div =>\r\n\t{\r\n\t\tdiv.setAttribute(\"class\", \"tooltip is-hidden\");\r\n\r\n\t\tdocument.body.appendChild(div);\r\n\t});\r\n\r\n\tlive(document.body, \"[data-tooltip]\", \"pointerover\", (el, evt) => onTooltipElementHover(el, evt));\r\n\tlive(document.body, \"[data-tooltip]\", \"pointerout\", (el, evt) => despawnTooltip(el, evt));\r\n\r\n\ton(\"latte:tooltip\", data => spawnTooltip(data));\r\n\ton(\"latte:tooltip:hide\", () => despawnTooltip());\r\n}\r\n\r\nfunction despawnTooltip()\r\n{\r\n\ttooltipElement.classList.add(\"is-hidden\");\r\n}\r\n\r\nfunction spawnTooltip(data)\r\n{\r\n\tlet {x, y, content, position = \"vertical\"} = data;\r\n\r\n\tif (content === undefined)\r\n\t\treturn;\r\n\r\n\ttooltipElement.innerHTML = \"\";\r\n\r\n\tif (content instanceof HTMLElement)\r\n\t\ttooltipElement.appendChild(content);\r\n\telse\r\n\t\ttooltipElement.innerHTML = content;\r\n\r\n\ttooltipElement.classList.remove(...tooltipElement.classList.values());\r\n\ttooltipElement.classList.add(\"tooltip\", ...(data.classes || []));\r\n\r\n\tif (position === \"top\" || (position === \"vertical\" && y > window.innerHeight / 2))\r\n\t\ttooltipElement.classList.add(\"tooltip-top\");\r\n\r\n\tif (position === \"left\" || (position === \"horizontal\" && x > window.innerWidth / 2))\r\n\t\ttooltipElement.classList.add(\"tooltip-left\");\r\n\r\n\tif (position === \"right\" || (position === \"horizontal\" && x <= window.innerWidth / 2))\r\n\t\ttooltipElement.classList.add(\"tooltip-right\");\r\n\r\n\tif (position === \"bottom\" || (position === \"vertical\" && y <= window.innerHeight / 2))\r\n\t\ttooltipElement.classList.add(\"tooltip-bottom\");\r\n\r\n\ttooltipElement.style.removeProperty(\"--tooltip-arrow-top\");\r\n\ttooltipElement.style.removeProperty(\"--tooltip-arrow-left\");\r\n\r\n\traf(() =>\r\n\t{\r\n\t\tconst tooltipRect = tooltipElement.getBoundingClientRect();\r\n\r\n\t\tlet top = 0;\r\n\t\tlet left = 0;\r\n\t\tlet offset = 9;\r\n\r\n\t\tif (tooltipElement.classList.contains(\"tooltip-top\"))\r\n\t\t{\r\n\t\t\ttop = y - tooltipRect.height - offset;\r\n\t\t\tleft = x - (tooltipRect.width / 2);\r\n\t\t}\r\n\t\telse if (tooltipElement.classList.contains(\"tooltip-left\"))\r\n\t\t{\r\n\t\t\ttop = y - (tooltipRect.height / 2);\r\n\t\t\tleft = x - tooltipRect.width - offset;\r\n\t\t}\r\n\t\telse if (tooltipElement.classList.contains(\"tooltip-right\"))\r\n\t\t{\r\n\t\t\ttop = y - (tooltipRect.height / 2);\r\n\t\t\tleft = x + offset;\r\n\t\t}\r\n\t\telse if (tooltipElement.classList.contains(\"tooltip-bottom\"))\r\n\t\t{\r\n\t\t\ttop = y + offset;\r\n\t\t\tleft = x - (tooltipRect.width / 2);\r\n\t\t}\r\n\r\n\t\tif (data.adjustCoordinates)\r\n\t\t{\r\n\t\t\tlet coords = data.adjustCoordinates(left, top, tooltipRect);\r\n\t\t\ttop = coords.y;\r\n\t\t\tleft = coords.x;\r\n\t\t}\r\n\r\n\t\tif (tooltipContained)\r\n\t\t{\r\n\t\t\tlet adjustment = 0;\r\n\t\t\tlet offset = 12;\r\n\r\n\t\t\tif (tooltipElement.classList.contains(\"tooltip-top\") || tooltipElement.classList.contains(\"tooltip-bottom\"))\r\n\t\t\t{\r\n\t\t\t\tif (offset > left)\r\n\t\t\t\t{\r\n\t\t\t\t\tadjustment = offset - left;\r\n\t\t\t\t\tleft += adjustment;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((left + tooltipRect.width + offset) > window.innerWidth)\r\n\t\t\t\t{\r\n\t\t\t\t\tadjustment = window.innerWidth - (left + tooltipRect.width + offset);\r\n\t\t\t\t\tleft += adjustment;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (adjustment !== 0)\r\n\t\t\t\t\ttooltipElement.style.setProperty(\"--tooltip-arrow-left\", `calc((50% - .45em) - ${Math.floor(adjustment)}px)`);\r\n\t\t\t}\r\n\t\t\telse if (tooltipElement.classList.contains(\"tooltip-left\") || tooltipElement.classList.contains(\"tooltip-right\"))\r\n\t\t\t{\r\n\t\t\t\tif (offset > top)\r\n\t\t\t\t{\r\n\t\t\t\t\tadjustment = offset - top;\r\n\t\t\t\t\ttop += adjustment;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((top + tooltipRect.height + offset) > window.innerHeight)\r\n\t\t\t\t{\r\n\t\t\t\t\tadjustment = window.innerHeight - (top + tooltipRect.height + offset);\r\n\t\t\t\t\ttop += adjustment;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (adjustment !== 0)\r\n\t\t\t\t\ttooltipElement.style.setProperty(\"--tooltip-arrow-top\", `calc((50% - .45em) - ${Math.floor(adjustment)}px)`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttooltipElement.style.setProperty(\"transform\", `translate3d(${Math.round(left)}px, ${Math.round(top)}px, 0)`);\r\n\t});\r\n}\r\n\r\nfunction onTooltipElementHover(el)\r\n{\r\n\tconst str = el.dataset.tooltip;\r\n\tconst classes = el.dataset.tooltipClass || \"tooltip-bottom\";\r\n\r\n\tif (str.trim() === \"\")\r\n\t\treturn;\r\n\r\n\tif (el.classList.contains(\"tooltip-disabled\"))\r\n\t\treturn;\r\n\r\n\tconst pos = el.getBoundingClientRect();\r\n\r\n\tspawnTooltip({\r\n\t\tx: pos.left + (pos.width / 2),\r\n\t\ty: pos.top + (pos.height / 2),\r\n\t\tclasses: classes.split(\" \"),\r\n\t\tcontent: str,\r\n\t\tposition: null,\r\n\r\n\t\tadjustCoordinates(x, y)\r\n\t\t{\r\n\t\t\tif (tooltipElement.classList.contains(\"tooltip-top\"))\r\n\t\t\t\ty -= pos.height / 2;\r\n\t\t\telse if (tooltipElement.classList.contains(\"tooltip-left\"))\r\n\t\t\t\tx -= pos.width / 2;\r\n\t\t\telse if (tooltipElement.classList.contains(\"tooltip-right\"))\r\n\t\t\t\tx += pos.width / 2;\r\n\t\t\telse if (tooltipElement.classList.contains(\"tooltip-bottom\"))\r\n\t\t\t\ty += pos.height / 2;\r\n\r\n\t\t\treturn {x, y};\r\n\t\t}\r\n\t});\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { closest } from \"../util/dom\";\r\n\r\nclass OutsideEvent\r\n{\r\n\r\n\tconstructor(source)\r\n\t{\r\n\t\tthis.listeners = [];\r\n\t\tthis.source = source;\r\n\t}\r\n\r\n\taddEventListener(type, listener, options = {})\r\n\t{\r\n\t\tlistener.id = this.listeners.length;\r\n\r\n\t\tthis.listeners.push(listener);\r\n\r\n\t\tconst fn = evt =>\r\n\t\t{\r\n\t\t\tif (this.isWithinSource(evt))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tlistener(evt);\r\n\t\t};\r\n\r\n\t\tdocument.addEventListener(type, fn, options);\r\n\t}\r\n\r\n\tremoveEventListener(type, listener, options = {})\r\n\t{\r\n\t\tconst index = this.listeners.findIndex(l => l.id === listener.id);\r\n\r\n\t\tif (index === -1)\r\n\t\t\treturn;\r\n\r\n\t\tdocument.removeEventListener(type, this.listeners[index], options);\r\n\r\n\t\tthis.listeners.splice(index, 1);\r\n\t}\r\n\r\n\tisWithinSource(evt)\r\n\t{\r\n\t\tif (evt.pageX === undefined)\r\n\t\t\treturn false;\r\n\r\n\t\tconst documentElement = document.scrollingElement;\r\n\t\tconst element = document.elementFromPoint(evt.pageX - documentElement.scrollLeft, evt.pageY - documentElement.scrollTop);\r\n\r\n\t\treturn closest(element, this.source) !== null;\r\n\t}\r\n\r\n}\r\n\r\nexport function registerOutsideEvents()\r\n{\r\n\tEventTarget.prototype.addOutsideEventListener = function (type, listener, options = {})\r\n\t{\r\n\t\tif (this.outsideEvent === undefined)\r\n\t\t\tthis.outsideEvent = new OutsideEvent(this);\r\n\r\n\t\tthis.outsideEvent.addEventListener(type, listener, options);\r\n\t};\r\n\r\n\tEventTarget.prototype.removeOutsideEventListener = function (type, listener, options = {})\r\n\t{\r\n\t\tif (this.outsideEvent === undefined)\r\n\t\t\tthis.outsideEvent = new OutsideEvent(this);\r\n\r\n\t\tthis.outsideEvent.removeEventListener(type, listener, options);\r\n\t};\r\n}\r\n","'use strict';\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function () {\n      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n\nmodule.exports = normalizeComponent;\n//# sourceMappingURL=normalize-component.js.map\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<template>\r\n\r\n\t<div class=\"latte-autocomplete\">\r\n\t\t<div class=\"form-control\" :disabled=\"disabled\">\r\n\r\n\t\t\t<template v-for=\"selection in values\">\r\n\r\n\t\t\t\t<slot name=\"selection\" v-bind=\"selection\">\r\n\r\n\t\t\t\t\t<span class=\"badge badge-primary\">\r\n\t\t\t\t\t\t<span>{{ selection.label }}</span>\r\n\t\t\t\t\t\t<button class=\"btn\" @click=\"selection.remove()\"><i class=\"mdi mdi-window-close\"></i></button>\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t</slot>\r\n\r\n\t\t\t</template>\r\n\r\n\t\t\t<input type=\"search\" :name=\"name\" class=\"form-control\" ref=\"field\" :placeholder=\"placeholder\" autocomplete=\"false\" @focus=\"onFocus\" v-model=\"searchTerm\" @keydown.delete=\"onKeyPressDelete\" @keydown.enter=\"onSelectSuggestion\" @keydown.tab=\"onSelectFirstSuggestion\" @keydown.down=\"onKeyPressDown\" @keydown.up=\"onKeyPressUp\" v-if=\"canSearch\"/>\r\n\r\n\t\t</div>\r\n\t\t<div class=\"dropdown\" :class=\"{'is-open': shouldOpenSuggestions}\" role=\"combobox\">\r\n\t\t\t<nav class=\"nav nav-list\">\r\n\r\n\t\t\t\t<template v-for=\"(suggestion, index) in suggestionsFiltered\">\r\n\r\n\t\t\t\t\t<a class=\"nav-link\" :class=\"{'is-hover': currentSuggestion === index}\" @pointermove.passive=\"currentSuggestion = index\" @click=\"onSelectSuggestion\" role=\"option\">\r\n\r\n\t\t\t\t\t\t<slot name=\"suggestion\" v-bind=\"suggestion\">\r\n\r\n\t\t\t\t\t\t\t<div class=\"flex-grow-1\" v-if=\"suggestion.sub_label\">\r\n\t\t\t\t\t\t\t\t<span>{{ suggestion.label }}</span>\r\n\t\t\t\t\t\t\t\t<span class=\"text-soft\">{{ suggestion.sub_label }}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<span v-else>{{ suggestion.label }}</span>\r\n\r\n\t\t\t\t\t\t\t<i class=\"mdi mdi-chevron-right\"></i>\r\n\r\n\t\t\t\t\t\t</slot>\r\n\r\n\t\t\t\t\t</a>\r\n\r\n\t\t\t\t</template>\r\n\r\n\t\t\t</nav>\r\n\t\t</div>\r\n\t\t<span class=\"spinner spinner-primary\" v-if=\"isLoading\"></span>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\timport { id, request } from \"../../js/api\";\r\n\r\n\tfunction areArraysEqual(a, b)\r\n\t{\r\n\t\tif (a.length !== b.length)\r\n\t\t\treturn false;\r\n\r\n\t\tfor (let i = 0; i < a.length; i++)\r\n\t\t\tif (a[i] !== b[i])\r\n\t\t\t\treturn false;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-autocomplete\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\tdefaultValue: {\r\n\t\t\t\tdefault: undefined,\r\n\t\t\t\trequired: false\r\n\t\t\t},\r\n\r\n\t\t\tdisabled: {\r\n\t\t\t\tdefault: false,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tlimit: {\r\n\t\t\t\tdefault: 5,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\tmultiSelect: {\r\n\t\t\t\tdefault: false,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tname: {\r\n\t\t\t\tdefault: id(),\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\r\n\t\t\toffset: {\r\n\t\t\t\tdefault: 0,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\tplaceholder: {\r\n\t\t\t\tdefault: \"Search...\",\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\r\n\t\t\turl: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\r\n\t\t\tvalue: {\r\n\t\t\t\tdefault: () => [],\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Array | Number\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tbeforeDestroy()\r\n\t\t{\r\n\t\t\tthis.$el.removeOutsideEventListener(\"click\", this.onBlur);\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tabortController: null,\r\n\t\t\t\tcanEmit: true,\r\n\t\t\t\tcanOpen: false,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tcurrentSuggestion: -1,\r\n\t\t\t\tsearchTerm: \"\",\r\n\t\t\t\tsuggestions: [],\r\n\t\t\t\tvalueLast: [],\r\n\t\t\t\tvalues: []\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tthis.$el.addOutsideEventListener(\"click\", this.onBlur);\r\n\t\t\tthis.onValueChanged();\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\tcanSearch()\r\n\t\t\t{\r\n\t\t\t\treturn this.multiSelect || this.values.length === 0;\r\n\t\t\t},\r\n\r\n\t\t\tshouldOpenSuggestions()\r\n\t\t\t{\r\n\t\t\t\treturn this.canOpen && this.suggestionsFiltered.length > 0;\r\n\t\t\t},\r\n\r\n\t\t\tsuggestionsFiltered()\r\n\t\t\t{\r\n\t\t\t\treturn this.suggestions.filter(s => this.values.filter(v => v.label === s.label && v.value === s.value).length === 0);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\taddValue(label, value)\r\n\t\t\t{\r\n\t\t\t\tif (label === undefined || value === undefined)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.values.filter(v => v.value === value && v.label === label).length > 0)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst remove = () => this.removeValue(value);\r\n\r\n\t\t\t\tthis.values.push({label, remove, value});\r\n\t\t\t},\r\n\r\n\t\t\tremoveValue(value)\r\n\t\t\t{\r\n\t\t\t\tthis.values = this.values.filter(v => v.value !== value);\r\n\t\t\t},\r\n\r\n\t\t\tonBlur()\r\n\t\t\t{\r\n\t\t\t\tthis.canOpen = false;\r\n\t\t\t},\r\n\r\n\t\t\tonFocus()\r\n\t\t\t{\r\n\t\t\t\tthis.suggestions = [];\r\n\t\t\t\tthis.canOpen = true;\r\n\t\t\t},\r\n\r\n\t\t\tonSelectSuggestion()\r\n\t\t\t{\r\n\t\t\t\tif (!this.suggestionsFiltered[this.currentSuggestion])\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst {label, value} = this.suggestionsFiltered[this.currentSuggestion];\r\n\r\n\t\t\t\tthis.addValue(label, value);\r\n\t\t\t\tthis.canOpen = false;\r\n\t\t\t\tthis.searchTerm = \"\";\r\n\t\t\t},\r\n\r\n\t\t\tonSelectFirstSuggestion(evt)\r\n\t\t\t{\r\n\t\t\t\tif (this.suggestions.length === 0 || !this.shouldOpenSuggestions)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.currentSuggestion === -1)\r\n\t\t\t\t\tthis.onKeyPressDown();\r\n\r\n\t\t\t\tthis.onSelectSuggestion();\r\n\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t},\r\n\r\n\t\t\tonKeyPressDelete()\r\n\t\t\t{\r\n\t\t\t\tif (this.searchTerm !== \"\")\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.values.pop();\r\n\t\t\t},\r\n\r\n\t\t\tonKeyPressDown()\r\n\t\t\t{\r\n\t\t\t\tif (this.currentSuggestion + 1 >= this.suggestions.length)\r\n\t\t\t\t\tthis.currentSuggestion = -1;\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.currentSuggestion++;\r\n\t\t\t},\r\n\r\n\t\t\tonKeyPressUp()\r\n\t\t\t{\r\n\t\t\t\tif (this.currentSuggestion - 1 < -1)\r\n\t\t\t\t\tthis.currentSuggestion = this.suggestions.length - 1;\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.currentSuggestion--;\r\n\t\t\t},\r\n\r\n\t\t\tonReceiveSuggestions(response)\r\n\t\t\t{\r\n\t\t\t\tthis.abortController = null;\r\n\t\t\t\tthis.canOpen = true;\r\n\t\t\t\tthis.currentSuggestion = -1;\r\n\t\t\t\tthis.suggestions = response.data;\r\n\t\t\t},\r\n\r\n\t\t\tonReceiveValues(response)\r\n\t\t\t{\r\n\t\t\t\tresponse.data.forEach(v => this.addValue(v.label, v.value));\r\n\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t},\r\n\r\n\t\t\tonSearchTermChanged()\r\n\t\t\t{\r\n\t\t\t\tif (this.searchTerm.trim() === \"\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.currentSuggestion = -1;\r\n\t\t\t\t\tthis.canOpen = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.abortController !== null)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.abortController.abort();\r\n\t\t\t\t\tthis.abortController = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.abortController = new AbortController();\r\n\r\n\t\t\t\trequest(`${this.url}?q=${encodeURIComponent(this.searchTerm.toLowerCase())}`, {cache: \"no-cache\", signal: this.signal})\r\n\t\t\t\t\t.then(r => r.json())\r\n\t\t\t\t\t.then(r => this.onReceiveSuggestions(r))\r\n\t\t\t\t\t.catch(err => console.error(err));\r\n\t\t\t},\r\n\r\n\t\t\tonValueChanged()\r\n\t\t\t{\r\n\t\t\t\tlet value = this.multiSelect ? this.value : [this.value];\r\n\t\t\t\tvalue = value.filter ? value.filter(v => v > 0) : value;\r\n\r\n\t\t\t\tif (value.length === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.values = [];\r\n\t\t\t\t\tthis.valueLast = [];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (areArraysEqual(value, this.valueLast))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.isLoading)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.isLoading = true;\r\n\r\n\t\t\t\trequest(`${this.url}?ids=${value.join(\",\")}`)\r\n\t\t\t\t\t.then(r => r.json())\r\n\t\t\t\t\t.then(r => this.onReceiveValues(r))\r\n\t\t\t\t\t.catch(err => console.error(err));\r\n\r\n\t\t\t\tthis.valueLast = value;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\tshouldOpenSuggestions()\r\n\t\t\t{\r\n\t\t\t\tthis.currentSuggestion = -1;\r\n\t\t\t},\r\n\r\n\t\t\tsearchTerm()\r\n\t\t\t{\r\n\t\t\t\tthis.onSearchTermChanged();\r\n\t\t\t},\r\n\r\n\t\t\tvalue()\r\n\t\t\t{\r\n\t\t\t\tthis.canEmit = false;\r\n\t\t\t\tthis.onValueChanged();\r\n\t\t\t},\r\n\r\n\t\t\tvalues()\r\n\t\t\t{\r\n\t\t\t\tif (this.canEmit === false)\r\n\t\t\t\t\treturn this.canEmit = true;\r\n\r\n\t\t\t\tlet values = this.values.map(v => v.value);\r\n\t\t\t\tthis.$emit(\"input\", (this.multiSelect ? values : values[0]) || this.defaultValue);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n</script>\r\n","'use strict';\n\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n  return function (id, style) {\n    return addStyle(id, style);\n  };\n}\nvar HEAD = document.head || document.getElementsByTagName('head')[0];\nvar styles = {};\n\nfunction addStyle(id, css) {\n  var group = isOldIE ? css.media || 'default' : id;\n  var style = styles[group] || (styles[group] = {\n    ids: new Set(),\n    styles: []\n  });\n\n  if (!style.ids.has(id)) {\n    style.ids.add(id);\n    var code = css.source;\n\n    if (css.map) {\n      // https://developer.chrome.com/devtools/docs/javascript-debugging\n      // this makes source maps inside style tags work properly in Chrome\n      code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n      code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n    }\n\n    if (!style.element) {\n      style.element = document.createElement('style');\n      style.element.type = 'text/css';\n      if (css.media) style.element.setAttribute('media', css.media);\n      HEAD.appendChild(style.element);\n    }\n\n    if ('styleSheet' in style.element) {\n      style.styles.push(code);\n      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n    } else {\n      var index = style.ids.size - 1;\n      var textNode = document.createTextNode(code);\n      var nodes = style.element.childNodes;\n      if (nodes[index]) style.element.removeChild(nodes[index]);\n      if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n    }\n  }\n}\n\nmodule.exports = createInjector;\n//# sourceMappingURL=browser.js.map\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<script>\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-draggable\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\toptions: Object,\r\n\r\n\t\t\tlist: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\trequired: false,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\r\n\t\t\tvalue: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\trequired: false,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\r\n\t\t\tnoTransitionOnDrag: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\r\n\t\t\tclone: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: function (original)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn original;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\telement: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'div'\r\n\t\t\t},\r\n\r\n\t\t\tmove: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: null\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tbeforeDestroy()\r\n\t\t{\r\n\t\t\tthis._sortable.destroy();\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tcomponentMode: false,\r\n\t\t\t\ttransitionMode: false\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tthis.componentMode = this.element.toLowerCase() !== this.$el.nodeName.toLowerCase();\r\n\r\n\t\t\tif (this.componentMode && this.transitionMode)\r\n\t\t\t\tthrow new Error('Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: ' + this.element);\r\n\r\n\t\t\tlet optionsAdded = {};\r\n\r\n\t\t\teventsListened.forEach(elt => optionsAdded['on' + elt] = delegateAndEmit.call(this, elt));\r\n\t\t\teventsToEmit.forEach(elt => optionsAdded['on' + elt] = emit.bind(this, elt));\r\n\r\n\t\t\tlet options = _extends({}, this.options, optionsAdded, {onMove: (event, originalEvent) => this.onDragMove(event, originalEvent)});\r\n\r\n\t\t\t!('draggable' in options) && (options.draggable = '>*');\r\n\r\n\t\t\tthis._sortable = new Sortable(this.rootContainer, options);\r\n\t\t\tthis.computeIndexes();\r\n\t\t},\r\n\r\n\t\trender(createElement)\r\n\t\t{\r\n\t\t\tlet slots = this.$slots.default;\r\n\r\n\t\t\tif (slots && slots.length === 1)\r\n\t\t\t{\r\n\t\t\t\tlet child = slots[0];\r\n\r\n\t\t\t\tif (child.componentOptions && child.componentOptions.tag === 'transition-group')\r\n\t\t\t\t\tthis.transitionMode = true;\r\n\t\t\t}\r\n\r\n\t\t\tlet children = slots;\r\n\t\t\tlet footer = this.$slots.footer;\r\n\r\n\t\t\tif (footer)\r\n\t\t\t\tchildren = slots ? [].concat(_toConsumableArray(slots), _toConsumableArray(footer)) : [].concat(_toConsumableArray(footer));\r\n\r\n\t\t\treturn createElement(this.element, null, children);\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\trootContainer()\r\n\t\t\t{\r\n\t\t\t\treturn this.transitionMode ? this.$el.children[0] : this.$el;\r\n\t\t\t},\r\n\r\n\t\t\tisCloning()\r\n\t\t\t{\r\n\t\t\t\treturn this.options && this.options.group && this.options.group.pull === 'clone';\r\n\t\t\t},\r\n\r\n\t\t\trealList()\r\n\t\t\t{\r\n\t\t\t\treturn this.list ? this.list : this.value;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tgetChildrenNodes()\r\n\t\t\t{\r\n\t\t\t\tif (this.componentMode)\r\n\t\t\t\t\treturn this.$children[0].$slots.default;\r\n\r\n\t\t\t\tlet rawNodes = this.$slots.default;\r\n\r\n\t\t\t\treturn this.transitionMode ? rawNodes[0].child.$slots.default : rawNodes;\r\n\t\t\t},\r\n\r\n\t\t\tcomputeIndexes()\r\n\t\t\t{\r\n\t\t\t\tthis.$nextTick(() => this.visibleIndexes = computeIndexes(this.getChildrenNodes(), this.rootContainer.children, this.transitionMode));\r\n\t\t\t},\r\n\r\n\t\t\tgetUnderlyingVm(htmlElement)\r\n\t\t\t{\r\n\t\t\t\tlet index = computeVmIndex(this.getChildrenNodes() || [], htmlElement);\r\n\r\n\t\t\t\tif (index === -1)\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\treturn {index: index, element: this.realList[index]};\r\n\t\t\t},\r\n\r\n\t\t\tgetUnderlyingPotencialDraggableComponent(reference)\r\n\t\t\t{\r\n\t\t\t\tconst vue = reference.__vue__;\r\n\r\n\t\t\t\tif (!vue || !vue.$options || vue.$options._componentTag !== 'transition-group')\r\n\t\t\t\t\treturn vue;\r\n\r\n\t\t\t\treturn vue.$parent;\r\n\t\t\t},\r\n\r\n\t\t\temitChanges(event)\r\n\t\t\t{\r\n\t\t\t\tthis.$nextTick(() => this.$emit('change', event));\r\n\t\t\t},\r\n\r\n\t\t\talterList(onList)\r\n\t\t\t{\r\n\t\t\t\tif (this.list)\r\n\t\t\t\t{\r\n\t\t\t\t\tonList(this.list);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlet newList = [].concat(_toConsumableArray(this.value));\r\n\t\t\t\t\tonList(newList);\r\n\t\t\t\t\tthis.$emit('input', newList);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tspliceList()\r\n\t\t\t{\r\n\t\t\t\tlet _arguments = arguments;\r\n\t\t\t\tthis.alterList(list => list.splice.apply(list, _arguments));\r\n\t\t\t},\r\n\r\n\t\t\tupdatePosition(oldIndex, newIndex)\r\n\t\t\t{\r\n\t\t\t\tthis.alterList(list => list.splice(newIndex, 0, list.splice(oldIndex, 1)[0]));\r\n\t\t\t},\r\n\r\n\t\t\tgetRelatedContextFromMoveElement(reference)\r\n\t\t\t{\r\n\t\t\t\tlet to = reference.to,\r\n\t\t\t\t\trelated = reference.related;\r\n\r\n\t\t\t\tlet component = this.getUnderlyingPotencialDraggableComponent(reference);\r\n\r\n\t\t\t\tif (!component)\r\n\t\t\t\t\treturn {component: component};\r\n\r\n\t\t\t\tlet list = component.realList;\r\n\t\t\t\tlet context = {list: list, component: component};\r\n\r\n\t\t\t\tif (to !== related && list && component.getUnderlyingVm)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet destination = component.getUnderlyingVm(related);\r\n\r\n\t\t\t\t\tif (destination)\r\n\t\t\t\t\t\treturn _extends(destination, context);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn context;\r\n\t\t\t},\r\n\r\n\t\t\tgetVmIndex(domIndex)\r\n\t\t\t{\r\n\t\t\t\tlet indexes = this.visibleIndexes;\r\n\t\t\t\tlet numberIndexes = indexes.length;\r\n\r\n\t\t\t\treturn domIndex > numberIndexes - 1 ? numberIndexes : indexes[domIndex];\r\n\t\t\t},\r\n\r\n\t\t\tgetComponent()\r\n\t\t\t{\r\n\t\t\t\treturn this.$slots.default[0].componentInstance;\r\n\t\t\t},\r\n\r\n\t\t\tresetTransitionData(index)\r\n\t\t\t{\r\n\t\t\t\tif (!this.noTransitionOnDrag || !this.transitionMode)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tlet nodes = this.getChildrenNodes();\r\n\t\t\t\tnodes[index].data = null;\r\n\r\n\t\t\t\tlet transitionContainer = this.getComponent();\r\n\t\t\t\ttransitionContainer.children = [];\r\n\t\t\t\ttransitionContainer.kept = undefined;\r\n\t\t\t},\r\n\r\n\t\t\tonDragStart(event)\r\n\t\t\t{\r\n\t\t\t\tthis.context = this.getUnderlyingVm(event.item);\r\n\t\t\t\tevent.item._underlying_vm_ = this.clone(this.context.element);\r\n\t\t\t\tdraggingElement = event.item;\r\n\r\n\t\t\t\tthis.$el.classList.add('is-dragging');\r\n\t\t\t},\r\n\r\n\t\t\tonDragAdd(event)\r\n\t\t\t{\r\n\t\t\t\tlet element = event.item._underlying_vm_;\r\n\r\n\t\t\t\tif (element === undefined)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tremoveNode(event.item);\r\n\r\n\t\t\t\tlet newIndex = this.getVmIndex(event.newIndex);\r\n\t\t\t\tthis.spliceList(newIndex, 0, element);\r\n\t\t\t\tthis.computeIndexes();\r\n\t\t\t\tthis.emitChanges({added: {element: element, newIndex: newIndex}});\r\n\t\t\t},\r\n\r\n\t\t\tonDragRemove(event)\r\n\t\t\t{\r\n\t\t\t\tinsertNodeAt(this.rootContainer, event.item, event.oldIndex);\r\n\r\n\t\t\t\tif (this.isCloning)\r\n\t\t\t\t{\r\n\t\t\t\t\tremoveNode(event.clone);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet oldIndex = this.context.index;\r\n\t\t\t\tthis.spliceList(oldIndex, 1);\r\n\t\t\t\tthis.resetTransitionData(oldIndex);\r\n\t\t\t\tthis.emitChanges({removed: {element: this.context.element, oldIndex: oldIndex}});\r\n\t\t\t},\r\n\r\n\t\t\tonDragUpdate(event)\r\n\t\t\t{\r\n\t\t\t\tremoveNode(event.item);\r\n\t\t\t\tinsertNodeAt(event.from, event.item, event.oldIndex);\r\n\r\n\t\t\t\tlet oldIndex = this.context.index;\r\n\t\t\t\tlet newIndex = this.getVmIndex(event.newIndex);\r\n\r\n\t\t\t\tthis.updatePosition(oldIndex, newIndex);\r\n\t\t\t\tthis.emitChanges({moved: {element: this.context.element, oldIndex: oldIndex, newIndex: newIndex}});\r\n\t\t\t},\r\n\r\n\t\t\tcomputeFutureIndex(relatedContext, event)\r\n\t\t\t{\r\n\t\t\t\tif (!relatedContext.element)\r\n\t\t\t\t\treturn 0;\r\n\r\n\t\t\t\tlet domChildren = [].concat(_toConsumableArray(event.to.children)).filter(el => el.style.display !== 'none');\r\n\t\t\t\tlet currentDomIndex = domChildren.indexOf(event.related);\r\n\t\t\t\tlet currentIndex = relatedContext.component.getVmIndex(currentDomIndex);\r\n\t\t\t\tlet draggedInList = domChildren.indexOf(draggingElement) !== -1;\r\n\r\n\t\t\t\treturn draggedInList || !event.willInsertAfter ? currentIndex : currentIndex + 1;\r\n\t\t\t},\r\n\r\n\t\t\tonDragMove(event, originalEvent)\r\n\t\t\t{\r\n\t\t\t\tlet onMove = this.move;\r\n\r\n\t\t\t\tif (!onMove || !this.realList)\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\tlet relatedContext = this.getRelatedContextFromMoveElement(event);\r\n\t\t\t\tlet draggedContext = this.context;\r\n\t\t\t\tlet futureIndex = this.computeFutureIndex(relatedContext, event);\r\n\r\n\t\t\t\t_extends(draggedContext, {futureIndex: futureIndex});\r\n\t\t\t\t_extends(event, {relatedContext: relatedContext, draggedContext: draggedContext});\r\n\r\n\t\t\t\treturn onMove(event, originalEvent);\r\n\t\t\t},\r\n\r\n\t\t\tonDragEnd()\r\n\t\t\t{\r\n\t\t\t\tthis.computeIndexes();\r\n\t\t\t\tdraggingElement = null;\r\n\r\n\t\t\t\tthis.$el.classList.remove('is-dragging');\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\toptions: {\r\n\r\n\t\t\t\tdeep: true,\r\n\t\t\t\thandler(newOptionValue)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (let property in newOptionValue)\r\n\t\t\t\t\t\tif (newOptionValue.hasOwnProperty(property))\r\n\t\t\t\t\t\t\tif (readonlyProperties.indexOf(property) === -1)\r\n\t\t\t\t\t\t\t\tthis._sortable.option(property, newOptionValue[property]);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\trealList()\r\n\t\t\t{\r\n\t\t\t\tthis.computeIndexes();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst eventsListened = ['Start', 'Add', 'Remove', 'Update', 'End'];\r\n\tconst eventsToEmit = ['Choose', 'Sort', 'Filter', 'Clone'];\r\n\tconst readonlyProperties = ['Move'].concat(eventsListened, eventsToEmit).map(event => 'on' + event);\r\n\r\n\tlet draggingElement = null;\r\n\r\n\tconst _extends = Object.assign || function (target)\r\n\t{\r\n\t\tfor (let i = 1; i < arguments.length; i++)\r\n\t\t{\r\n\t\t\tlet source = arguments[i];\r\n\r\n\t\t\tfor (let key in source)\r\n\t\t\t\tif (source.hasOwnProperty(key))\r\n\t\t\t\t\ttarget[key] = source[key];\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t};\r\n\r\n\tconst _toConsumableArray = function (arr)\r\n\t{\r\n\t\tif (Array.isArray(arr))\r\n\t\t{\r\n\t\t\tlet arr2 = Array(arr.length);\r\n\r\n\t\t\tfor (let i = 0; i < arr.length; i++)\r\n\t\t\t\tarr2[i] = arr[i];\r\n\r\n\t\t\treturn arr2;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn Array.from(arr);\r\n\t\t}\r\n\t};\r\n\r\n\tArray.from = Array.from || function (object)\r\n\t{\r\n\t\treturn [].slice.call(object);\r\n\t};\r\n\r\n\tfunction removeNode(node)\r\n\t{\r\n\t\tnode.parentElement.removeChild(node);\r\n\t}\r\n\r\n\tfunction insertNodeAt(parentNode, node, position)\r\n\t{\r\n\t\tlet refNode = position === 0 ? parentNode.children[0] : parentNode.children[position - 1].nextSibling;\r\n\t\tparentNode.insertBefore(node, refNode);\r\n\t}\r\n\r\n\tfunction computeVmIndex(vnodes, element)\r\n\t{\r\n\t\treturn vnodes.map(elt => elt.elm).indexOf(element);\r\n\t}\r\n\r\n\tfunction computeIndexes(slots, children, isTransition)\r\n\t{\r\n\t\tif (!slots)\r\n\t\t\treturn [];\r\n\r\n\t\tlet elmFromNodes = slots.map(elt => elt.elm);\r\n\t\tlet rawIndexes = [].concat(_toConsumableArray(children)).map(elt => elmFromNodes.indexOf(elt));\r\n\r\n\t\treturn isTransition ? rawIndexes.filter(ind => ind !== -1) : rawIndexes;\r\n\t}\r\n\r\n\tfunction emit(eventName, eventData)\r\n\t{\r\n\t\tthis.$nextTick(() => this.$emit(eventName.toLowerCase(), eventData));\r\n\t}\r\n\r\n\tfunction delegateAndEmit(eventName)\r\n\t{\r\n\t\tlet that = this;\r\n\r\n\t\treturn eventData =>\r\n\t\t{\r\n\t\t\tif (that.realList !== null)\r\n\t\t\t\tthat['onDrag' + eventName](eventData);\r\n\r\n\t\t\temit.call(that, eventName, eventData);\r\n\t\t};\r\n\t}\r\n\r\n</script>\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport Vue from \"vue\";\r\n\r\nexport const eventBus = new Vue({});\r\n\r\nexport function bottom(layout)\r\n{\r\n\tlet max = 0, bottomY;\r\n\r\n\tfor (let i = 0, len = layout.length; i < len; i++)\r\n\t{\r\n\t\tbottomY = layout[i].y + layout[i].height;\r\n\r\n\t\tif (bottomY > max)\r\n\t\t\tmax = bottomY;\r\n\t}\r\n\r\n\treturn max;\r\n}\r\n\r\nexport function collides(item1, item2)\r\n{\r\n\tif (item1 === item2)\r\n\t\treturn false;\r\n\r\n\tif (item1.x + item1.width <= item2.x)\r\n\t\treturn false;\r\n\r\n\tif (item1.x >= item2.x + item2.width)\r\n\t\treturn false;\r\n\r\n\tif (item1.y + item1.height <= item2.y)\r\n\t\treturn false;\r\n\r\n\tif (item1.y >= item2.y + item2.height)\r\n\t\treturn false;\r\n\r\n\t// Yay!\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function compact(layout, verticalCompact)\r\n{\r\n\tconst compareWith = getStatics(layout);\r\n\tconst sorted = sortLayoutItemsByRowCol(layout);\r\n\tconst out = Array(layout.length);\r\n\r\n\tfor (let i = 0, len = sorted.length; i < len; i++)\r\n\t{\r\n\t\tlet item = sorted[i];\r\n\r\n\t\tif (!item.static)\r\n\t\t{\r\n\t\t\titem = compactItem(compareWith, item, verticalCompact);\r\n\r\n\t\t\tcompareWith.push(item);\r\n\t\t}\r\n\r\n\t\tout[layout.indexOf(item)] = item;\r\n\r\n\t\titem.moved = false;\r\n\t}\r\n\r\n\treturn out;\r\n}\r\n\r\nexport function compactItem(compareWith, item, verticalCompact)\r\n{\r\n\tif (verticalCompact)\r\n\t\twhile (item.y > 0 && !getFirstCollision(compareWith, item))\r\n\t\t\titem.y--;\r\n\r\n\tlet collides;\r\n\r\n\twhile ((collides = getFirstCollision(compareWith, item)))\r\n\t\titem.y = collides.y + collides.height;\r\n\r\n\treturn item;\r\n}\r\n\r\nexport function createCoreData(lastX, lastY, x, y)\r\n{\r\n\tconst isStart = !isNum(lastX);\r\n\r\n\tif (isStart)\r\n\t{\r\n\t\treturn {\r\n\t\t\tdeltaX: 0, deltaY: 0,\r\n\t\t\tlastX: x, lastY: y,\r\n\t\t\tx: x, y: y\r\n\t\t};\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn {\r\n\t\t\tdeltaX: x - lastX, deltaY: y - lastY,\r\n\t\t\tlastX: lastX, lastY: lastY,\r\n\t\t\tx: x, y: y\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function getAllCollisions(layout, layoutItem)\r\n{\r\n\treturn layout.filter((l) => collides(l, layoutItem));\r\n}\r\n\r\nexport function getControlPosition(evt)\r\n{\r\n\treturn offsetXYFromParentOf(evt);\r\n}\r\n\r\nexport function getFirstCollision(layout, layoutItem)\r\n{\r\n\tfor (let i = 0, len = layout.length; i < len; i++)\r\n\t\tif (collides(layout[i], layoutItem))\r\n\t\t\treturn layout[i];\r\n}\r\n\r\nexport function getLayoutItem(layout, id)\r\n{\r\n\tfor (let i = 0, len = layout.length; i < len; i++)\r\n\t\tif (layout[i].i === id)\r\n\t\t\treturn layout[i];\r\n}\r\n\r\nexport function getStatics(layout)\r\n{\r\n\treturn layout.filter((l) => l.static);\r\n}\r\n\r\nexport function isNum(num)\r\n{\r\n\treturn typeof num === \"number\" && !isNaN(num);\r\n}\r\n\r\nexport function moveElement(layout, item, x, y, isUserAction)\r\n{\r\n\tif (item.static)\r\n\t\treturn layout;\r\n\r\n\tif (item.y === y && item.x === x) return layout;\r\n\r\n\tconst movingUp = y && item.y > y;\r\n\r\n\tif (typeof x === \"number\")\r\n\t\titem.x = x;\r\n\r\n\tif (typeof y === \"number\")\r\n\t\titem.y = y;\r\n\r\n\titem.moved = true;\r\n\r\n\tlet sorted = sortLayoutItemsByRowCol(layout);\r\n\r\n\tif (movingUp)\r\n\t\tsorted = sorted.reverse();\r\n\r\n\tconst collisions = getAllCollisions(sorted, item);\r\n\r\n\tfor (let i = 0, len = collisions.length; i < len; i++)\r\n\t{\r\n\t\tconst collision = collisions[i];\r\n\r\n\t\tif (collision.moved)\r\n\t\t\tcontinue;\r\n\r\n\r\n\t\tif (item.y > collision.y && item.y - collision.y > collision.height / 4)\r\n\t\t\tcontinue;\r\n\r\n\t\tif (collision.static)\r\n\t\t\tlayout = moveElementAwayFromCollision(layout, collision, item, isUserAction);\r\n\t\telse\r\n\t\t\tlayout = moveElementAwayFromCollision(layout, item, collision, isUserAction);\r\n\t}\r\n\r\n\treturn layout;\r\n}\r\n\r\nexport function moveElementAwayFromCollision(layout, collidesWith, itemToMove, isUserAction)\r\n{\r\n\tif (isUserAction)\r\n\t{\r\n\t\tconst fakeItem = {\r\n\t\t\tx: itemToMove.x,\r\n\t\t\ty: itemToMove.y,\r\n\t\t\twidth: itemToMove.width,\r\n\t\t\theight: itemToMove.height,\r\n\t\t\tid: \"__fake__\"\r\n\t\t};\r\n\r\n\t\tfakeItem.y = Math.max(collidesWith.y - itemToMove.height, 0);\r\n\r\n\t\tif (!getFirstCollision(layout, fakeItem))\r\n\t\t\treturn moveElement(layout, itemToMove, undefined, fakeItem.y);\r\n\t}\r\n\r\n\treturn moveElement(layout, itemToMove, undefined, itemToMove.y + 1);\r\n}\r\n\r\nexport function offsetXYFromParentOf(evt)\r\n{\r\n\tconst offsetParent = evt.target.offsetParent || document.body;\r\n\tconst offsetParentRect = evt.offsetParent === document.body ? {left: 0, top: 0} : offsetParent.getBoundingClientRect();\r\n\r\n\tconst x = evt.clientX + offsetParent.scrollLeft - offsetParentRect.left;\r\n\tconst y = evt.clientY + offsetParent.scrollTop - offsetParentRect.top;\r\n\r\n\treturn {x, y};\r\n}\r\n\r\nexport function setTransform(top, left, width, height)\r\n{\r\n\tconst translate = `translate3d(${left}px,${top}px, 0)`;\r\n\r\n\treturn {\r\n\t\ttransform: translate,\r\n\t\tWebkitTransform: translate,\r\n\t\tMozTransform: translate,\r\n\t\tmsTransform: translate,\r\n\t\tOTransform: translate,\r\n\t\twidth: width + \"px\",\r\n\t\theight: height + \"px\",\r\n\t\tposition: \"absolute\"\r\n\t};\r\n}\r\n\r\nexport function sortLayoutItemsByRowCol(layout)\r\n{\r\n\treturn [].concat(layout).sort((a, b) => (a.y > b.y || (a.y === b.y && a.x > b.x)) ? 1 : -1);\r\n}\r\n\r\nexport function validateLayout(layout, contextName = \"Layout\")\r\n{\r\n\tconst subProps = [\"x\", \"y\", \"width\", \"height\"];\r\n\r\n\tif (!Array.isArray(layout))\r\n\t\tthrow new Error(`${contextName} must be an array!`);\r\n\r\n\tfor (let i = 0, len = layout.length; i < len; i++)\r\n\t{\r\n\t\tconst item = layout[i];\r\n\r\n\t\tfor (let j = 0; j < subProps.length; j++)\r\n\t\t\tif (typeof item[subProps[j]] !== \"number\")\r\n\t\t\t\tthrow new Error(`Latte Grid: ${contextName}[${i}].${subProps[j]} must be a number!`);\r\n\r\n\t\tif (item.i && typeof item.i !== \"string\")\r\n\t\t\tthrow new Error(`Latte Grid: ${contextName}[${i}].i must be a string!`);\r\n\r\n\t\tif (item.static !== undefined && typeof item.static !== \"boolean\")\r\n\t\t\tthrow new Error(`Latte Grid: ${contextName}[${i}].static must be a boolean!`);\r\n\t}\r\n}\r\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<template>\r\n\r\n\t<div ref=\"grid\" class=\"latte-grid\" :class=\"{'is-dragging': is_dragging}\" :style=\"styles\" role=\"grid\">\r\n\t\t<slot></slot>\r\n\t\t<latte-grid-item class=\"latte-grid-placeholder\" v-show=\"isDragging\" :x=\"placeholder.x\" :y=\"placeholder.y\" :height=\"placeholder.height\" :width=\"placeholder.width\" id=\"__placeholder__\"></latte-grid-item>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\timport { eventBus, bottom, compact, getLayoutItem, moveElement, validateLayout } from \"../../js/ui/grid\";\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-grid\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\tautoSize: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tcolumns: {\r\n\t\t\t\tdefault: 12,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\trowHeight: {\r\n\t\t\t\tdefault: 100,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\tmaxRows: {\r\n\t\t\t\tdefault: Infinity,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\r\n\t\t\tmargin: {\r\n\t\t\t\tdefault: () => [24, 24],\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Array\r\n\t\t\t},\r\n\r\n\t\t\tisDraggable: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tisResizable: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tverticalCompact: {\r\n\t\t\t\tdefault: true,\r\n\t\t\t\trequired: false,\r\n\t\t\t\ttype: Boolean\r\n\t\t\t},\r\n\r\n\t\t\tlayout: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\ttype: Array\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tbeforeDestroy()\r\n\t\t{\r\n\t\t\teventBus.$off(\"dragEvent\", this.dragEventHandler);\r\n\t\t\teventBus.$off(\"resizeEvent\", this.resizeEventHandler);\r\n\r\n\t\t\twindow.removeEventListener(\"resize\", this.onWindowResize);\r\n\t\t},\r\n\r\n\t\tcreated()\r\n\t\t{\r\n\t\t\tconst $this = this;\r\n\r\n\t\t\tthis.dragEventHandler = function (eventType, id, x, y, height, width)\r\n\t\t\t{\r\n\t\t\t\t$this.dragEvent(eventType, id, x, y, height, width);\r\n\t\t\t};\r\n\r\n\t\t\tthis.resizeEventHandler = function (eventType, id, x, y, height, width)\r\n\t\t\t{\r\n\t\t\t\t$this.resizeEvent(eventType, id, x, y, height, width);\r\n\t\t\t};\r\n\r\n\t\t\teventBus.$on(\"dragEvent\", this.dragEventHandler);\r\n\t\t\teventBus.$on(\"resizeEvent\", this.resizeEventHandler);\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\twidth: null,\r\n\t\t\t\tmergedStyle: {},\r\n\t\t\t\tlastLayoutLength: 0,\r\n\t\t\t\tisDragging: false,\r\n\t\t\t\tplaceholder: {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tconst $this = this;\r\n\r\n\t\t\tthis.$nextTick(() =>\r\n\t\t\t{\r\n\t\t\t\tvalidateLayout(this.layout);\r\n\r\n\t\t\t\tconst init = () =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.width === null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.onWindowResize();\r\n\r\n\t\t\t\t\t\twindow.addEventListener(\"resize\", this.onWindowResize);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcompact(this.layout, this.verticalCompact);\r\n\r\n\t\t\t\t\tthis.updateHeight();\r\n\r\n\t\t\t\t\tthis.$nextTick(() =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\telementResizeDetectorMaker({strategy: \"scroll\"}).listenTo(this.$refs.grid, function ()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$this.onWindowResize();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.$nextTick(() => init());\r\n\r\n\t\t\t\twindow.onload = init.bind(this);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\tis_dragging()\r\n\t\t\t{\r\n\t\t\t\treturn this.isDragging;\r\n\t\t\t},\r\n\r\n\t\t\tstyles()\r\n\t\t\t{\r\n\t\t\t\treturn this.mergedStyle\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tcontainerHeight()\r\n\t\t\t{\r\n\t\t\t\tif (!this.autoSize)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\treturn `${bottom(this.layout) * (this.rowHeight + this.margin[1]) + this.margin[1]}px`;\r\n\t\t\t},\r\n\r\n\t\t\tdragEvent(eventType, id, x, y, height, width)\r\n\t\t\t{\r\n\t\t\t\tif (eventType === \"dragmove\" || eventType === \"dragstart\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.placeholder.x = x;\r\n\t\t\t\t\tthis.placeholder.y = y;\r\n\t\t\t\t\tthis.placeholder.height = height;\r\n\t\t\t\t\tthis.placeholder.width = width;\r\n\r\n\t\t\t\t\tthis.$nextTick(() => this.isDragging = true);\r\n\r\n\t\t\t\t\teventBus.$emit(\"updateWidth\", this.width);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.$nextTick(() => this.isDragging = false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet item = getLayoutItem(this.layout, id);\r\n\r\n\t\t\t\tif (item === undefined || item === null)\r\n\t\t\t\t\titem = {x: 0, y: 0};\r\n\r\n\t\t\t\titem.x = x;\r\n\t\t\t\titem.y = y;\r\n\r\n\t\t\t\tthis.layout = moveElement(this.layout, item, x, y, true);\r\n\r\n\t\t\t\tcompact(this.layout, this.verticalCompact);\r\n\t\t\t\teventBus.$emit(\"compact\");\r\n\r\n\t\t\t\tthis.updateHeight();\r\n\r\n\t\t\t\tif (eventType === \"dragend\")\r\n\t\t\t\t\tthis.$emit(\"layout-updated\", this.layout);\r\n\t\t\t},\r\n\r\n\t\t\tlayoutUpdate()\r\n\t\t\t{\r\n\t\t\t\tif (typeof this.layout === \"undefined\")\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.layout.length !== this.lastLayoutLength)\r\n\t\t\t\t\tthis.lastLayoutLength = this.layout.length;\r\n\r\n\t\t\t\tcompact(this.layout, this.verticalCompact);\r\n\t\t\t\teventBus.$emit(\"updateWidth\", this.width);\r\n\t\t\t\tthis.updateHeight();\r\n\t\t\t},\r\n\r\n\t\t\tonWindowResize()\r\n\t\t\t{\r\n\t\t\t\tif (typeof this.$refs.grid === \"undefined\")\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.width = this.$refs.grid.offsetWidth;\r\n\t\t\t},\r\n\r\n\t\t\tresizeEvent(eventType, id, x, y, height, width)\r\n\t\t\t{\r\n\t\t\t\tif (eventType === \"resizestart\" || eventType === \"resizemove\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.placeholder.x = x;\r\n\t\t\t\t\tthis.placeholder.y = y;\r\n\t\t\t\t\tthis.placeholder.height = height;\r\n\t\t\t\t\tthis.placeholder.width = width;\r\n\r\n\t\t\t\t\tthis.$nextTick(() => this.isDragging = true);\r\n\t\t\t\t\teventBus.$emit(\"updateWidth\", this.width);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.$nextTick(() => this.isDragging = false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet item = getLayoutItem(this.layout, id);\r\n\r\n\t\t\t\tif (item === undefined || item === null)\r\n\t\t\t\t\titem = {height: 0, width: 0};\r\n\r\n\t\t\t\titem.height = height;\r\n\t\t\t\titem.width = width;\r\n\r\n\t\t\t\tcompact(this.layout, this.verticalCompact);\r\n\t\t\t\teventBus.$emit(\"compact\");\r\n\r\n\t\t\t\tthis.updateHeight();\r\n\r\n\t\t\t\tif (eventType === \"resizeend\")\r\n\t\t\t\t\tthis.$emit(\"layout-updated\", this.layout);\r\n\t\t\t},\r\n\r\n\t\t\tupdateHeight()\r\n\t\t\t{\r\n\t\t\t\tthis.mergedStyle = {\r\n\t\t\t\t\theight: this.containerHeight()\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\tcolumns()\r\n\t\t\t{\r\n\t\t\t\teventBus.$emit(\"setColumns\", this.columns);\r\n\t\t\t},\r\n\r\n\t\t\tisDraggable()\r\n\t\t\t{\r\n\t\t\t\teventBus.$emit(\"setDraggable\", this.isDraggable);\r\n\t\t\t},\r\n\r\n\t\t\tisResizable()\r\n\t\t\t{\r\n\t\t\t\teventBus.$emit(\"setResizable\", this.isResizable);\r\n\t\t\t},\r\n\r\n\t\t\tlayout()\r\n\t\t\t{\r\n\t\t\t\tthis.layoutUpdate();\r\n\t\t\t},\r\n\r\n\t\t\trowHeight()\r\n\t\t\t{\r\n\t\t\t\teventBus.$emit(\"setRowHeight\", this.rowHeight);\r\n\t\t\t},\r\n\r\n\t\t\twidth()\r\n\t\t\t{\r\n\t\t\t\tthis.$nextTick(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\teventBus.$emit(\"updateWidth\", this.width);\r\n\t\t\t\t\tthis.updateHeight();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n</script>\r\n","<!--\r\n  - Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n  -\r\n  - This file is part of the Latte UI package.\r\n  -\r\n  - For the full copyright and license information, please view the\r\n  - LICENSE file that was distributed with this source code.\r\n  -->\r\n\r\n<template>\r\n\r\n\t<div class=\"panel pdf-viewer\" role=\"presentation\" style=\"min-height: 84px\" v-latte-context-menu :class=\"{'is-loading': isLoading}\" v-if=\"hasSupport\">\r\n\t\t<div class=\"page\" v-for=\"i in pages\" :id=\"'page-' + i\">\r\n\t\t\t<canvas></canvas>\r\n\t\t</div>\r\n\r\n\t\t<span class=\"spinner\"></span>\r\n\r\n\t\t<nav class=\"nav nav-list latte-context-menu\">\r\n\t\t\t<a class=\"nav-link\" :href=\"source\" target=\"_blank\"><i class=\"mdi mdi-open-in-new\"></i> <span>{{ \"Open in new tab\"|i18n(\"pdf-viewer\") }}</span></a>\r\n\t\t\t<a class=\"nav-link\" @click=\"download\"><i class=\"mdi mdi-download\"></i> <span>{{ \"Download\"|i18n(\"pdf-viewer\") }}</span></a>\r\n\t\t\t<a class=\"nav-link\" @click=\"print\"><i class=\"mdi mdi-printer\"></i> <span>{{ \"Print\"|i18n(\"pdf-viewer\") }}</span></a>\r\n\t\t\t<div class=\"divider divider-horizontal\"></div>\r\n\t\t\t<a class=\"nav-link\" @click=\"load\"><i class=\"mdi mdi-reload\"></i> <span>{{ \"Reload\"|i18n(\"pdf-viewer\") }}</span></a>\r\n\t\t\t<slot name=\"menu\"></slot>\r\n\t\t</nav>\r\n\t</div>\r\n\r\n\t<div class=\"panel\" v-else>\r\n\t\t<div class=\"panel-body text-center\">\r\n\t\t\tPlease include PDF.js in your project.\r\n\t\t</div>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\twindow.pdfjsLib = window.pdfjsLib || undefined;\r\n\r\n\texport default {\r\n\r\n\t\tname: \"latte-pdf-viewer\",\r\n\r\n\t\tprops: {\r\n\r\n\t\t\tsource: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdata()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tpages: 0,\r\n\t\t\t\tpdf: null,\r\n\t\t\t\trendered: 0\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmounted()\r\n\t\t{\r\n\t\t\tthis.load();\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\thasSupport()\r\n\t\t\t{\r\n\t\t\t\treturn pdfjsLib !== undefined;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tload()\r\n\t\t\t{\r\n\t\t\t\tif (!this.hasSupport)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\tthis.rendered = 0;\r\n\r\n\t\t\t\tpdfjsLib.getDocument(this.source).then(pdf => this.onPDFLoaded(pdf));\r\n\t\t\t},\r\n\r\n\t\t\tdownload()\r\n\t\t\t{\r\n\t\t\t\tdownloadFile(\"NULL.pdf\", this.source)\r\n\t\t\t},\r\n\r\n\t\t\tprint()\r\n\t\t\t{\r\n\t\t\t\tprintDocument(this.source)\r\n\t\t\t},\r\n\r\n\t\t\tonPDFLoaded(pdf)\r\n\t\t\t{\r\n\t\t\t\tthis.pdf = pdf;\r\n\t\t\t\tthis.pages = this.pdf.numPages;\r\n\r\n\t\t\t\tthis.$nextTick(() => this.onPDFLoadedSecondTask());\r\n\t\t\t},\r\n\r\n\t\t\tonPDFLoadedSecondTask()\r\n\t\t\t{\r\n\t\t\t\tfor (let i = 1; i <= this.pages; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet pageElement = this.$el.querySelector(`div.page#page-${i}`);\r\n\r\n\t\t\t\t\tif (typeof pageElement === \"undefined\")\r\n\t\t\t\t\t\tthrow new Error(\"Page Element not found!\");\r\n\r\n\t\t\t\t\tlet pageCanvas = pageElement.querySelector(\"canvas\");\r\n\r\n\t\t\t\t\tthis.pdf.getPage(i).then(this.onPDFPageReady.bind(this, pageElement, pageCanvas));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonPDFPageReady(pageElement, pageCanvas, page)\r\n\t\t\t{\r\n\t\t\t\tthis.renderPage(pageElement, pageCanvas, page)\r\n\t\t\t},\r\n\r\n\t\t\trenderPage(pageElement, pageCanvas, page)\r\n\t\t\t{\r\n\t\t\t\tlet desiredWidth = pageElement.getBoundingClientRect().width;\r\n\t\t\t\tlet viewport = page.getViewport(1);\r\n\t\t\t\tlet scale = desiredWidth / viewport.width;\r\n\t\t\t\tviewport = page.getViewport(scale);\r\n\r\n\t\t\t\tlet context = pageCanvas.getContext(\"2d\");\r\n\t\t\t\tpageElement.style.height = (pageCanvas.height = Math.round(viewport.height)) + 'px';\r\n\t\t\t\tpageElement.style.width = (pageCanvas.width = Math.round(viewport.width)) + 'px';\r\n\r\n\t\t\t\tlet renderContext = {\r\n\t\t\t\t\tcanvasContext: context,\r\n\t\t\t\t\tviewport: viewport\r\n\t\t\t\t};\r\n\r\n\t\t\t\tpage.render(renderContext).then(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.rendered++;\r\n\t\t\t\t\tthis.isLoading = !(this.rendered === this.pages);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\r\n\t\t\tsource()\r\n\t\t\t{\r\n\t\t\t\tthis.load();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n</script>\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nexport function extractAttributes(elm)\r\n{\r\n\tconst map = elm.hasAttributes() ? elm.attributes : [];\r\n\tconst attrs = {};\r\n\r\n\tfor (let i = 0; i < map.length; i++)\r\n\t{\r\n\t\tconst attr = map[i];\r\n\r\n\t\tif (attr.value)\r\n\t\t\tattrs[attr.name] = attr.value === \"\" ? true : attr.value;\r\n\t}\r\n\r\n\tlet cls;\r\n\tlet style;\r\n\r\n\tif (attrs.class)\r\n\t{\r\n\t\tcls = attrs.class;\r\n\t\tdelete attrs.class;\r\n\t}\r\n\r\n\tif (attrs.style)\r\n\t{\r\n\t\tstyle = attrs.style;\r\n\t\tdelete attrs.style;\r\n\t}\r\n\r\n\treturn {\r\n\t\tattrs,\r\n\t\tclass: cls,\r\n\t\tstyle\r\n\t};\r\n}\r\n\r\nexport function freeze(item)\r\n{\r\n\tif (Array.isArray(item) || typeof item === \"object\")\r\n\t\treturn Object.freeze(item);\r\n\r\n\treturn item;\r\n}\r\n\r\nexport function combinePassengers(transports, slotProps = {})\r\n{\r\n\treturn transports.reduce((passengers, transport) =>\r\n\t{\r\n\t\tlet newPassengers = transport.passengers[0];\r\n\r\n\t\treturn passengers.concat(typeof newPassengers === \"function\" ? newPassengers(slotProps) : transport.passengers);\r\n\t}, []);\r\n}\r\n\r\nexport function stableSort(array, compareFn)\r\n{\r\n\treturn array\r\n\t\t.map((v, idx) => [idx, v])\r\n\t\t.sort(function (a, b)\r\n\t\t{\r\n\t\t\treturn this(a[1], b[1]) || a[0] - b[0]\r\n\t\t}.bind(compareFn))\r\n\t\t.map(c => c[1]);\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport Vue from \"vue\"\r\nimport { combinePassengers, freeze, stableSort } from \"./portal-utils\";\r\n\r\nconst transports = {};\r\n\r\nexport { transports }\r\n\r\nexport const Wormhole = Vue.extend({\r\n\r\n\tdata: () => ({transports}),\r\n\r\n\tmethods: {\r\n\r\n\t\topen(transport)\r\n\t\t{\r\n\t\t\tconst {to, from, passengers} = transport;\r\n\r\n\t\t\tif (!to || !from || !passengers)\r\n\t\t\t\treturn;\r\n\r\n\t\t\ttransport.passengers = freeze(passengers);\r\n\r\n\t\t\tconst keys = Object.keys(this.transports);\r\n\r\n\t\t\tif (keys.indexOf(to) === -1)\r\n\t\t\t\tVue.set(this.transports, to, []);\r\n\r\n\t\t\tconst currentIndex = this.getTransportIndex(transport);\r\n\t\t\tconst newTransports = this.transports[to].slice(0);\r\n\r\n\t\t\tif (currentIndex === -1)\r\n\t\t\t\tnewTransports.push(transport);\r\n\t\t\telse\r\n\t\t\t\tnewTransports[currentIndex] = transport;\r\n\r\n\t\t\tthis.transports[to] = stableSort(newTransports, function (a, b)\r\n\t\t\t{\r\n\t\t\t\treturn a.order - b.order;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tclose(transport, force = false)\r\n\t\t{\r\n\t\t\tconst {to, from} = transport;\r\n\r\n\t\t\tif (!to || !from)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (!this.transports[to])\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (force)\r\n\t\t\t{\r\n\t\t\t\tthis.transports[to] = [];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tconst index = this.getTransportIndex(transport);\r\n\r\n\t\t\t\tif (index >= 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tconst newTransports = this.transports[to].slice(0);\r\n\t\t\t\t\tnewTransports.splice(index, 1);\r\n\t\t\t\t\tthis.transports[to] = newTransports;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thasTarget(to)\r\n\t\t{\r\n\t\t\treturn this.transports.hasOwnProperty(to);\r\n\t\t},\r\n\r\n\t\thasContentFor(to)\r\n\t\t{\r\n\t\t\tif (!this.transports[to])\r\n\t\t\t\treturn false;\r\n\r\n\t\t\treturn this.getContentFor(to).length > 0;\r\n\t\t},\r\n\r\n\t\tgetSourceFor(to)\r\n\t\t{\r\n\t\t\treturn this.transports[to] && this.transports[to][0].from;\r\n\t\t},\r\n\r\n\t\tgetContentFor(to)\r\n\t\t{\r\n\t\t\tconst transports = this.transports[to];\r\n\r\n\t\t\tif (!transports)\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\treturn combinePassengers(transports);\r\n\t\t},\r\n\r\n\t\tgetTransportIndex({to, from})\r\n\t\t{\r\n\t\t\tfor (const i in this.transports[to])\r\n\t\t\t\tif (this.transports[to][i].from === from)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1\r\n\t\t}\r\n\r\n\t}\r\n\r\n});\r\n\r\nconst wormhole = new Wormhole(transports);\r\n\r\nexport default wormhole;\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { dispatch } from \"../../js/actions\";\r\n\r\nexport default {\r\n\r\n\tname: \"latte-context-menu\",\r\n\r\n\tbind(element)\r\n\t{\r\n\t\tlet contextMenu = element.contextMenuInstance = element.querySelector(\":scope > nav.latte-context-menu:not(.is-inline)\");\r\n\r\n\t\tif (contextMenu === null)\r\n\t\t\treturn;\r\n\r\n\t\telement.removeChild(contextMenu);\r\n\t\tdocument.body.appendChild(contextMenu);\r\n\r\n\t\tlet contextMenuCloseHandler = event =>\r\n\t\t{\r\n\t\t\tif (event.cancelable)\r\n\t\t\t{\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\tcontextMenu.classList.remove(\"is-open\");\r\n\t\t\tdocument.body.classList.remove(\"is-context-menu-open\");\r\n\r\n\t\t\tdocument.scrollingElement.removeEventListener(\"scroll\", contextMenuCloseHandler);\r\n\t\t\tdocument.body.removeEventListener(\"mousedown\", contextMenuCloseHandler);\r\n\t\t};\r\n\r\n\t\tlet contextMenuItemDownHandler = element.contextMenuItemDownHandler = event =>\r\n\t\t{\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t};\r\n\r\n\t\tlet contextMenuItemUpHandler = element.contextMenuItemUpHandler = event =>\r\n\t\t{\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tcontextMenuCloseHandler(event);\r\n\t\t};\r\n\r\n\t\tlet contextMenuHandler = element.contextMenuHandler = event =>\r\n\t\t{\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tcontextMenu.classList.add(\"is-open\");\r\n\r\n\t\t\tlet offset = 9;\r\n\t\t\tlet rect = contextMenu.getBoundingClientRect();\r\n\r\n\t\t\tlet x = event.pageX - document.scrollingElement.scrollLeft;\r\n\t\t\tlet y = event.pageY - document.scrollingElement.scrollTop;\r\n\r\n\t\t\tif ((x + rect.width + offset) > window.innerWidth)\r\n\t\t\t\tx = x - rect.width;\r\n\r\n\t\t\tif ((y + rect.height + offset) > window.innerHeight)\r\n\t\t\t\ty = y - rect.height;\r\n\r\n\t\t\tif ((x + rect.width + offset) > window.innerWidth)\r\n\t\t\t\tx = window.innerWidth - (rect.width + offset);\r\n\r\n\t\t\tif ((y + rect.height + offset) > window.innerHeight)\r\n\t\t\t\ty = window.innerHeight - (rect.height + offset);\r\n\r\n\t\t\tcontextMenu.style.top = `${y}px`;\r\n\t\t\tcontextMenu.style.left = `${x}px`;\r\n\r\n\t\t\tdocument.body.classList.add(\"is-context-menu-open\");\r\n\r\n\t\t\tdocument.body.addEventListener(\"mousedown\", contextMenuCloseHandler);\r\n\t\t\twindow.addEventListener(\"scroll\", contextMenuCloseHandler, {passive: true});\r\n\t\t\tdispatch(\"latte:context-menu\", {menu: contextMenu, open: true});\r\n\t\t};\r\n\r\n\t\telement.addEventListener(\"contextmenu\", contextMenuHandler);\r\n\t\tcontextMenu.addEventListener(\"mousedown\", contextMenuItemDownHandler);\r\n\t\tcontextMenu.addEventListener(\"mouseup\", contextMenuItemUpHandler);\r\n\t},\r\n\r\n\tunbind(element)\r\n\t{\r\n\t\tif (typeof element.contextMenuInstance === \"undefined\" || element.contextMenuInstance === null)\r\n\t\t\treturn;\r\n\r\n\t\telement.contextMenuInstance.addEventListener(\"mousedown\", event.contextMenuItemDownHandler);\r\n\t\telement.contextMenuInstance.addEventListener(\"mouseup\", event.contextMenuItemUpHandler);\r\n\r\n\t\tdocument.body.removeChild(element.contextMenuInstance);\r\n\t\telement.appendChild(element.contextMenuInstance);\r\n\r\n\t\telement.removeEventListener(\"contextmenu\", element.contextMenuHandler);\r\n\t\tdispatch(\"latte:context-menu\", {menu: element.contextMenuInstance, open: false});\r\n\t}\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nexport default {\r\n\r\n\tmethods: {\r\n\r\n\t\tlatte()\r\n\t\t{\r\n\t\t\treturn Latte;\r\n\t\t},\r\n\r\n\t\tdispatchAction(...args)\r\n\t\t{\r\n\t\t\tLatte.actions.dispatch(...args);\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n\r\n\tmethods: {\r\n\r\n\t\tmoment(...args)\r\n\t\t{\r\n\t\t\treturn moment(...args);\r\n\t\t},\r\n\r\n\t\tmomentDuration(...args)\r\n\t\t{\r\n\t\t\treturn moment.duration(...args);\r\n\t\t},\r\n\r\n\t\tmomentUtc(...args)\r\n\t\t{\r\n\t\t\treturn moment.utc(...args);\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport LatteSDK from \"./js/sdk\";\r\n\r\nimport { dispatch, on } from \"./js/actions\";\r\nimport { interval, setOptions } from \"./js/core\";\r\nimport { removeSavedFromQueryString } from \"./js/util/dom\";\r\nimport { setCookie } from \"./js/util/cookies\";\r\nimport { initializeHoudiniApis } from \"./js/houdini-apis\";\r\nimport { initializeForms } from \"./js/ui/forms\";\r\nimport { initializeNotices } from \"./js/ui/notices\";\r\nimport { initializePanels } from \"./js/ui/panels\";\r\nimport { initializeTooltips } from \"./js/ui/tooltip\";\r\nimport { registerOutsideEvents } from \"./js/hid/OutsideEvent\";\r\nimport { registerPointerEventsPolyfill } from \"./js/hid/PointerEvents\";\r\n\r\nimport * as Components from \"./vue/component\";\r\nimport * as Directives from \"./vue/directive\";\r\nimport * as Mixins from \"./vue/mixin\"\r\nimport * as RTEPlugins from \"./vue/rich-text-editor\";\r\nimport * as Widgets from \"./vue/widget\";\r\n\r\nimport \"./scss/app.scss\";\r\n\r\nexport const DefaultOptions = Object.assign({}, self.LatteOptions || {}, {\r\n\tlocale: navigator.language,\r\n\ttickInterval: 250\r\n});\r\n\r\nexport const Latte = LatteSDK;\r\n\r\nexport const LatteUI = {\r\n\r\n\tinstall(Vue, options = {})\r\n\t{\r\n\t\toptions = this.normalizeOptions(options);\r\n\r\n\t\tif (typeof self.LatteRoot === \"undefined\")\r\n\t\t\tself.LatteRoot = null;\r\n\r\n\t\tVue.prototype.$latte = LatteSDK;\r\n\t\tVue.prototype.$latteOptions = options;\r\n\r\n\t\tsetOptions(options);\r\n\r\n\t\tregisterOutsideEvents();\r\n\t\tregisterPointerEventsPolyfill();\r\n\t\tinitializeHoudiniApis();\r\n\r\n\t\tthis.registerDirectives(Vue);\r\n\t\tthis.registerMixins(Vue);\r\n\t\tthis.registerComponents(Vue);\r\n\r\n\t\tinterval(options.tickInterval, () => this.onTick());\r\n\t\ton(\"latte:switch-theme\", data => this.onSwitchTheme(data));\r\n\r\n\t\twindow.addEventListener(\"load\", () => this.onDOMContentLoaded());\r\n\r\n\t\tremoveSavedFromQueryString();\r\n\r\n\t\tself.Latte = LatteSDK;\r\n\t},\r\n\r\n\tnormalizeOptions(options)\r\n\t{\r\n\t\treturn Object.assign({}, DefaultOptions, options);\r\n\t},\r\n\r\n\tregisterComponents(Vue)\r\n\t{\r\n\t\tObject.values(Components).forEach(c => Vue.component(c.name, c));\r\n\t\tObject.values(RTEPlugins).forEach(p => Vue.component(p.name, p));\r\n\t\tObject.values(Widgets).forEach(w => Vue.component(w.name, w));\r\n\t},\r\n\r\n\tregisterDirectives(Vue)\r\n\t{\r\n\t\tObject.values(Directives).forEach(d => Vue.directive(d.name, d));\r\n\t},\r\n\r\n\tregisterMixins(Vue)\r\n\t{\r\n\t\tObject.values(Mixins).forEach(m => Vue.mixin(m));\r\n\t},\r\n\r\n\tonDOMContentLoaded()\r\n\t{\r\n\t\tinitializeForms();\r\n\t\tinitializeNotices();\r\n\t\tinitializePanels();\r\n\t\tinitializeTooltips();\r\n\t},\r\n\r\n\tonSwitchTheme(data)\r\n\t{\r\n\t\tconst {themeId} = data;\r\n\r\n\t\tif (themeId === undefined)\r\n\t\t\treturn;\r\n\r\n\t\tdocument.body.dataset.theme = themeId;\r\n\t\tsetCookie(\"$ui:theme\", themeId);\r\n\t},\r\n\r\n\tonTick()\r\n\t{\r\n\t\tif (document.hidden === true)\r\n\t\t\treturn;\r\n\r\n\t\tdispatch(\"latte:tick\", window.performance.now());\r\n\t}\r\n\r\n};\r\n\r\nexport default LatteUI;\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\nimport { isTouchOnlyDevice } from \"../util/dom\";\r\n\r\nexport function registerPointerEventsPolyfill()\r\n{\r\n\tif (typeof PointerEvent !== \"undefined\")\r\n\t\treturn; // Yay for this browser!\r\n\r\n\tconst isATouchOnlyDevice = isTouchOnlyDevice();\r\n\r\n\tconst events = {\r\n\t\tclick: [\"click\", \"tap\"],\r\n\t\tpointerdown: [\"mousedown\", \"touchstart\"],\r\n\t\tpointermove: [\"mousemove\", \"touchmove\"],\r\n\t\tpointerover: [\"mouseover\", \"touchstart\"],\r\n\t\tpointerout: [\"mouseout\", \"touchend\"],\r\n\t\tpointerup: [\"mouseup\", \"touchend\"]\r\n\t};\r\n\r\n\tconst handlers = {\r\n\r\n\t\ttap($this, listener, options)\r\n\t\t{\r\n\t\t\tlet isTap = false;\r\n\r\n\t\t\toriginal.addEventListener.call($this, \"touchstart\", () => isTap = true, options);\r\n\t\t\toriginal.addEventListener.call($this, \"touchmove\", () => isTap = false, options);\r\n\t\t\toriginal.addEventListener.call($this, \"touchend\", evt =>\r\n\t\t\t{\r\n\t\t\t\tif (!isTap)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tlistener(evt);\r\n\t\t\t}, options);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tconst original = {\r\n\t\taddEventListener: EventTarget.prototype.addEventListener,\r\n\t\tremoveEventListener: EventTarget.prototype.removeEventListener\r\n\t};\r\n\r\n\tEventTarget.prototype.addEventListener = function (type, listener, options)\r\n\t{\r\n\t\tlet overrideType = type;\r\n\r\n\t\tif (type in events)\r\n\t\t\toverrideType = isATouchOnlyDevice ? events[type][1] : events[type][0];\r\n\r\n\t\tif (overrideType in handlers)\r\n\t\t\thandlers[overrideType](this, listener, options);\r\n\t\telse\r\n\t\t\toriginal.addEventListener.call(this, overrideType, listener, options);\r\n\t};\r\n}\r\n","/*\r\n * Copyright (c) 2019 - Bas Milius <bas@mili.us>\r\n *\r\n * This file is part of the Latte UI package.\r\n *\r\n * For the full copyright and license information, please view the\r\n * LICENSE file that was distributed with this source code.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport Vue from \"vue\";\r\nimport LatteUI from \"../index\";\r\n\r\nVue.use(LatteUI);\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => new Vue({el: \"main#app\"}));\r\n"],"names":["lattePath","closest","element","selector","document","parentNode","matches","createElement","fn","undefined","el","getCoords","evt","window","TouchEvent","touches","length","item","changedTouches","clientX","clientY","x","y","getLattePath","lattejs","querySelector","getAttribute","split","isTouchOnlyDevice","navigator","msMaxTouchPoints","live","root","event","callback","options","passive","indexOf","forEach","addEventListener","qs","querySelectorAll","index","target","Array","prototype","call","parentElement","raf","delay","setTimeout","requestAnimationFrame","relativeCoordsTo","coords","rect","getBoundingClientRect","left","top","removeSavedFromQueryString","queryString","location","search","substr","history","replaceState","pathname","path","downloadFile","fileName","url","a","download","href","body","appendChild","click","remove","isReady","readyState","printDocument","wnd","open","print","close","toDOM","str","child","temp","fragment","createDocumentFragment","innerHTML","firstChild","currentOptions","dateFormatterOptions","day","month","weekday","year","deepMerge","sources","source","shift","isObject","key","hasOwnProperty","Object","assign","getMainElement","handleError","err","Latte","messages","alert","stack","obj","_typeof","isArray","interval","timeout","func","setInterval","isIterable","Symbol","iterator","updateURLHash","data","parts","d","vk","value","vars","push","hash","join","title","formatDateTime","date","Intl","DateTimeFormat","locale","format","randomPassword","availableSets","sets","all","password","set","Math","floor","random","i","j","tmp","shuffleString","register","actions","ActionSubscription","action","id","performance","now","this","filter","sub","_this","dispatch","handle","on","onHashChange","raw","parameters","kv","ad","dataset","actionData","array","Uint32Array","crypto","getRandomValues","request","fetch","credentials","requestJson","then","r","json","copy","text","clipboard","writeText","catch","paste","readText","setCookie","name","days","Date","setTime","getTime","cookie","encodeURIComponent","JSON","stringify","toUTCString","getCookie","cookies","decodeURIComponent","charAt","substring","parse","replace","string","params","RegExp","translate","domain","translations","LatteI18n","defaultOnUpdateHandler","currentTime","Vue","i18n","pythagorean","b","sqrt","pow","spaceship","localeCompare","currentZ","needsZIndex","Buttons","OK","CANCEL","YES","NO","UPDATE","SAVE","REMOVE","CREATE","GO","PROCEED","ALLOW","DENY","ButtonsDescribed","icon","label","classes","weight","createMessage","message","buttons","prompt","Promise","resolve","promptInput","overlay","classList","add","panel","style","setProperty","panelTitle","panelContent","panelFooter","z","setAttribute","actualButtons","sort","button","buttonsToButtons","span","p","formGroup","input","confirm","create","type","dismissible","noticeId","notice","dismiss","content","insertBefore","isEntityNotice","entity","removeChild","registry","find","Error","initializePanel","header","hasRightItems","toggle","contains","hidableItems","isNullOrWhitespace","author","description","version","api","core","dom","isJson","math","clamp","min","max","val","Velocity","vp1","vp2","onUpdate","amplitude","frame","offset","reference","time","velocity","updateInterval","delta","updateValue","clearInterval","update","round","_this2","updateValueAuto","elapsed","v","exp","_this3","notices","areEntitiesNotices","entities","operators","overlays","panels","commaCommaAnd","strs","vue","initializeHoudiniApis","CSS","paintWorklet","addModule","registerProperty","syntax","inherits","initialValue","initializeForms","form","onFormSubmit","bind","ctrlKey","code","submit","btn","tooltipElement","initializeTooltips","div","tooltip","tooltipClass","trim","pos","spawnTooltip","width","height","position","adjustCoordinates","onTooltipElementHover","despawnTooltip","HTMLElement","values","innerHeight","innerWidth","removeProperty","tooltipRect","adjustment","OutsideEvent","listeners","listener","isWithinSource","findIndex","l","removeEventListener","splice","pageX","documentElement","scrollingElement","elementFromPoint","scrollLeft","pageY","scrollTop","template","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","render","staticRenderFns","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","$options","shadowRoot","originalRender","h","existing","beforeCreate","concat","isOldIE","test","userAgent","toLowerCase","HEAD","head","getElementsByTagName","styles","css","group","media","ids","Set","has","map","btoa","unescape","styleSheet","cssText","Boolean","size","textNode","createTextNode","nodes","childNodes","addStyle","eventBus","collides","item1","item2","compact","layout","verticalCompact","compareWith","static","sorted","sortLayoutItemsByRowCol","out","len","compactItem","moved","getFirstCollision","createCoreData","lastX","lastY","num","isNaN","deltaX","deltaY","getControlPosition","offsetParent","offsetParentRect","layoutItem","getLayoutItem","moveElement","isUserAction","movingUp","reverse","collisions","collision","moveElementAwayFromCollision","collidesWith","itemToMove","fakeItem","contextName","subProps","bottomY","transform","WebkitTransform","MozTransform","msTransform","OTransform","combinePassengers","transports","slotProps","reduce","passengers","transport","newPassengers","wormhole","extend","methods","to","from","freeze","keys","compareFn","currentIndex","getTransportIndex","newTransports","slice","order","idx","c","force","hasTarget","hasContentFor","getContentFor","getSourceFor","contextMenu","contextMenuInstance","contextMenuCloseHandler","cancelable","preventDefault","stopPropagation","contextMenuItemDownHandler","contextMenuItemUpHandler","contextMenuHandler","menu","unbind","latte","dispatchAction","moment","momentDuration","duration","momentUtc","utc","DefaultOptions","self","LatteOptions","language","tickInterval","LatteUI","install","normalizeOptions","LatteRoot","$latte","LatteSDK","$latteOptions","EventTarget","addOutsideEventListener","outsideEvent","removeOutsideEventListener","PointerEvent","isATouchOnlyDevice","events","pointerdown","pointermove","pointerover","pointerout","pointerup","handlers","tap","$this","isTap","original","overrideType","registerPointerEventsPolyfill","registerDirectives","registerMixins","registerComponents","onTick","onSwitchTheme","onDOMContentLoaded","Components","component","RTEPlugins","Widgets","w","Directives","directive","Mixins","m","mixin","dismissButton","t","themeId","theme","hidden","use"],"mappings":"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"}